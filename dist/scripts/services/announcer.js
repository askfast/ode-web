define(["services/services","config"],function(e,t){e.factory("Announcer",["$rootScope",function(e){return{process:function(t,n){var r={"short":[],"long":[]},i=4,s=0;if(n){var o=[];angular.forEach(t.rows,function(t){o.push({msgCode:e.StandBy.config.profile.p2000.codes,day:(new Date(t.value.timestamp)).toString("dd-MM-yy"),time:(new Date(t.value.timestamp)).toString("HH:mm:ss"),body:t.value.message})}),t=o}return angular.forEach(t,function(e){if(e.body){var t=e.body.toLowerCase();if(t.match(/prio 1/)||t.match(/p 1 /)||t.match(/A1 /))e.body=e.body.replace("Prio 1 ",""),e.prio={1:!0,test:!1};if(t.match(/prio 2/)||t.match(/p 2 /)||t.match(/A2 /))e.body=e.body.replace("Prio 2 ",""),e.prio={2:!0,test:!1};if(t.match(/prio 3/)||t.match(/p 3 /)||t.match(/B1 /)||t.match(/B2 /))e.body=e.body.replace("Prio 3 ",""),e.prio={3:!0,test:!1};e.body.match(/PROEFALARM/)&&(e.prio={test:!0}),s<4&&r.short.push(e),r.long.push(e),s++}}),r}}}])});