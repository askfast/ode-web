define(["app"],function(e){e.config(["$locationProvider","$routeProvider","$httpProvider",function(e,t,n){t.when("/login",{templateUrl:"views/login.html",controller:"login"}).when("/logout",{templateUrl:"views/logout.html",controller:"logout"}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"dashboard"}).when("/tv",{templateUrl:"views/tv.html",controller:"tv",resolve:{data:["$route","$http",function(e,t){e.current.params.sessionID&&(t.defaults.headers.common["X-SESSION_ID"]=e.current.params.sessionID)}]}}).when("/presence",{templateUrl:"views/presence.html",controller:"presence",resolve:{data:["$route","$http",function(e,t){e.current.params.sessionID&&(t.defaults.headers.common["X-SESSION_ID"]=e.current.params.sessionID)}]}}).when("/planboard",{templateUrl:"views/planboard.html",controller:"planboard",resolve:{data:["$route","Slots","Storage","Dater","Store",function(e,t,n,r,i){var s=i("app").get("periods"),o=angular.fromJson(i("user").get("resources").settingsWebPaige),u=i("network").get("groups"),a,f=!1;return _.each(u,function(e){e.uuid==o.app.group&&(f=!0)}),a=f?o.app.group:u[0].uuid,t.all({groupId:a,stamps:r.current.today()>360?{start:s.days[358].last.timeStamp,end:s.days[365].last.timeStamp}:{start:s.days[r.current.today()-1].last.timeStamp,end:s.days[r.current.today()+6].last.timeStamp},month:r.current.month(),layouts:{user:!0,group:!0,members:!1}})}]},reloadOnSearch:!1}).when("/messages",{templateUrl:"views/messages.html",controller:"messages",resolve:{data:["Messages",function(e){return e.query()}]},reloadOnSearch:!1}).when("/groups",{templateUrl:"views/groups.html",controller:"groups",resolve:{data:["Groups",function(e){return e.query()}]},reloadOnSearch:!1}).when("/logs",{templateUrl:"views/logs.html",controller:"logs",resolve:{data:["Logs",function(e){return e.fetch({end:(new Date.now).getTime(),start:(new Date.today).addDays(-7).getTime()})}]},reloadOnSearch:!1}).when("/profile/:userId",{templateUrl:"views/profile.html",controller:"profile",resolve:{data:["$rootScope","Profile","$route","Dater","Store",function(e,t,n,r,i){if(n.current.params.userId.toLowerCase()!=e.StandBy.resources.uuid){var s=i("app").get("periods");return t.getWithSlots(n.current.params.userId.toLowerCase(),!1,{start:s.weeks[r.current.week()].first.timeStamp/1e3,end:s.weeks[r.current.week()].last.timeStamp/1e3})}return t.get(n.current.params.userId.toLowerCase(),!1)}]},reloadOnSearch:!1}).when("/profile",{templateUrl:"views/profile.html",controller:"profile",resolve:{data:["$rootScope","$route","$location",function(e,t,n){(!t.current.params.userId||!n.hash())&&n.path("/profile/"+e.StandBy.resources.uuid).hash("profile")}]}}).when("/settings",{templateUrl:"views/settings.html",controller:"settings",resolve:{data:["Settings",function(e){return angular.fromJson(e.get())}]}}).when("/faq",{templateUrl:"views/faq.html",controller:"faq"}).when("/help",{templateUrl:"views/help.html",controller:"help"}).otherwise({redirectTo:"/login"}),n.interceptors.push(["$q","Log","$location","Store",function(e,t,n,r){return{request:function(t){return t||e.when(t)},requestError:function(t){return e.reject(t)},response:function(t){return t||e.when(t)},responseError:function(t){return t.status==403&&(r("environment").remove("sessionTimeout"),n.path("/logout"),window.location.href="logout.html"),e.reject(t)}}}])}])});