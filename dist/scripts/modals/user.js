define(["services/services","config"],function(e,t){e.factory("User",["$rootScope","$resource","$q","$http","Log","md5","StandBy","Session","Store",function(e,n,r,i,s,o,u,a,f){var l=n(),c=n(t.host+"/domain/:level",{},{get:{method:"GET",params:{},isArray:!0},locations:{method:"GET",params:{level:"locations"},isArray:!0},locate:{method:"post",params:{level:"location"},isArray:!0}});return l.prototype.login=function(e,t){var n=r.defer();try{u._("login",{uuid:e.toLowerCase(),pass:o.createHash(t)}).then(function(e){e.error||a.set(e["X-SESSION_ID"]),n.resolve(e)})}catch(i){s.error("Something went wrong with login call:",i)}return n.promise},l.prototype.logout=function(){var e=r.defer();try{u._("logout").then(function(t){a.clear(),e.resolve(t)})}catch(t){s.error("Something went wrong with logout call:",t)}return e.promise},l.prototype.resources=function(){var t=r.defer();try{u._("resources").then(function(n){f("user").save("resources",n),e.StandBy.resources=n,t.resolve(n)})}catch(n){s.error("Something went wrong with resources call:",n)}return t.promise},l.prototype.locations=function(){var e=r.defer();return c.locations({},function(t){var n=[];angular.forEach(t,function(e){var t="";angular.forEach(e,function(e){t+=e}),t.length>0&&n.push(t)}),e.resolve(n)},function(t){e.resolve(t)}),e.promise},l.prototype.locate=function(e){var t=r.defer();return e==null&&(e=""),c.locate({},'"'+e+'"',function(e){t.resolve(e)},function(e){t.resolve(e)}),t.promise},new l}])});