define(["filters/filters","config"],function(e,t){e.filter("convertToDateObj",[function(){return function(e){return Date(e)}}]).filter("translateRole",[function(){return function(e){var n;return angular.forEach(t.roles,function(t){t.id==e?n=t.label:e==0&&(n="Super admin")}),n}}]).filter("translateDivision",[function(){return function(e){var n;return angular.forEach(t.timeline.config.divisions,function(t){t.id==e&&(n=t.label)}),n}}]).filter("rangeMainFilter",["Dater",function(e){var t=e.getPeriods();return function(n){(new Date(n.end)).getTime()-(new Date(n.start)).getTime()==86401e3&&(n.start=(new Date(n.end)).addDays(-1));var r=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},i={start:{real:r(e.translateToDutch((new Date(n.start)).toString("dddd d MMMM"))),month:r(e.translateToDutch((new Date(n.start)).toString("MMMM"))),day:r(e.translateToDutch((new Date(n.start)).toString("d"))),year:(new Date(n.start)).toString("yyyy")},end:{real:r(e.translateToDutch((new Date(n.end)).toString("dddd d MMMM"))),month:r(e.translateToDutch((new Date(n.end)).toString("MMMM"))),day:r(e.translateToDutch((new Date(n.end)).toString("d"))),year:(new Date(n.end)).toString("yyyy")}},n={start:{real:(new Date(n.start)).toString("dddd d MMMM"),month:(new Date(n.start)).toString("MMMM"),day:(new Date(n.start)).toString("d")},end:{real:(new Date(n.end)).toString("dddd d MMMM"),month:(new Date(n.end)).toString("MMMM"),day:(new Date(n.end)).toString("d")}},s=Date.getMonthNumberFromName(n.start.month);return(Math.round(n.start.day)+1==n.end.day&&n.start.hour==n.end.hour||n.start.day==n.end.day)&&n.start.month==n.end.month?i.start.real+", "+i.start.year:n.start.day==1&&n.end.day==t.months[s+1].totalDays?i.start.month+", "+i.start.year:i.start.real+", "+i.start.year+" / "+i.end.real+", "+i.end.year}}]).filter("rangeMainWeekFilter",["Dater",function(e){return function(t){if(t){var n=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},r={start:n(e.translateToDutch((new Date(t.start)).toString("dddd d MMMM"))),end:n(e.translateToDutch((new Date(t.end)).toString("dddd d MMMM")))};return r.start+" / "+r.end+", "+e.getThisYear()}return!1}}]).filter("rangeInfoFilter",["$rootScope","Dater",function(e,t){var n=t.getPeriods();return function(t){var r=(new Date(t.range.end)).getTime()-(new Date(t.range.start)).getTime();if(r>26784e5)return e.ui.planboard.rangeInfoTotalSelectedDays+Math.round(r/864e5);if(t.scope.day){var i={start:(new Date(t.range.start)).toString("HH:mm"),end:(new Date(t.range.end)).toString("HH:mm")};return i.end=="00:00"&&(i.end="24:00"),e.ui.planboard.rangeInfoTime+i.start+" / "+i.end}if(t.scope.week)return e.ui.planboard.rangeInfoWeekNumber+t.current.week;if(t.scope.month)return e.ui.planboard.rangeInfoMonth+t.current.month+e.ui.planboard.rangeInfoTotalDays+n.months[t.current.month].totalDays}}]).filter("rangeInfoWeekFilter",["$rootScope",function(e){return function(t){if(t)return e.ui.planboard.rangeInfoWeekNumber+t.current.week}}]).filter("convertRatios",["$rootScope",function(e){return function(t){var n="";return angular.forEach(t,function(t){var r=t.state.replace(/^bar-+/,"");switch(r){case"Available":r=e.ui.states.available;break;case"Unavailable":r=e.ui.states.notAvailable;break;case"SchipperVanDienst":r=e.ui.states.captain;break;case"BeschikbaarNoord":r=e.ui.states.availableNorth;break;case"BeschikbaarZuid":r=e.ui.states.availableSouth;break;case"Unreached":r=e.ui.states.notReached;break;case"NoPlanning":r=e.ui.states.eligible}n+=t.ratio.toFixed(1)+"% "+r+", "}),n.substring(0,n.length-2)}}]).filter("calculateDeltaTime",["$rootScope",function(e){return function(t){var n=Math.abs(t-Date.now().getTime())/1e3,r=Math.floor(n/86400);n-=r*86400;var i=Math.floor(n/3600)%24;n-=i*3600;var s=Math.floor(n/60)%60,o="";return r!=0&&(o+=r),i!=0&&(r!=0&&(o+=e.ui.dashboard.time.days+" : "),o+=i),s!=0&&(i!=0&&(o+=e.ui.dashboard.time.hours+" : "),o+=s+e.ui.dashboard.time.minutes),i==0&&s==0&&(o+=" "+e.ui.dashboard.time.days),o}}]).filter("calculateTimeInDays",function(){return function(e){var t=864e5,n=36e5,r=0,i=0,e=e*1e3,i=e%t,r=e-i;return Math.floor(r/t)}}).filter("calculateTimeInHours",function(){return function(e){var t=864e5,n=36e5,r=0,i=0,e=e*1e3,i=e%t,r=e-i;return Math.floor(i/n)}}).filter("calculateTimeInMinutes",function(){return function(e){var t=864e5,n=36e5,r=6e4,i=0,s=0,o=0,e=e*1e3,s=e%t,i=e-s,o=e%n;return Math.floor(o/r)}}).filter("convertEve",[function(){return function(e){if(/\//.test(e)){if(t.profile.smartAlarm)return e;var n=e;return n=typeof e!="undefined"?e.split("/"):["",e,""],n[n.length-2]}return e}}]).filter("convertUserIdToName",["Store",function(e){var t=e("network").get("unique");return function(e){return t==null||typeof t[e]=="undefined"?e:t[e].resources.firstName+" "+t[e].resources.lastName}}]).filter("nicelyDate",["$rootScope",function(e){return function(t){return typeof t=="string"&&(t=Number(t)),(new Date(t)).toString(e.StandBy.config.formats.datetimefull)}}]).filter("convertTimeStamp",function(){return function(e){return console.warn(typeof e),(new Date(e)).toString("dd-MM-yyyy HH:mm")}}).filter("noTitle",function(){return function(e){return e==""?"- No Title -":e}}).filter("stripSpan",function(){return function(e){return e.match(/<span class="label">(.*)<\/span>/)}}).filter("stripHtml",function(){return function(e){if(e)return e.split(">")[1].split("<")[0]}}).filter("groupIdToName",["Store",function(e){return function(t,n){var r=angular.fromJson(e("network").get("groups")),i="";for(var s in r)r[s].uuid==t&&(n&&(i+=", "),i+=r[s].name);return i}}]).filter("divisionIdToName",["$rootScope",function(e){return function(t){var n=e.StandBy.config.timeline.config.divisions;for(var r in n)if(n[r].id==t)return n[r].label}}]).filter("i18n_spec",["$rootScope",function(e){return function(t,n){var r=n.split("."),i=e.ui[r[0]][r[1]],i=i.replace("$v",t);return i}}]).filter("truncateGroupTitle",["Strings",function(e){return function(t){return e.truncate(t,20,!0)}}]).filter("toTitleCase",["Strings",function(e){return function(t){return e.toTitleCase(t)}}]).filter("countBox",function(){return function(e){var t=0;return angular.forEach(e,function(e){t+=e.length}),t}}).filter("nicelyOffsets",["Dater","Offsetter",function(e,t){return function(e){var n=t.factory(e),r="";return angular.forEach(n,function(e){r+='<div style="display:block; margin-bottom: 5px;">',r+='<span class="badge">'+e.time+"</span>&nbsp;",e.mon&&(r+='<span class="text-muted"><small><i> maandag,</i></small></span>'),e.tue&&(r+='<span class="text-muted"><small><i> dinsdag,</i></small></span>'),e.wed&&(r+='<span class="text-muted"><small><i> woensdag,</i></small></span>'),e.thu&&(r+='<span class="text-muted"><small><i> donderdag,</i></small></span>'),e.fri&&(r+='<span class="text-muted"><small><i> vrijdag,</i></small></span>'),e.sat&&(r+='<span class="text-muted"><small><i> zaterdag,</i></small></span>'),e.sun&&(r+='<span class="text-muted"><small><i> zondag,</i></small></span>'),r=r.substring(0,r.length-20),r=r+="</i></small></span>",r+="</div>",r=r.substring(0,r.length)}),r}}]).filter("nicelyAudience",["Store",function(e){return function(t){if(t){var n=e("network").get("unique"),r=e("network").get("groups"),i=[];return angular.forEach(t,function(e){var t;n[e]?t=n[e].name:angular.forEach(r,function(n){n.uuid==e&&(t=n.name)}),i+=t+", "}),i.substring(0,i.length-2)}}}]).filter("convertToObject",[function(){return function(e){if(e){var t={};return angular.forEach(e,function(e,n){t[n]=e}.bind(t)),t}}}]).filter("filterSupers",[function(){return function(e){if(e){var t=[];return angular.forEach(e,function(e){e.resources&&e.resources.role!=0&&e.resources.role!=4&&t.push(e)}),t}}}]).filter("avatar",["Session","Store","$rootScope",function(e,n,r){return function(i,s,o,u){var a=e.get();if(a&&i){var f;switch(s){case"team":f="/team/member/";break;case"client":f="/client/";break;case"avatar":f="images/";break;case"user":f="/user/avatar/";break;case"image":f="/images/"}var l=function(e){var t=0;return angular.forEach(n("app").get("avatarChangeRecord"),function(n){n==e&&t++}),parseInt(t,10)},c=parseInt(o,10)+parseInt(l(i),10);if(s=="avatar"||s=="image"){var h=t.host+f+i+"?sid="+a;return h}return u?t.host+f+i+"/photo?width="+c+"&height="+c+"&sid="+a+"&id="+u:r.StandBy.config.profile.defaultProfilePicture?r.StandBy.config.profile.defaultProfilePicture:t.host+f+i+"/photo?width="+c+"&height="+c+"&sid="+a}}}])});