define(["controllers/controllers","locals"],function(e,t){e.controller("settings",function(e,n,r,i,s,o,u){e.notification.status=!1,e.fixStyles(),n.settings=angular.fromJson(i);var a={};_.each(t.ui,function(e){a[e.meta.name]=e.meta.label}),n.languages=a;var f={};_.each(u("network").get("groups"),function(e){f[e.uuid]=e.name}),n.groups=f,n.save=function(t){e.statusBar.display(e.ui.settings.saving),s.save(e.StandBy.resources.uuid,t).then(function(){e.notifier.success(e.ui.settings.saved),e.statusBar.display(e.ui.settings.refreshing),o.get(e.StandBy.resources.uuid,!0).then(function(t){t.error?(e.notifier.error(e.ui.errors.settings.save),console.warn("error ->",t)):(n.settings=angular.fromJson(t.resources.settingsWebPaige),e.changeLanguage(angular.fromJson(t.resources.settingsWebPaige).user.language),e.statusBar.off())})})},n.authGoogle=function(){window.location="http://3rc2.ask-services.appspot.com/auth/google?agentUrl=http://3rc2.ask-services.appspot.com/eveagents/personalagent/"+e.StandBy.resources.uuid+"/"+"&agentMethod=createGoogleAgents"+"&applicationCallback="+location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+"/index.html"+"?account="+e.StandBy.resources.uuid+encodeURIComponent("#")+"/settings"}})});