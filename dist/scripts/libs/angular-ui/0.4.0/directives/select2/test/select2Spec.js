describe("uiSelect2",function(){function i(n){var i=t(n)(e);return e.$apply(),r.flush(),i}var e,t,n,r;beforeEach(module("ui.directives")),beforeEach(inject(function(n,i,s,o){e=n.$new(),t=i,r=o,e.options={query:function(e){var t={results:[{id:1,text:"first"}]};e.callback(t)}}})),describe("with a <select> element",function(){describe("compiling this directive",function(){it("should throw an error if we have no model defined",function(){expect(function(){i('<select type="text" ui-reset></select>')}).toThrow()}),it("should create proper DOM structure",function(){var e=i('<select ui-select2 ng-model="foo"></select>');expect(e.siblings().is("div.select2-container")).toBe(!0)})}),describe("when model is changed programmatically",function(){it("should set select2 to the value",function(){e.foo="First";var t=i('<select ui-select2 ng-model="foo"><option>First</option><option>Second</option></select>');expect(t.select2("val")).toBe("First"),e.$apply('foo = "Second"'),expect(t.select2("val")).toBe("Second")}),it("should set select2 to the value for multiples",function(){e.foo="First";var t=i('<select ui-select2 multiple ng-model="foo"><option>First</option><option>Second</option><option>Third</option></select>');expect(t.select2("val")).toEqual(["First"]),e.$apply('foo = ["Second"]'),expect(t.select2("val")).toEqual(["Second"]),e.$apply('foo = ["Second","Third"]'),expect(t.select2("val")).toEqual(["Second","Third"])})}),it("should observe the disabled attribute",function(){var t=i('<select ui-select2 ng-model="foo" ng-disabled="disabled"></select>');expect(t.siblings().hasClass("select2-container-disabled")).toBe(!1),e.$apply("disabled = true"),expect(t.siblings().hasClass("select2-container-disabled")).toBe(!0),e.$apply("disabled = false"),expect(t.siblings().hasClass("select2-container-disabled")).toBe(!1)}),it("should observe the multiple attribute",function(){var n=t('<select ui-select2 ng-model="foo" ng-multiple="multiple"></select>')(e);expect(n.siblings().hasClass("select2-container-multi")).toBe(!1),e.$apply("multiple = true"),expect(n.siblings().hasClass("select2-container-multi")).toBe(!0),e.$apply("multiple = false"),expect(n.siblings().hasClass("select2-container-multi")).toBe(!1)}),it("should observe an option with ng-repeat for changes",function(){e.items=["first","second","third"],e.foo="fourth";var t=i('<select ui-select2 ng-model="foo"><option ng-repeat="item in items">{{item}}</option></select>');expect(t.select2("val")).toNotBe("fourth"),e.$apply('items=["fourth"]'),r.flush(),expect(t.select2("val")).toBe("fourth")})}),describe("with an <input> element",function(){describe("compiling this directive",function(){it("should throw an error if we have no model defined",function(){expect(function(){i("<input ui-select2/>")}).toThrow()}),it("should creae proper DOM structure",function(){var e=i('<input ui-select2="options" ng-model="foo"/>');expect(e.siblings().is("div.select2-container")).toBe(!0)})}),describe("when model is changed programmatically",function(){describe("for single-select",function(){it("should call select2(data, ...) for objects",function(){var t=i('<input ng-model="foo" ui-select2="options">');spyOn($.fn,"select2"),e.$apply('foo={ id: 1, text: "first" }'),expect(t.select2).toHaveBeenCalledWith("data",{id:1,text:"first"})}),it("should call select2(val, ...) for strings",function(){var t=i('<input ng-model="foo" ui-select2="options">');spyOn($.fn,"select2"),e.$apply('foo="first"'),expect(t.select2).toHaveBeenCalledWith("val","first")})}),describe("for multi-select",function(){it("should call select2(data, ...) for arrays",function(){var t=i('<input ng-model="foo" multiple ui-select2="options">');spyOn($.fn,"select2"),e.$apply('foo=[{ id: 1, text: "first" },{ id: 2, text: "second" }]'),expect(t.select2).toHaveBeenCalledWith("data",[{id:1,text:"first"},{id:2,text:"second"}])}),it("should call select2(data, []) for falsey values",function(){var t=i('<input ng-model="foo" multiple ui-select2="options">');spyOn($.fn,"select2"),e.$apply("foo=[]"),expect(t.select2).toHaveBeenCalledWith("data",[])}),it("should call select2(val, ...) for strings",function(){var t=i('<input ng-model="foo" multiple ui-select2="options">');spyOn($.fn,"select2"),e.$apply('foo="first,second"'),expect(t.select2).toHaveBeenCalledWith("val","first,second")})})}),it("should set the model when the user selects an item",function(){var e=i('<input ng-model="foo" multiple ui-select2="options">')})})});