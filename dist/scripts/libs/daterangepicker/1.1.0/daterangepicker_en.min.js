/*! bootstrap daterangepicker */

!function(e){var t=function(t,n,r){var i,s="object"==typeof n;this.startDate=Date.today(),this.endDate=Date.today(),this.minDate=!1,this.maxDate=!1,this.changed=!1,this.cleared=!1,this.showDropdowns=!1,this.ranges={},this.dateLimit=!1,this.opens="right",this.cb=function(){},this.format="MM/dd/yyyy",this.separator=" - ",this.showWeekNumbers=!1,this.buttonClasses=["btn-success"],this.applyClass="btn btn-small btn-success",this.clearClass="btn btn-small",this.locale={applyLabel:"Apply",clearLabel:"Clear",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:Date.CultureInfo.shortestDayNames,monthNames:Date.CultureInfo.monthNames,firstDay:0},i=this.locale,this.leftCalendar={month:Date.today().set({day:1,month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),calendar:[]},this.rightCalendar={month:Date.today().set({day:1,month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),calendar:[]},this.element=e(t),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:e.proxy(this.show,this),focus:e.proxy(this.show,this)}):this.element.on("click",e.proxy(this.show,this)),s&&("object"==typeof n.locale&&e.each(i,function(e,t){i[e]=n.locale[e]||t}),n.applyClass&&(this.applyClass=n.applyClass),n.clearClass&&(this.clearClass=n.clearClass));var o='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+"</label>"+'<input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" />'+"</div>"+'<div class="daterangepicker_end_input" style="float: left; padding-left: 11px">'+'<label for="daterangepicker_end">'+this.locale.toLabel+"</label>"+'<input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" />'+"</div>"+'<button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+"</button>&nbsp;"+'<button class="'+this.clearClass+' clearBtn">'+this.locale.clearLabel+"</button>"+"</div>"+"</div>"+"</div>";if(this.container=e(o).appendTo("body"),s){if("string"==typeof n.format&&(this.format=n.format),"string"==typeof n.separator&&(this.separator=n.separator),"string"==typeof n.startDate&&(this.startDate=Date.parseExact(n.startDate,this.format)),"string"==typeof n.endDate&&(this.endDate=Date.parseExact(n.endDate,this.format)),"string"==typeof n.minDate&&(this.minDate=Date.parseExact(n.minDate,this.format)),"string"==typeof n.maxDate&&(this.maxDate=Date.parseExact(n.maxDate,this.format)),"object"==typeof n.startDate&&(this.startDate=n.startDate),"object"==typeof n.endDate&&(this.endDate=n.endDate),"object"==typeof n.minDate&&(this.minDate=n.minDate),"object"==typeof n.maxDate&&(this.maxDate=n.maxDate),"object"==typeof n.ranges){for(var u in n.ranges){var a=n.ranges[u][0],f=n.ranges[u][1];"string"==typeof a&&(a=Date.parse(a)),"string"==typeof f&&(f=Date.parse(f)),this.minDate&&this.minDate>a&&(a=this.minDate),this.maxDate&&f>this.maxDate&&(f=this.maxDate),this.minDate&&this.minDate>f||this.maxDate&&a>this.maxDate||(this.ranges[u]=[a,f])}var l="<ul>";for(var u in this.ranges)l+="<li>"+u+"</li>";l+="<li>"+this.locale.customRangeLabel+"</li>",l+="</ul>",this.container.find(".ranges").prepend(l)}if("object"==typeof n.dateLimit&&(this.dateLimit=n.dateLimit),"object"==typeof n.locale&&"number"==typeof n.locale.firstDay){this.locale.firstDay=n.locale.firstDay;for(var c=n.locale.firstDay;c>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),c--}"string"==typeof n.opens&&(this.opens=n.opens),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=[n.buttonClasses]),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns)}var h=this.container;if(e.each(this.buttonClasses,function(e,t){h.find("button").addClass(t)}),"right"==this.opens){var p=this.container.find(".calendar.left"),d=this.container.find(".calendar.right");p.removeClass("left").addClass("right"),d.removeClass("right").addClass("left")}if((n===void 0||n.ranges===void 0)&&this.container.find(".calendar").show(),"function"==typeof r&&(this.cb=r),this.container.addClass("opens"+this.opens),(!s||n.startDate===void 0&&n.endDate===void 0)&&e(this.element).is("input[type=text]")){var v=e(this.element).val(),m=v.split(this.separator);2==m.length&&(this.startDate=Date.parseExact(m[0],this.format),this.endDate=Date.parseExact(m[1],this.format))}this.container.on("mousedown",e.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",e.proxy(this.clickPrev,this)),this.container.find(".calendar").on("click",".next",e.proxy(this.clickNext,this)),this.container.find(".ranges").on("click","button.applyBtn",e.proxy(this.clickApply,this)),this.container.find(".ranges").on("click","button.clearBtn",e.proxy(this.clickClear,this)),this.container.find(".calendar").on("click","td.available",e.proxy(this.clickDate,this)),this.container.find(".calendar").on("mouseenter","td.available",e.proxy(this.enterDate,this)),this.container.find(".calendar").on("mouseleave","td.available",e.proxy(this.updateView,this)),this.container.find(".ranges").on("click","li",e.proxy(this.clickRange,this)),this.container.find(".ranges").on("mouseenter","li",e.proxy(this.enterRange,this)),this.container.find(".ranges").on("mouseleave","li",e.proxy(this.updateView,this)),this.container.find(".calendar").on("change","select.yearselect",e.proxy(this.updateYear,this)),this.container.find(".calendar").on("change","select.monthselect",e.proxy(this.updateMonth,this)),this.element.on("keyup",e.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};t.prototype={constructor:t,mousedown:function(t){t.stopPropagation(),(!this.showDropdowns||e(t.target).not("select").length)&&t.preventDefault()},updateView:function(){this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.container.find("input[name=daterangepicker_start]").val(this.startDate.toString(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.toString(this.format)),this.startDate.equals(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")){var e=this.element.val().split(this.separator),t=Date.parseExact(e[0],this.format),n=Date.parseExact(e[1],this.format);null!=t&&null!=n&&(n.isBefore(t)||(this.startDate=t,this.endDate=n,this.updateView(),this.cb(this.startDate,this.endDate),this.updateCalendars()))}},notify:function(){this.cleared||this.updateView(),this.element.is("input")&&this.element.val(this.cleared?"":this.startDate.toString(this.format)+this.separator+this.endDate.toString(this.format));var e=this.cleared?null:this.startDate,t=this.cleared?null:this.endDate;this.cleared=!1,this.cb(e,t)},move:function(){"left"==this.opens?this.container.css({top:this.element.offset().top+this.element.outerHeight(),right:e(window).width()-this.element.offset().left-this.element.outerWidth(),left:"auto"}):this.container.css({top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left,right:"auto"})},show:function(t){this.container.show(),this.move(),t&&(t.stopPropagation(),t.preventDefault()),this.changed=!1,this.element.trigger("shown",{target:t.target,picker:this}),e(document).on("mousedown",e.proxy(this.hide,this))},hide:function(){this.container.hide(),e(document).off("mousedown",this.hide),this.changed&&(this.changed=!1,this.notify())},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].toString(this.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].toString(this.format))}},clickRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.container.find(".calendar").show();else{var n=this.ranges[t];this.startDate=n[0],this.endDate=n[1],this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.updateCalendars(),this.changed=!0,this.container.find(".calendar").hide(),this.hide()}},clickPrev:function(t){var n=e(t.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.add({months:-1}):this.rightCalendar.month.add({months:-1}),this.updateCalendars()},clickNext:function(t){var n=e(t.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.add({months:1}):this.rightCalendar.month.add({months:1}),this.updateCalendars()},enterDate:function(t){var n=e(t.target).attr("title"),r=n.substr(1,1),i=n.substr(3,1),s=e(t.target).parents(".calendar");s.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[r][i].toString(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[r][i].toString(this.format))},clickDate:function(t){var n=e(t.target).attr("title"),r=n.substr(1,1),i=n.substr(3,1),s=e(t.target).parents(".calendar");if(s.hasClass("left")){if(startDate=this.leftCalendar.calendar[r][i],endDate=this.endDate,"object"==typeof this.dateLimit){var o=(new Date(startDate)).add(this.dateLimit);endDate.isAfter(o)&&(endDate=o)}this.element.trigger("clicked",{dir:"left",picker:this})}else{if(startDate=this.startDate,endDate=this.rightCalendar.calendar[r][i],"object"==typeof this.dateLimit){var u={days:0-this.dateLimit.days,months:0-this.dateLimit.months,years:0-this.dateLimit.years},a=(new Date(endDate)).add(u);startDate.isBefore(a)&&(startDate=a)}this.element.trigger("clicked",{dir:"right",picker:this})}s.find("td").removeClass("active"),startDate.equals(endDate)||startDate.isBefore(endDate)?(e(t.target).addClass("active"),startDate.equals(this.startDate)&&endDate.equals(this.endDate)||(this.changed=!0),this.startDate=startDate,this.endDate=endDate):startDate.isAfter(endDate)&&(e(t.target).addClass("active"),this.changed=!0,this.startDate=startDate,this.endDate=startDate.clone().add(1).days()),this.leftCalendar.month.set({month:this.startDate.getMonth(),year:this.startDate.getFullYear()}),this.rightCalendar.month.set({month:this.endDate.getMonth(),year:this.endDate.getFullYear()}),this.updateCalendars()},clickApply:function(){this.hide()},clickClear:function(){this.changed=!0,this.cleared=!0,this.hide()},updateYear:function(t){var n=parseInt(e(t.target).val()),r=e(t.target).closest(".calendar").hasClass("left");r?this.leftCalendar.month.set({month:this.startDate.getMonth(),year:n}):this.rightCalendar.month.set({month:this.endDate.getMonth(),year:n}),this.updateCalendars()},updateMonth:function(t){var n=parseInt(e(t.target).val()),r=e(t.target).closest(".calendar").hasClass("left");r?this.leftCalendar.month.set({month:n,year:this.startDate.getFullYear()}):this.rightCalendar.month.set({month:n,year:this.endDate.getFullYear()}),this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.getMonth(),this.leftCalendar.month.getFullYear()),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.getMonth(),this.rightCalendar.month.getFullYear()),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var e=!0,t=0;for(var n in this.ranges)this.startDate.equals(this.ranges[n][0])&&this.endDate.equals(this.ranges[n][1])&&(e=!1,this.container.find(".ranges li:eq("+t+")").addClass("active")),t++;e&&this.container.find(".ranges li:last").addClass("active"),this.element.trigger("updated",this)},buildCalendar:function(e,t){var n=Date.today().set({day:1,month:e,year:t}),r=n.clone().add(-1).day().getMonth(),i=n.clone().add(-1).day().getFullYear();Date.getDaysInMonth(t,e);for(var s=Date.getDaysInMonth(i,r),o=n.getDay(),u=[],a=0;6>a;a++)u[a]=[];var f=s-o+this.locale.firstDay+1;f>s&&(f-=7),o==this.locale.firstDay&&(f=s-6);for(var l=Date.today().set({day:f,month:r,year:i}),a=0,c=0,h=0;42>a;a++,c++,l=l.clone().add(1).day())a>0&&0==c%7&&(c=0,h++),u[h][c]=l;return u},renderDropdowns:function(e,t,n){for(var r=e.getMonth(),i='<select class="monthselect">',s=!1,o=!1,u=0;12>u;u++)(!s||u>=t.getMonth())&&(!o||n.getMonth()>=u)&&(i+="<option value='"+u+"'"+(u===r?" selected='selected'":"")+">"+this.locale.monthNames[u]+"</option>");i+="</select>";for(var a=e.getFullYear(),f=n&&n.getFullYear()||a+5,l=t&&t.getFullYear()||a-50,c='<select class="yearselect">',h=l;f>=h;h++)c+='<option value="'+h+'"'+(h===a?' selected="selected"':"")+">"+h+"</option>";return c+="</select>",i+c},renderCalendar:function(t,n,r,i){var s='<table class="table-condensed">';s+="<thead>",s+="<tr>",this.showWeekNumbers&&(s+="<th></th>"),s+=!r||t[1][1]>r?'<th class="prev available"><i class="icon-arrow-left"></i></th>':"<th></th>";var o=this.locale.monthNames[t[1][1].getMonth()]+t[1][1].toString(" yyyy");this.showDropdowns&&(o=this.renderDropdowns(t[1][1],r,i)),s+='<th colspan="5" style="width: auto">'+o+"</th>",s+=!i||i>t[1][1]?'<th class="next available"><i class="icon-arrow-right"></i></th>':"<th></th>",s+="</tr>",s+="<tr>",this.showWeekNumbers&&(s+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(e,t){s+="<th>"+t+"</th>"}),s+="</tr>",s+="</thead>",s+="<tbody>";for(var u=0;6>u;u++){s+="<tr>",this.showWeekNumbers&&(s+='<td class="week">'+t[u][0].getWeek()+"</td>");for(var a=0;7>a;a++){var f="available ";f+=t[u][a].getMonth()==t[1][1].getMonth()?"":"off",n.setHours(0,0,0,0),r&&r>t[u][a]||i&&t[u][a]>i?f=" off disabled ":t[u][a].equals(n)?(f+=" active ",t[u][a].equals(this.startDate)&&(f+=" start-date "),t[u][a].equals(this.endDate)&&(f+=" end-date ")):t[u][a]>=this.startDate&&t[u][a]<=this.endDate&&(f+=" in-range ",t[u][a].equals(this.startDate)&&(f+=" start-date "),t[u][a].equals(this.endDate)&&(f+=" end-date "));var l="r"+u+"c"+a;s+='<td class="'+f.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" title="'+l+'">'+t[u][a].getDate()+"</td>"}s+="</tr>"}return s+="</tbody>",s+="</table>"}},e.fn.daterangepicker=function(n,r){return this.each(function(){var i=e(this);i.data("daterangepicker")||i.data("daterangepicker",new t(i,n,r))}),this}}(window.jQuery);