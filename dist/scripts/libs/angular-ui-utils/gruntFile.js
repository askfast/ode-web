module.exports=function(e){function t(t){return function(){if(this.args.length!==1)return e.log.fail("Just give the name of the "+t+" you want like :\ngrunt "+t+":bower");var n=this.async(),r=require("child_process").spawn;r("./node_modules/.bin/gulp",[t,"--branch="+this.args[0]].concat(e.option.flags()),{cwd:"./node_modules/angular-ui-publisher",stdio:"inherit"}).on("close",n)}}function r(e,t){return e[t]={expand:!0,cwd:"modules/"+t,src:["*.js"],dest:"dist/sub/"+t},e}require("load-grunt-tasks")(e),e.registerTask("default",["jshint","karma:unit"]),e.registerTask("serve",["karma:continuous","dist:main","dist:demo","build:gh-pages","connect:continuous","watch"]),e.registerTask("dist",["dist:main","dist:sub","dist:demo"]),e.registerTask("dist:main",["concat:tmp","concat:modules","clean:rm_tmp","uglify:main"]),e.registerTask("dist:sub",["ngmin","uglify:sub"]),e.registerTask("dist:demo",["concat:html_doc","copy"]),e.registerTask("build",t("build")),e.registerTask("publish",t("publish"));var n=e.file.expand({cwd:"modules"},["*","!utils.js"]),i=function(t,n){var r={configFile:t,singleRun:!0},i=process.env.TRAVIS&&{browsers:["Firefox","PhantomJS"],reporters:["dots"]};return e.util._.extend(r,n,i)};e.initConfig({bower:"bower_components",dist:"<%= bower %>/angular-ui-docs",pkg:e.file.readJSON("package.json"),meta:{banner:["/**"," * <%= pkg.name %> - <%= pkg.description %>",' * @version v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>'," * @link <%= pkg.homepage %>"," * @license <%= pkg.license %>"," */",""].join("\n")},watch:{src:{files:["modules/**/*.js","!modules/**/test/*Spec.js","demo/**/*.js"],tasks:["jshint:src","karma:unit:run","dist:main","dist:demo","build:gh-pages"]},test:{files:["modules/**/test/*Spec.js"],tasks:["jshint:test","karma:unit:run"]},demo:{files:["modules/**/demo/*"],tasks:["jshint:src","dist:demo","build:gh-pages"]},livereload:{files:["out/built/gh-pages/**/*"],options:{livereload:!0}}},connect:{options:{base:"out/built/gh-pages",open:!0,livereload:!0},server:{options:{keepalive:!0}},continuous:{options:{keepalive:!1}}},karma:{unit:i("test/karma.conf.js"),server:{configFile:"test/karma.conf.js"},continuous:{configFile:"test/karma.conf.js",background:!0}},concat:{html_doc:{options:{banner:['<!-- Le content - v<%= pkg.version %> - <%= grunt.template.today("yyyy-mm-dd") %>',"================================================== -->",'<div id="utils" ng-app="doc.ui-utils">',""].join("\n  "),footer:"</div>"},src:["modules/**/demo/index.html"],dest:"demo/demos.html"},tmp:{files:{"tmp/dep.js":["modules/**/*.js","!modules/utils.js","!modules/ie-shiv/*.js","!modules/**/test/*.js"]}},modules:{options:{banner:"<%= meta.banner %>"},files:{"dist/main/ui-utils.js":["tmp/dep.js","modules/utils.js"],"dist/main/ui-utils-ieshiv.js":["modules/ie-shiv/*.js"]}}},uglify:{options:{banner:"<%= meta.banner %>"},main:{files:{"dist/main/ui-utils.min.js":["dist/main/ui-utils.js"],"dist/main/ui-utils-ieshiv.min.js":["dist/main/ui-utils-ieshiv.js"]}},sub:{expand:!0,cwd:"dist/sub/",src:["**/*.js"],ext:".min.js",dest:"dist/sub/"}},clean:{rm_tmp:{src:["tmp"]}},jshint:{src:{files:{src:["modules/**/*.js","!modules/**/test/*Spec.js","demo/**/*.js"]},options:{jshintrc:".jshintrc"}},test:{files:{src:["modules/**/test/*Spec.js","gruntFile.js"]},options:e.util._.extend({},e.file.readJSON(".jshintrc"),{node:!0,globals:{angular:!1,inject:!1,jQuery:!1,jasmine:!1,afterEach:!1,beforeEach:!1,ddescribe:!1,describe:!1,expect:!1,iit:!1,it:!1,spyOn:!1,xdescribe:!1,xit:!1}})}},copy:{main:{files:[{src:["modules/include/demo/fragments.html"],dest:"demo/fragments.html",filter:"isFile"}]}},ngmin:n.reduce(r,{}),changelog:{options:{dest:"CHANGELOG.md"}}})};