describe("uiRoute",function(){function r(t){n.path(t),e.$broadcast("$routeChangeSuccess"),e.$apply()}function i(t){n.path(t),e.$broadcast("$stateChangeSuccess"),e.$apply()}function s(n){function u(r){return o=angular.element(r),n&&o.attr("ng-model",n),t(o[0])(e)}var s=n||"$uiRoute",o=angular.noop;describe("with uiRoute defined",function(){it("should use the uiRoute property",function(){u('<div ui-route="/foo">')}),it("should update model on $observe",function(){r("/bar"),e.$apply('foobar = "foo"'),u('<div ui-route="/{{foobar}}">'),expect(o.scope()[s]).toBeFalsy(),e.$apply('foobar = "bar"'),expect(o.scope()[s]).toBe(!0),e.$apply('foobar = "foo"'),expect(o.scope()[s]).toBe(!1)}),it("should support regular expression",function(){r("/foo/123"),u('<div ui-route="/foo/[0-9]*">'),expect(o.scope()[s]).toBe(!0)})}),describe("with ngHref defined",function(){it("should use the ngHref property",function(){r("/foo"),u('<a ng-href="/foo" ui-route>'),expect(o.scope()[s]).toBe(!0)}),it("should update model on $observe",function(){r("/bar"),e.$apply('foobar = "foo"'),u('<a ng-href="/{{foobar}}" ui-route>'),expect(o.scope()[s]).toBeFalsy(),e.$apply('foobar = "bar"'),expect(o.scope()[s]).toBe(!0),e.$apply('foobar = "foo"'),expect(o.scope()[s]).toBe(!1)})}),describe("with href defined",function(){it("should use the href property",function(){r("/foo"),u('<a href="/foo" ui-route>'),expect(o.scope()[s]).toBe(!0)})}),it("should throw an error if no route property available",function(){expect(function(){u("<div ui-route>")}).toThrow()}),it("should update model on route change",function(){r("/bar"),u('<div ui-route="/foo">'),expect(o.scope()[s]).toBeFalsy(),r("/foo"),expect(o.scope()[s]).toBe(!0),r("/bar"),expect(o.scope()[s]).toBe(!1)}),it("should update model on state change",function(){i("/bar"),u('<div ui-route="/foo">'),expect(o.scope()[s]).toBeFalsy(),i("/foo"),expect(o.scope()[s]).toBe(!0),i("/bar"),expect(o.scope()[s]).toBe(!1)})}var e,t,n;beforeEach(module("ui.route")),beforeEach(inject(function(r,i,s){e=r.$new(),t=i,n=s})),describe("model is null",function(){s()}),describe("model is set",function(){s("pizza")})});