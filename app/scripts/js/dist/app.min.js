/*!
 * WebPaige v2.0.2 (snapshot)
 * Ask Community Systems
 * Authors: Cengiz Ulusoy
 * 16-04-2014 09:04
 */
"use strict";var ui={en:{meta:{name:"en",label:"English"},login:{setting_up_app:"Setting up the application...",header:"Please sign in",placeholder_username:"Please enter your username",placeholder_password:"Your password",label_rememberMe:"Remember Me",button_login:"Login",button_loggingIn:"Logging...",forgot_password:"forgot your password?",forgetPassword:"Forgot password",emailAddress:"Email address",resetPassword:"Reset Password",returnLogin:"return back to login",changePassword:"change password",downloadApp:"Download Mobile App",ph_username:"username",ph_newPass:"new  password",ph_retypePass:"retype password",alert_fillfiled:"Please fill all fields!",alert_wrongUserPass:"Wrong username or password!",loading_User:"Loading user information...",loading_Message:"Loading messages...",loading_Group:"Loading groups...",loading_Members:"Loading members...",loading_everything:"Everything loaded!",logout:"Logout",loading:"Loading..",setting:"Setting..",passwordChanged:"Password changed!",button_changePassword:"Change password",button_changingPassword:"Changing password..",checkYourMail:"Please check your email to reset your password!",help:{content:["To login and use the availability management system of ASK, you should have valid login credentials. If you do not have these login details just yet, please contact your team leader for more information.","After filling in your login credentials you may use the 'Remember me' function. When checked, you'll be automatically logged in on every next visit.",'If you forgot your password, you may use the "Forgot password" page to request a new password. The new password will be sent to your own email address.',"By pressing English or Dutch you can change the used language."],cta:"Return to login screen"}},dashboard:{dashboard:"Dashboard",groupOverviews:"Loading and analyzing group overviews...",thisWeek:"This week",nextWeek:"Next week",welcome:"Welcome",newMessage:"New Messages",goToInbox:"Go to inbox",announcements:"Announcements",loadingPie:"Loading pie charts...",loadingP2000:"Loading alarm messages",noP2000:"There are no alarm messages",widgetSave:"Save",widgetCancel:"Cancel",currentState:"Current state",overview:"Overview",statMore:"more",statEven:"enough",statLess:"less",periods:"Periods",refreshGroupOverviews:"Refreshing group overviews..",showMore:"meer tonen",showLess:"minder tonen",gettingAlarms:"Getting P2000 alarm messages"},planboard:{planboard:"Agenda",newAvail:"New Availability",day:"Day",week:"Week",month:"Month",updateAvail:"Update Availability",from:"From",till:"Till",state:"State",selectAState:"select a state",reoccuring:"Re-occuring",lessPeople:"There $v less people than needed!",samePeople:"There are just as many peopleas needed.",morePeople:"There are $v more people than needed!",wished:"Wished",combine_reoccuring:"This is a combined row of planning with re-occuring rows.",sendMsgToMember:"Send Message To Members",add:"Add",del:"Delete",change:"Change",setWish:"Set Wish",timeline:"Timeline",statistics:"Statistics",barCharts:"Bar charts",wishes:"Wishes",legenda:"Legenda",group:"Group",groups:"Groups",members:"Members",bothAvailable:"Both available",northAavailable:"available North",southAvailable:"available South",skipperOutService:"Skipper Of Service",notAvailable:"Not Available",notachieve:"Not Achieved",legendaLabels:{morePeople:"More people",enoughPeople:"Just enough people",lessPeople:"Less people"},lastSyncTime:"Last sync time:",dataRangeStart:"Data range start: ",DataRangeEnd:"Data range end: ",loadingTimeline:"Loading timeline...",addTimeSlot:"Adding a timeslot...",slotAdded:"New timeslot added successfully.",changingSlot:"Changing a timeslot...",slotChanged:"Timeslot changed successfully.",changingWish:"Changing wish value...",wishChanged:"Wish value changed successfully.",deletingTimeslot:"Deleting a timeslot...",timeslotDeleted:"Timeslot deleted successfully.",refreshTimeline:"Refreshing timeline...",preCompilingStortageMessage:"Pre-compiling shortage message",weeklyPlanning:"Weekly planning",planning:"Planning",minNumber:"Minimum number benodigden",statDays:"days",statHours:"hours",statMinutes:"minutes",statPeopleLess:"Less people than expected",statPeopleEven:"Just enough people as expected",statPeopleMore:"More people than expected",getWishes:"Getting minimum required value...",daterangerToday:"Today",daterangerTomorrow:"Tomorrow",daterangerYesterday:"Yesterday",daterangerNext3Days:"Next 3 days",daterangerNext7Days:"Next 7 days",rangeInfoTotalSelectedDays:"Total selected days: ",rangeInfoTime:"Time: ",rangeInfoWeekNumber:"Week number: ",rangeInfoMonth:"Month: ",rangeInfoTotalDays:", Total days: "},message:{messages:"Messages",composeAMessage:"Compose a message",compose:"Compose",inbox:"Inbox",outbox:"Outbox",trash:"Trash",composeMessage:"Compose message",close:"Close",broadcast:"Broadcast",sms:"SMS",email:"Email",receviers:"Recevier(s)",subject:"Subject",message:"Message",sendMessage:"Send Message",sender:"Sender",date:"Date",questionText:"Message",reply:"Reply",del:"Delete",noMessage:"There are no messages.",from:"From",newMsg:"New",deleteSelected:"Delete Selected Messages",someMessage:"There are $v message(s)",emptyTrash:"Empty Trash",noMsgInTrash:"There are no messages in trash.",box:"Box",persons:"Person(s)",restoreSelected:"Restore Selected Messages",loadingMessage:"Loading message...",escalation:"Escalation message",escalationBody:function(a,b,c,d,e){return"We have "+a+" shortage in between "+b+" "+c+" and "+d+" "+e+". Would you please make yourself available if you are available for that period?"},removed:"Message removed successfully.",removing:"Removing the message...",refreshing:"Refreshing messages...",removingSelected:"Removing selected messages...",restoring:"Restoring the message back...",restored:"Message restored successfully.",restoringSelected:"Restoring selected messages...",emptying:"Emptying trash...",emptied:"Trash bin emptied successfully.",sending:"Sending the message...",sent:"Message sent.",typeSubject:"Type a subject",ph_filterMessage:"Filter messages..",noReceivers:"Please select a receiver.",days:{monday:"monday",tuesday:"tuesday",wednesday:"wednesday",thursday:"thursday",friday:"friday",saturday:"saturday",sunday:"sunday"},repeat:"Repeat",repeatOn:"On",repeatOff:"Off",enabled:"Enabled",disabled:"Disabled",repeatNew:"New repeat",notificationLabel:"Notification label",notifications:"Notifications",notificationsEmpty:"There are currently no notifications.Er zijn (nog) geen herhalingen.",notificationStatus:"Notification status",notificationSave:"Save",notificationHeaderLabel:"Label",notificationHeaderReceivers:"Receivers",notificationHeaderFrequency:"Frequency",paginationPage:"Page",paginationOf:"of",paginationInTotal:"in total",paginationPrevious:"Previous",paginationNext:"Next",filterMessages:"Filter messages...",inTotal:"In total:",loadingNotifications:"Getting notifications...",receiversUsers:"Users",receiversGroups:"Groups",notificationsRefresh:"Refreshing scheduled notifications...",notificationsAdd:"Adding a new scheduled notification...",notificationSaved:"Scheduled notification is successfully saved.",notificationsEditing:"Editing scheduled notification...",notificationsEdited:"Scheduled notification is successfully edited.",notificationsDeleting:"Deleting a scheduled notification...",notificationsDeleted:"Scheduled notification is successfully deleted."},groups:{groups:"Groups",newGroup:"New Group",newMember:"New Member",search:"Search",addNewGroup:"Add New Group",editGroup:"Edit Group",searchResults:"Search results",group:"Group",close:"Close",name:"Name",firstName:"First Name",lastName:"Last Name",saveGroup:"Save Group",registerMember:"Register Member",role:"Role",selectRole:"Select a role",selectGroup:"Choose a group",email:"Email",phone:"Phone",address:"Address",postCode:"Postcode",tel:"Tel",city:"City",userName:"Username",password:"Password",saveMember:"Save Member",searchedFor:"Search results for ",sorryCanNotFind:"Sorry but we couldn't find what you are looking for.",addToGroup:"Add to group",addMemberToGroup:"Add Selected Members To Groups",resultCount:"There are $v results in your query.",deleteGroup:"Delete Group",noMembers:"There are no members.",removeSelectedMembers:"Remove Selected Members",memberCount:"There are $v member(s)",searchingMembers:"Searching members..",addingNewMember:"Adding a new member..",memberAdded:"Member added to group successfully.",refreshingGroupMember:"Refreshing groups and members list..",removingMember:"Removing member from group..",memberRemoved:"Member(s) removed from group successfully.",removingSelected:"Removing selected members..",saving:"Saving group..",groupSaved:"Group saved successfully.",registerNew:"Registering a new member..",memberRegstered:"Member registered successfully.",deleting:"Deleting group..",deleted:"Group deleted successfully.",filterMembers:"Filter members..",searchFor:"firstname, lastname..",widgetSave:"Save",widgetCancel:"Cancel",requiredPeople:"Required"},profile:{profile:"Profile",edit:"Edit",password:"Password",timeline:"Timeline",profileView:"Profile View",userGroups:"User Groups",role:"Role",email:"Email",phone:"Phone",address:"Address",postcode:"Postcode",city:"City",editProfile:"Edit Profile",name:"Name",saveProfile:"Save Profile",passChange:"Password Change",currentPass:"Current password",newPass:"New password",newPassRepeat:"New password (Repeat)",changePass:"Change password",newAvail:"New Availability",refreshing:"Refreshing profile information..",dataChanged:"Profile data is succesfully changed.",pleaseFill:"Please fill all fields!",passNotMatch:"Provided passwords do not match! Please try it again.",changingPass:"Changing password..",passChanged:"Password is succesfully changed.",passwrong:"Given current password is wrong! Please try it again.",newTimeslotAdded:"New timeslot added successfully.",changingTimeslot:"Changing a timeslot..",timeslotChanged:"Timeslot is succesfully changed.",passwordChangeWarning:"Warning! with this option you will change password this user."},settings:{settings:"Settings",user:"User",application:"Application",userSettings:"User Settings",appSettings:"Application Settings",saveSettings:"Save Settings",langSetting:"Language",saving:"Saving settings...",refreshing:"Refreshing settings...",saved:"Settings successfully saved."},help:{help:"Help",header:"Help & Support",support:"Support"},downloads:{app:"Soon it will be downloadable.<br>",manual:"Download Manual"},loading:{general:"Loading",dashboard:"dashboard",planboard:"agenda",messages:"messages",groups:"groups",profile:"profile",settings:"settings",loggingOut:"Logging out..."},errors:{dashboard:{getOverviews:"Error with getting group overviews!"},groups:{query:"Error with getting groups and users!",saveWish:"Error with changing wish value!",searchMembers:"Error with searching members!",addMember:"Error with adding a member to a group!",removeMember:"Error with removing a member from a group!",removeMembers:"Error with removing members from a group!",groupSubmit:"Error with saving group!",memberSubmitRegistered:"Username is already registered!",memberSubmitRegister:"Error with registering a member!",deleteGroup:"Error with deleting a group!"},login:{changePass:"Something wrong with password changing!",forgotCantFind:"Error this account does not exist!",changePassAllFields:"Please fill all fields!",changePassNoMatch:"Error, passwords do not match!"},settings:{save:"Error with saving settings!"},profile:{save:"Error with saving profile information!",get:"Error with getting profile data!",changePassword:"Error with changing password!"},messages:{query:"Error with getting messages!",changeState:"Error with changing message state!",removeMessage:"Error with removing message!",removeMessages:"Error with removing messages!",restoreMessage:"Error with restoring message!",restoreMessages:"Error with restoring message!",emptyTrash:"Error with empting trash!",send:"Error with sending message!",notificationsList:"Error with getting scheduled notifictions!",notificationsGet:"Error with getting scheduled notification!",notificationsAdd:"Error with creating scheduled notification!",notificationsEdit:"Error with editing scheduled notification!",notificationsDelete:"Error with deleting scheduled notification!"},timeline:{query:"There has been some problems with syncing planboard information. Please refresh your browser for getting the latest planboard information.",pastAdding:"Invoer van tijden in het verleden is niet toegestaan!",add:"Error with adding a new timeslot!",change:"Error with changing timeslot!",pastChanging:"Veranderen van tijden in het verleden is niet toegestaan!",pastDeleting:"Verwijderen van tijden in het verleden is niet toegestaan!",remove:"Error with removing timeslot!",wisher:"Error with changing wish value!"}},confirms:{remove:"Are you sure you want to delete it? You can not undo this action."}},nl:{meta:{name:"nl",label:"Nederlands"},login:{setting_up_app:"Applicatie laden...",header:"Inloggen",placeholder_username:"Vul uw gebruikersnaam in",placeholder_password:"Vul uw wachtwoord in",label_rememberMe:"Onthoud mij",button_login:"Login",button_loggingIn:"Inloggen...",forgot_password:"Wachtwoord vergeten?",forgetPassword:"Wachtwoord vergeten",emailAddress:"Email adres",resetPassword:"Wachtwoord opnieuw instellen",returnLogin:"Terugkeren om in te loggen",changePassword:"Wachtwoord wijzigen",downloadApp:"Download Mobiele App",ph_username:"gebruikersnaam",ph_newPass:"nieuw wachtwoord",ph_retypePass:"Typ wachtwoord",alert_fillfiled:"Vul alle velden in!",alert_wrongUserPass:"Onjuiste gebruikersnaam of wachtwoord!",loading_User:"Gebruikersinformatie laden...",loading_Message:"Berichten laden...",loading_Group:"Groepen laden...",loading_Members:"Leden laden...",loading_everything:"Alles is geladen!",logout:"Uitloggen",loading:"Aan het laden..",setting:"Aan het toepassen..",passwordChanged:"Wachtwoord gewijzigd!",button_changePassword:"Wachtwoord wijzigen",button_changingPassword:"Wachtwoord aan het wijzigen..",checkYourMail:"Controleer uw mailbox voor de instructies!",help:{content:["Om in te loggen en gebruik te maken van het paraatheidssysteem van ASK, dient u te beschikken over een juiste login. Heeft u nog geen login, neem dan contact op met uw teamleider voor meer informatie.","Na het invullen van uw login gegevens kunt u gebruik maken van de “onthoud mij” optie. Wanneer u deze optie aanvinkt, wordt u automatisch ingelogd, elke volgende keer dat u site bezoekt.","Bent u uw wachtwoord vergeten, dan kunt u door middel van de “wachtwoord vergeten” link een nieuw wachtwoord aanvragen en laten versturen naar uw eigen email adres.","Door op English of Nederlands te klikken kunt u de taal instellen."],cta:"Terug naar inloggen"}},dashboard:{dashboard:"Dashboard",groupOverviews:"Laden en analyseren groepsoverzichten...",thisWeek:"Deze week",nextWeek:"Volgende week",welcome:"Welkom",newMessage:"Nieuwe berichten",goToInbox:"Ga naar inbox",loadingPie:"Cirkeldiagrammen laden...",announcements:"Alarm berichten",loadingP2000:"Alarm berichten laden...",noP2000:"Er zijn geen alarm berichten.",widgetSave:"Opslaan",widgetCancel:"Annuleren",currentState:"Huidige status",overview:"Overzicht",statMore:"meer",statEven:"genoeg",statLess:"minder",periods:"Perioden",refreshGroupOverviews:"Groep overzichten laden...",showMore:"show more",showLess:"show less",gettingAlarms:"P2000 alarm berichten aan het ophalen..."},planboard:{planboard:"Agenda",newAvail:"Nieuwe beschikbaarheid",day:"Dag",week:"Week",month:"Maand",updateAvail:"Update beschikbaarheid",from:"Van",till:"Tot",state:"Status",selectAState:"selecteer een status",reoccuring:"Herhaling",lessPeople:"Er is een tekort van $v mens(en)!",samePeople:"Er zijn precies genoeg mensen.",morePeople:"Er is een overschot van $v mens(en)!",wished:"Gewenst",combine_reoccuring:"Dit is een gecombineerde planning.",sendMsgToMember:"Stuur bericht naar leden",add:"Toevoegen",del:"Verwijderen",change:"Wijzigen",setWish:"Behoefte instellen",timeline:"Tijdlijn",statistics:"Statistieken",barCharts:"Staafdiagrammen",wishes:"Behoefte",legenda:"Legenda",group:"Groep",groups:"Groepen",members:"Leden",bothAvailable:"Beiden beschikbaar",northAavailable:"Beschikbaar Noord",southAvailable:"Beschikbaar Zuid",skipperOutService:"Schipper van dienst",notAvailable:"Niet beschikbaar",notachieve:"Niet behaald",legendaLabels:{morePeople:"Meer mensen",enoughPeople:"Precies genoeg mensen",lessPeople:"Te weinig mensen"},lastSyncTime:"Laatste synchronisatietijd:",dataRangeStart:"Begin gegevensscala: ",DataRangeEnd:"Eind gegevensscala: ",loadingTimeline:"Tijdlijn laden...",addTimeSlot:"Tijdslot toevoegen...",slotAdded:"Tijdslot succesvol toegevoegd.",changingSlot:"Tijdslot wijzigen...",slotChanged:"Tijdslot succesvol gewijzigd.",changingWish:"Behoefte veranderen...",wishChanged:"Behoefte succesvol veranderd.",deletingTimeslot:"Tijdslot verwijderen...",timeslotDeleted:"Tijdslot succesvol verwijderd.",refreshTimeline:"Tijdlijn vernieuwen...",preCompilingStortageMessage:"Opstellen tekortbericht",weeklyPlanning:"Wekelijkse planning",planning:"Planning",minNumber:"Minimum aantal benodigde mensen",statDays:"dagen",statHours:"uren",statMinutes:"minuten",statPeopleLess:"Te weinig mensen",statPeopleEven:"Precies genoeg mensen",statPeopleMore:"Meer mensen",getWishes:"Groep behoefte getal aan het ophalen...",daterangerToday:"Vandaag",daterangerTomorrow:"Morgen",daterangerYesterday:"Gisteren",daterangerNext3Days:"Komende 3 dagen",daterangerNext7Days:"Komende 7 dagen",rangeInfoTotalSelectedDays:"Totaal aantal geselecteerde dagen: ",rangeInfoTime:"Tijd: ",rangeInfoWeekNumber:"Weeknummer: ",rangeInfoMonth:"Maand: ",rangeInfoTotalDays:", Totaal aantal dagen: "},message:{messages:"Berichten",composeAMessage:"Bericht opstellen",compose:"Opstellen",inbox:"Inbox",outbox:"Outbox",trash:"Prullenbak",composeMessage:"Bericht opstellen",close:"Sluiten",broadcast:"Extra medium",sms:"SMS",email:"Email",receviers:"Ontvanger(s)",subject:"Onderwerp",message:"Bericht",sendMessage:"Bericht versturen",sender:"Zender",date:"Datum",questionText:"Bericht",reply:"Antwoorden",del:"Verwijderen",noMessage:"Er zijn geen berichten.",from:"Van",newMsg:"Nieuw",deleteSelected:"Verwijder geselecteerde berichten",someMessage:"Er zijn $v berichten",emptyTrash:"Prullenbak legen",noMsgInTrash:"Er zijn geen berichten.",box:"Box",persons:"Personen",restoreSelected:"Geselecteerde berichten terugplaatsen",loadingMessage:"Bericht laden...",escalation:"Escalatiebericht",escalationBody:function(a,b,c,d,e){return"Er is een tekort van "+a+" mensen tussen "+b+" "+c+" en "+d+" "+e+". Zet uzelf a.u.b. op beschikbaar indien u beschikbaar bent voor die periode"},removed:"Bericht succesvol verwijderd.",removing:"Bericht verwijderen...",refreshing:"Bericht vernieuwen...",removingSelected:"Geselecteerde berichten verwijderen...",restoring:"Bericht terugplaatsen...",restored:"Bericht succesvol teruggeplaatst.",restoringSelected:"Geselecteerde berichten terugplaatsen...",emptying:"Prullenbak leegmaken...",emptied:"Prullenbak succesvol geleegd.",sending:"Bericht versturen...",sent:"Bericht verstuurd.",typeSubject:"Vul een onderwerp in",ph_filterMessage:"Berichten filteren...",noReceivers:"Graag een ontvanger selecteren.",days:{monday:"maandag",tuesday:"dinsdag",wednesday:"woensdag",thursday:"donderdag",friday:"vrijdag",saturday:"zaterdag",sunday:"zondag"},repeat:"Herhaling",repeatOn:"Aan",repeatOff:"Uit",enabled:"Ingeschakeld",disabled:"Uitgeschakeld",repeatNew:"Nieuwe herhaling",notificationLabel:"Notificatie label",notifications:"Herinneringen",notificationsEmpty:"Er zijn (nog) geen herhalingen.",notificationStatus:"Notificatie status",notificationSave:"Opslaan",notificationHeaderLabel:"Label",notificationHeaderReceivers:"Ontvangers",notificationHeaderFrequency:"Frequentie",paginationPage:"Pagina",paginationOf:"van",paginationInTotal:"in totaal",paginationPrevious:"Vorige",paginationNext:"Volgende",filterMessages:"Berichten filteren...",inTotal:"In totaal:",loadingNotifications:"Notificaties aan het laden...",receiversUsers:"Gebruikers",receiversGroups:"Groepen",notificationsRefresh:"Notificaties aan het laden...",notificationsAdd:"Notificatie aan het toevoegen...",notificationSaved:"Notificatie is met success opgeslagen.",notificationsEditing:"Notificatie wordt gewijzigd...",notificationsEdited:"Notificatie is met succes gewijzigd.",notificationsDeleting:"Notificatie wordt verwijderd...",notificationsDeleted:"Notificatie is met succes verwijderd."},groups:{groups:"Groepen",newGroup:"Nieuwe groep",newMember:"Nieuw lid",search:"Zoeken",addNewGroup:"Nieuwe groep toevoegen",editGroup:"Groep wijzigen",searchResults:"Zoekresultaten",group:"Groep",close:"Sluiten",name:"Naam",firstName:"Voornaam",lastName:"Achternaam",saveGroup:"Groep opslaan",registerMember:"Lid registreren",role:"Functie",selectRole:"Selecteer een functie",email:"Email",phone:"Telefoon",address:"Adres",postCode:"Postcode",tel:"Tel",city:"Stad",userName:"Gebruikersnaam",password:"Wachtwoord",saveMember:"Lid opslaan",searchedFor:"Zoekresultaten voor ",sorryCanNotFind:"Sorry, geen resultaten.",addToGroup:"Aan groep toevoegen",addMemberToGroup:"Voeg geselecteerde leden aan groep toe",resultCount:"Er zijn $v resultaten.",deleteGroup:"Groep verwijderen",noMembers:"Er zijn geen leden.",removeSelectedMembers:"Geselecteerde leden verwijderen",memberCount:"Er zijn $v leden",searchingMembers:"Leden zoeken...",addingNewMember:"Nieuw lid toevoegen...",memberAdded:"Lid succesvol aan groep toegevoegd.",refreshingGroupMember:"Groepen- en ledenlijst vernieuwen...",removingMember:"Lid van groep verwijderen...",memberRemoved:"Lid/leden succesvol van groep verwijderd.",removingSelected:"Geselecteerde leden verwijderen...",saving:"Groep opslaan...",groupSaved:"Groep succesvol opgeslagen.",registerNew:"Nieuw lid registreren...",memberRegstered:"Lid succesvol geregistreerd.",deleting:"Groep verwijderen...",deleted:"Groep succesvol verwijderd.",filterMembers:"Leden filteren...",searchFor:"voornaam, achternaam..",widgetSave:"Opslaan",widgetCancel:"Annuleren",requiredPeople:"Behoefte"},profile:{profile:"Profiel",edit:"Wijzigen",password:"Wachtwoord",timeline:"Tijdlijn",profileView:"Profiel weergave",userGroups:"Gebruikersgroepen",role:"Functie",email:"Email",phone:"Telefoon",address:"Adres",postcode:"Postcode",city:"Stad",editProfile:"Profiel wijzigen",name:"Naam",saveProfile:"Profiel opslaan",passChange:"Wachtwoord wijzigen",currentPass:"Huidig wachtwoord",newPass:"Nieuw wachtwoord",newPassRepeat:"Herhaal nieuw wachtwoord",changePass:"Wachtwoord wijzigen",newAvail:"Nieuwe beschikbaarheid",refreshing:"Profielinformatie vernieuwen...",dataChanged:"Profielgegevens succesvol gewijzigd.",pleaseFill:"Vul a.u.b. alle velden in!",passNotMatch:"Ingevoerd wachtwoord komt niet overeen. Probeer het opnieuw.",changingPass:"Wachtwoord wijzigen...",passChanged:"Wachtwoord succesvol gewijzigd.",passwrong:"Ingevoerd wachtwoord is foutief! Probeer het opnieuw.",newTimeslotAdded:"Nieuw tijdslot succesvol toegevoegd.",changingTimeslot:"Tijdslot wijzigen...",timeslotChanged:"Tijdslot succesvol gewijzigd.",passwordChangeWarning:"Let op! Hiermee wijzigt u het wachtwoord van deze persoon."},settings:{settings:"Instellingen",user:"Gebruiker",application:"Applicatie",userSettings:"Gebruikersinstellingen",appSettings:"Applicatie-instellingen",saveSettings:"Instellingen Opslaan",langSetting:"Taal",saving:"Instellingen wijzigen...",refreshing:"Instellingen vernieuwen...",saved:"Instellingen succesvol gewijzigd."},help:{help:"Hulp",header:"Hulp & Ondersteuning",support:"Ondersteuning"},downloads:{app:"Binnenkort te downloaden.",manual:"Download Handleiding"},loading:{general:"Laden",dashboard:"dashboard",planboard:"agenda",messages:"berichten",groups:"groepen",profile:"profiel",settings:"instellingen",loggingOut:"Aan het uitloggen..."},errors:{dashboard:{getOverviews:"Fout bij het ophalen van groep overzichten!"},groups:{query:"Fout bij het ophalen van groepen en gebruikers!",saveWish:"Fout bij het veranderen van de behoefte!",searchMembers:"Fout bij het zoeken van leden!",addMember:"Fout bij het toevoegen van een lid aan een groep!",removeMember:"Fout bij het verwijderen van een lid uit een groep!",removeMembers:"Fout bij het verwijderen van leden uit een groep!",groupSubmit:"Fout bij het opslaan van de groep!",memberSubmitRegistered:"Gebruikersnaam bestaat al!",memberSubmitRegister:"Fout bij het registreren van een gebruiker!",deleteGroup:"Fout bij het verwijderen van een groep!"},login:{changePass:"Er ging iets mis met het wijzigen van het wachtwoord!",forgotCantFind:"Fout, deze account bestaat niet!",changePassAllFields:"Vul alstublieft alle velden in!",changePassNoMatch:"Fout, de wachtwoorden komen niet overeen!"},settings:{save:"Fout bij het opslaan van de instellingen!"},profile:{save:"Fout bij het opslaan van het profiel!",get:"Fout bij het ophalen van het profiel!",changePassword:"Fout bij het wijzigen van het wachtwoord!"},messages:{query:"Fout bij het ophalen van berichten!",changeState:"Fout bij het wijzigen van bericht status!",removeMessage:"Fout bij het verwijderen van het bericht!",removeMessages:"Fout bij het verwijderen van de berichten!",restoreMessage:"Fout bij het terugzetten van het bericht!",restoreMessages:"Fout bij het terugzetten van de berichten!",emptyTrash:"Fout bij het leegmaken van de prullenbak!",send:"Fout bij het verzenden van bericht!",notificationsList:"Fout bij het ophalen van de geplande notificaties!",notificationsGet:"Fout bij het ophalen van een geplande notificatie!",notificationsAdd:"Fout bij het aanmaken van een geplande notificatie!"},timeline:{query:"Er is iets fout gegaan bij het laden van de tijdlijndata. Vernieuw deze webpagina om het nogmaals te proberen.",pastAdding:"Invoer van tijden in het verleden is niet toegestaan!",add:"Error with adding a new timeslot!",change:"Error with changing timeslot!",pastChanging:"Veranderen van tijden in het verleden is niet toegestaan!",pastDeleting:"Verwijderen van tijden in het verleden is niet toegestaan!",remove:"Error with removing timeslot!",wisher:"Error with changing wish value!"}},confirms:{remove:"Weet u zeker dat u dit wilt verwijderen? U kunt dit niet ongedaan maken."}}};localStorage.removeItem("WebPaige.periods"),localStorage.removeItem("WebPaige.periodsNext"),angular.module("WebPaige",["ngResource","WebPaige.Modals.User","WebPaige.Modals.Dashboard","WebPaige.Modals.Slots","WebPaige.Modals.Messages","WebPaige.Modals.Groups","WebPaige.Modals.Profile","WebPaige.Modals.Settings","WebPaige.Controllers.Login","WebPaige.Controllers.Logout","WebPaige.Controllers.Dashboard","WebPaige.Controllers.TV","WebPaige.Controllers.Planboard","WebPaige.Controllers.Timeline","WebPaige.Controllers.Timeline.Navigation","WebPaige.Controllers.Messages","WebPaige.Controllers.Scheaduler","WebPaige.Controllers.Groups","WebPaige.Controllers.Profile","WebPaige.Controllers.Settings","WebPaige.Controllers.Help","WebPaige.Services.Timer","WebPaige.Services.Session","WebPaige.Services.Dater","WebPaige.Services.EventBus","WebPaige.Services.Interceptor","WebPaige.Services.MD5","WebPaige.Services.Storage","WebPaige.Services.Strings","WebPaige.Services.Announcer","WebPaige.Services.Sloter","WebPaige.Services.Stats","WebPaige.Services.Offsetter","WebPaige.Directives","$strap.directives","WebPaige.Filters"]),"localStorage"in window&&null!==window.localStorage&&basket.require({url:"libs/chosen/chosen.jquery.min.js"},{url:"libs/bootstrap-datepicker/bootstrap-datepicker.min.js"},{url:"libs/bootstrap-timepicker/bootstrap-timepicker.min.js"},{url:"libs/daterangepicker/1.1.0/daterangepicker.min.js"},{url:"libs/sugar/1.3.7/sugar.min.js"},{url:"libs/raphael/2.1.0/raphael-min.js"}).then(function(){basket.require({url:"libs/g-raphael/0.5.1/g.raphael-min.js"},{url:"libs/g-raphael/0.5.1/g.pie-min.js"}).then(function(){})}),angular.module("WebPaige").value("$config",{title:"WebPaige",version:"2.3.12",lang:"nl",fullscreen:!0,demo_users:!1,smartAlarm:profile.smartAlarm,profile:{meta:profile.meta,title:profile.title,logos:{login:"profiles/"+profile.meta+"/img/login_logo.png",app:""},background:"profiles/"+profile.meta+"/img/login_bg.jpg",p2000:profile.p2000,mobileApp:profile.mobileApp,smartAlarm:profile.smartAlarm},statesall:{"com.ask-cs.State.Available":{className:"state-available",label:"Beschikbaar",color:"#4f824f",type:"Beschikbaar",display:!0},"com.ask-cs.State.KNRM.BeschikbaarNoord":{className:"state-available-north",label:"Beschikbaar voor Noord",color:"#000",type:"Beschikbaar",display:!0},"com.ask-cs.State.KNRM.BeschikbaarZuid":{className:"state-available-south",label:"Beschikbaar voor Zuid",color:"#e08a0c",type:"Beschikbaar",display:!0},"com.ask-cs.State.Unavailable":{className:"state-unavailable",label:"Niet Beschikbaar",color:"#a93232",type:"Niet Beschikbaar",display:!0},"com.ask-cs.State.KNRM.SchipperVanDienst":{className:"state-schipper-service",label:"Schipper van Dienst",color:"#e0c100",type:"Beschikbaar",display:!0},"com.ask-cs.State.Unreached":{className:"state-unreached",label:"Niet Bereikt",color:"#65619b",type:"Niet Beschikbaar",display:!1}},host:profile.host(),formats:{date:"dd-MM-yyyy",time:"HH:mm",datetime:"dd-MM-yyyy HH:mm",datetimefull:"dd-MM-yyyy HH:mm:ss"},roles:profile.roles,timeline:{options:{axisOnTop:!0,width:"100%",height:"auto",selectable:!0,editable:!0,style:"box",groupsWidth:"150px",eventMarginAxis:0,showCustomTime:!0,groupsChangeable:!1,showNavigation:!1,intervalMin:36e5},config:{zoom:"0.4",bar:!1,layouts:profile.timeline.config.layouts,wishes:!1,legenda:{},legendarer:!1,states:{},divisions:[],densities:{less:"#a0a0a0",even:"#ba6a24",one:"#415e6b",two:"#3d5865",three:"#344c58",four:"#2f4550",five:"#2c424c",six:"#253943",more:"#486877"}}},pie:{colors:["#415e6b","#ba6a24","#a0a0a0"]},defaults:{settingsWebPaige:{user:{language:"nl"},app:{widgets:{groups:{}}}}},cookie:{expiry:30,path:"/"},init:function(){var a=this;angular.forEach(profile.states,function(b){a.timeline.config.states[b]=a.statesall[b]})}}),angular.module("WebPaige").config(["$locationProvider","$routeProvider","$httpProvider",function(a,b,c){b.when("/login",{templateUrl:"dist/views/login.html",controller:"login"}).when("/logout",{templateUrl:"dist/views/logout.html",controller:"logout"}).when("/dashboard",{templateUrl:"dist/views/dashboard.html",controller:"dashboard"}).when("/tv",{templateUrl:"dist/views/tv.html",controller:"tv",resolve:{data:["$route","$http",function(a,b){a.current.params.sessionID&&(b.defaults.headers.common["X-SESSION_ID"]=a.current.params.sessionID)}]}}).when("/planboard",{templateUrl:"dist/views/planboard.html",controller:"planboard",resolve:{data:["$route","Slots","Storage","Dater",function(a,b,c,d){var e=c.local.periods(),f=c.local.settings(),g={};return g=d.current.today()>360?{start:e.days[358].last.timeStamp,end:e.days[365].last.timeStamp}:{start:e.days[d.current.today()-1].last.timeStamp,end:e.days[d.current.today()+6].last.timeStamp},b.all({groupId:f.app.group,stamps:g,month:d.current.month(),layouts:{user:!0,group:!0,members:!1}})}]},reloadOnSearch:!1}).when("/messages",{templateUrl:"dist/views/messages.html",controller:"messages",resolve:{data:["$route","Messages",function(a,b){return b.query()}]},reloadOnSearch:!1}).when("/groups",{templateUrl:"dist/views/groups.html",controller:"groups",resolve:{data:["Groups",function(a){return a.query()}]},reloadOnSearch:!1}).when("/profile/:userId",{templateUrl:"dist/views/profile.html",controller:"profile",resolve:{data:["$rootScope","Profile","$route","$location",function(a,b,c){if(c.current.params.userId.toLowerCase()!=a.app.resources.uuid){var d=new Date((new Date).getFullYear(),0,1),e=angular.fromJson(localStorage.getItem("WebPaige.periods")),f=Math.ceil(((new Date-d)/864e5+d.getDay()+1)/7),g={start:e.weeks[f].first.timeStamp/1e3,end:e.weeks[f].last.timeStamp/1e3};return b.getWithSlots(c.current.params.userId.toLowerCase(),!1,g)}return b.get(c.current.params.userId.toLowerCase(),!1)
}]},reloadOnSearch:!1}).when("/profile",{templateUrl:"dist/views/profile.html",controller:"profile",resolve:{data:["$rootScope","$route","$location",function(a,b,c){b.current.params.userId&&c.hash()||c.path("/profile/"+a.app.resources.uuid).hash("profile")}]}}).when("/settings",{templateUrl:"dist/views/settings.html",controller:"settings",resolve:{data:["Settings",function(a){return angular.fromJson(a.get())}]}}).when("/help",{templateUrl:"dist/views/help.html",controller:"help"}).otherwise({redirectTo:"/login"}),c.responseInterceptors.push("Interceptor")}]),angular.module("WebPaige").run(["$rootScope","$location","$timeout","Session","Dater","Storage","Messages","$config","$window",function(a,b,c,d,e,f,g,h,i){a.config=h,a.config.init(),$("#notification").removeClass("ng-cloak"),a.browser=$.browser,angular.extend(a.browser,{screen:i.screen}),a.browser.ios?angular.extend(a.browser,{landscape:!(90!=Math.abs(i.orientation)),portrait:!(90==Math.abs(i.orientation))}):angular.extend(a.browser,{landscape:!(90==Math.abs(i.orientation)),portrait:!(90!=Math.abs(i.orientation))}),i.onresize=function(){a.browser.screen=i.screen},i.onorientationchange=function(){a.$apply(function(){a.browser.ios?angular.extend(a.browser,{landscape:!(90!=Math.abs(i.orientation)),portrait:!(90==Math.abs(i.orientation))}):angular.extend(a.browser,{landscape:!(90==Math.abs(i.orientation)),portrait:!(90!=Math.abs(i.orientation))})})},a.changeLanguage=function(b){a.ui=ui[b]},a.ui=ui[a.config.lang],f.get("periods")||e.registerPeriods(),a.app=a.app||{},a.app.resources=angular.fromJson(f.get("resources")),a.config.timeline.config.divisions=angular.fromJson(f.get("divisions")),angular.forEach(angular.fromJson(f.get("states")),function(b){a.config.timeline.config.states[b]=a.config.statesall[b]});var j=angular.fromJson(f.get("registeredNotifications"));j?a.registeredNotifications=j:f.add("registeredNotifications",angular.toJson({timeLineDragging:!0})),a.registerNotification=function(b,c){a.registeredNotifications[b]=c,f.add("registeredNotifications",angular.toJson(a.registeredNotifications))},a.app.unreadMessages||g.unreadCount(),a.app.guard=angular.fromJson(f.get("guard"))?angular.fromJson(f.get("guard")):{monitor:"",role:"",currentState:"",currentStateClass:""},a.statusBar={init:function(){a.loading={status:!1,message:"Aan het laden.."},a.app.preloader={status:!1,total:0,count:0}},display:function(b){a.app.preloader.status=!1,a.loading={status:!0,message:b}},off:function(){a.loading.status=!1}},a.statusBar.init(),a.notification={status:!1,type:"",message:""},a.notifier={init:function(b,c,d,e,f){a.notification.status=!0,a.browser.mobile&&1==b?i.alert(d):a.notification={status:b,type:c,message:d,confirm:e,options:f}},success:function(a,b){this.init(!0,"alert-success",a),b||this.destroy()},error:function(a,b){this.init(!0,"alert-danger",a),b||this.destroy()},alert:function(a,b,c,d){this.init(!0,"",a,c,d),b||this.destroy()},destroy:function(){setTimeout(function(){a.notification.status=!1},5e3)}},a.notifier.init(!1,"",""),a.fireDeleteRequest=function(b){switch(b.section){case"groups":a.$broadcast("fireGroupDelete",{id:b.id})}},a.$on("$routeChangeStart",function(){function c(){a.loaderIcons={general:!1,dashboard:!1,planboard:!1,messages:!1,groups:!1,profile:!1,settings:!1}}switch(c(),b.path()){case"/dashboard":a.loaderIcons.dashboard=!0,a.location="dashboard";break;case"/planboard":a.loaderIcons.planboard=!0,a.location="planboard";break;case"/messages":a.loaderIcons.messages=!0,a.location="messages";break;case"/groups":a.loaderIcons.groups=!0,a.location="groups";break;case"/settings":a.loaderIcons.settings=!0,a.location="settings";break;default:b.path().match(/profile/)?(a.loaderIcons.profile=!0,a.location="profile"):a.loaderIcons.general=!0}b.path().match(/logout/)&&(a.location="logout"),a.location||ga("send","Undefined Page",b.path()),ga("send","pageview",{page:"/index.html#/"+a.location||"login",title:a.location||"login"}),"/tv"!=b.path()&&(d.check()||b.path("/login")),a.loadingBig=!0,a.statusBar.display("Aan het laden..."),$("div[ng-view]").hide()}),a.$on("$routeChangeSuccess",function(){a.newLocation=b.path(),a.loadingBig=!1,a.statusBar.off(),$("div[ng-view]").show()}),a.$on("$routeChangeError",function(b,c,d,e){a.notifier.error(e)}),a.fixStyles=function(){a.timelineLoaded=!1;var b=$(".tabs-left .nav-tabs").height();$.each($(".tab-content").children(),function(){var a=($(this),$(this).attr("id")),c=$(".tabs-left .tab-content #"+a).height();b>c&&$(".tabs-left .tab-content #"+a).css({height:$(".tabs-left .nav-tabs").height()-41})}),($.os.mac||$.os.linux)&&$(".nav-tabs-app li a span").css({paddingTop:"10px",marginBottom:"0px"})},a.fullScreen=function(){screenfull.toggle($("html")[0])},$.os.windows&&$("#loading p").css({paddingTop:"130px"}),$.browser.msie&&"8.0"==$.browser.version&&(document.title=a.config.profile.title),h.profile.mobileApp.status||$("#copyrights span.muted").css({right:0}),a.downloadMobileApp=function(b){a.statusBar.display("Instructies aan het verzenden..."),g.email(b).then(function(){a.notifier.success("Controleer uw inbox voor de instructies."),a.statusBar.off()})}}]),angular.module("WebPaige.Modals.User",["ngResource"]).factory("User",["$resource","$config","$q","$location","Storage","$rootScope",function(a,b,c,d,e){var f=a(),g=a(b.host+"/login",{},{process:{method:"GET",params:{uuid:"",pass:""}}}),h=a(b.host+"/logout",{},{process:{method:"GET",params:{},isArray:!0}}),i=a(b.host+"/resources",{},{get:{method:"GET",params:{}}}),j=a(b.host+"/divisions",{},{get:{method:"GET",params:{},isArray:!0}}),k=a(b.host+"/states",{},{get:{method:"GET",params:{},isArray:!0}}),l=a(b.host+"/passwordReset",{},{password:{method:"GET",params:{uuid:"",path:""},isArray:!0}}),m=a(b.host+"/passwordReset",{},{reset:{method:"GET",params:{uuid:"",pass:"",key:""}}});return f.prototype.divisions=function(){var a=c.defer();return j.get({},function(b){a.resolve(b)},function(b){a.resolve(b)}),a.promise},f.prototype.states=function(){var a=c.defer();return k.get({},function(b){var c=[];angular.forEach(b,function(a){var b="";angular.forEach(a,function(a){b+=a}),c.push(b)}),a.resolve(c)},function(b){a.resolve(b)}),a.promise},f.prototype.password=function(a){var b=c.defer();return l.password({uuid:a.toLowerCase(),path:d.absUrl()},function(a){angular.equals(a,[])||angular.equals(a,[{}])?b.resolve("ok"):b.resolve(a)},function(a){b.resolve(a)}),b.promise},f.prototype.login=function(a,b){var d=c.defer();return g.process({uuid:a,pass:b},function(a){angular.equals(a,[])?d.reject("Something went wrong with login!"):d.resolve(a)},function(a){d.resolve(a)}),d.promise},f.prototype.changePass=function(a,b,d){var e=c.defer();return m.get({uuid:a,pass:b,key:d},function(a){e.resolve(a)},function(a){e.resolve(a)}),e.promise},f.prototype.logout=function(){var a=c.defer();return h.process(null,function(b){a.resolve(b)},function(b){a.resolve({error:b})}),a.promise},f.prototype.resources=function(){var a=c.defer();return i.get(null,function(b){angular.equals(b,[])?a.reject("User has no resources!"):(e.add("resources",angular.toJson(b)),a.resolve(b))},function(b){a.resolve({error:b})}),a.promise},new f}]),angular.module("WebPaige.Modals.Dashboard",["ngResource"]).factory("Dashboard",["$rootScope","$resource","$config","$q","Storage","Slots","Dater","Announcer",function(a,b,c,d,e,f,g,h){var i=b("http://knrm.myask.me/rpc/client/p2000.php",{},{p2000:{method:"GET",params:{},isArray:!0}}),j=b(c.host+"/capcodes",{},{capcodes:{method:"GET",params:{},isArray:!0}});return i.prototype.pies=function(){var b=d.defer(),c=angular.fromJson(e.get("groups")),g=e.local.settings().app.widgets.groups,h=[];return 0===g.length&&console.warn("no settings"),angular.forEach(c,function(b){g[b.uuid]&&g[b.uuid].status&&(0==a.config.timeline.config.divisions.length?h.push(f.pie({id:b.uuid,name:b.name,division:"both"})):g[b.uuid].divisions?angular.forEach(a.config.timeline.config.divisions,function(a){"all"!==a.id&&h.push(f.pie({id:b.uuid,name:b.name,division:a.id}))}):h.push(f.pie({id:b.uuid,name:b.name,division:"both"})))}),d.all(h).then(function(c){a.statusBar.off(),b.resolve(c)}),b.promise},i.prototype.getCapcodes=function(){function a(a){var b="";return angular.forEach(a,function(a){b+=a}),Number(b)}var b=d.defer();return j.capcodes(null,function(c){var d=[];angular.forEach(c,function(b){d.push(a(b))}),b.resolve(d)},function(a){b.resolve({error:a})}),b.promise},i.prototype.p2000=function(){var b=d.defer();return a.statusBar.display(a.ui.dashboard.gettingAlarms),a.config.profile.smartAlarm?$.ajax({url:a.config.profile.p2000.url,dataType:"json",success:function(c){a.statusBar.off();var d=h.process(c,!0);b.resolve({alarms:d,synced:(new Date).getTime()})},error:function(){b.resolve({error:error})}}):i.prototype.getCapcodes().then(function(d){$.ajax({url:c.profile.p2000.url+"?code="+d,dataType:"jsonp",success:function(c){a.statusBar.off();var d=h.process(c);b.resolve({alarms:d,synced:(new Date).getTime()})},error:function(){b.resolve({error:error})}})}),b.promise},new i}]),angular.module("WebPaige.Modals.Slots",["ngResource"]).factory("Slots",["$rootScope","$config","$resource","$q","Storage","Dater","Sloter","Stats",function(a,b,c,d,e,f,g,h){function i(a){var b=angular.fromJson(a.content);return{start:Math.floor(new Date(a.start).getTime()/1e3),end:Math.floor(new Date(a.end).getTime()/1e3),recursive:b.recursive,text:b.state,id:b.id}}var j=c(b.host+"/askatars/:user/slots",{user:""},{query:{method:"GET",params:{start:"",end:""},isArray:!0},change:{method:"PUT",params:{start:"",end:"",text:"",recursive:""}},save:{method:"POST",params:{}},remove:{method:"DELETE",params:{}}}),k=c(b.host+"/calc_planning/:id",{},{query:{method:"GET",params:{id:"",start:"",end:""},isArray:!0}}),l=c(b.host+"/network/:id/wish",{},{query:{method:"GET",params:{id:"",start:"",end:""},isArray:!0},save:{method:"PUT",params:{id:""}}}),m=c(b.host+"/network/:id/member/slots2",{},{query:{method:"GET",params:{id:"",start:"",end:""}}});j.prototype.wishes=function(a){var b=d.defer(),c={id:a.id,start:a.start,end:a.end};return l.query(c,function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise},j.prototype.setWish=function(a){var b=d.defer(),c={start:a.start,end:a.end,wish:a.wish,recurring:a.recursive};return l.save({id:a.id},c,function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise},j.prototype.aggs=function(b){var c=d.defer(),e=[];return a.config.timeline.config.divisions.length>0?angular.forEach(a.config.timeline.config.divisions,function(a){if("all"!==a.id){var c={id:b.id,start:b.start,end:b.end,stateGroup:a.id,division:{id:a.id,label:a.label}};e.push(j.prototype.agg(c))}}):e.push(j.prototype.agg({id:b.id,start:b.start,end:b.end})),d.all(e).then(function(a){c.resolve(a)}),c.promise},j.prototype.agg=function(a){var b=d.defer();return k.query(a,function(c){var d=h.aggs(c);b.resolve({id:a.id,division:a.division,data:c,ratios:d.ratios,durations:d.durations})},function(a){b.resolve({error:a})}),b.promise},j.prototype.pie=function(a){function c(c){var d;if(c.length>1){angular.forEach(c,function(a){g>=a.start&&g<=a.end&&(d=a),m<=1e3*a.start?l.next.data.push(a):m>=1e3*a.start&&l.current.data.push(a)});var e=l.current.data[l.current.data.length-1],f=(l.next.data[0],(1e3*e.end-m)/1e3),i=[];return l.current.data[0].start=l.current.period.first.timeStamp/1e3,f>0&&(e.end=m/1e3,l.next.data.unshift({diff:e.diff,start:m/1e3,end:e.end,wish:e.wish})),angular.forEach(l.current.data,function(a){a.end-a.start>0&&i.push(a),a.diff<0&&l.current.shortages.push(a)}),i[0].start=l.current.period.first.timeStamp/1e3,angular.forEach(l.next.data,function(a){a.diff<0&&l.next.shortages.push(a)}),{id:a.id,division:a.division,name:a.name,weeks:{current:{data:i,state:d,shortages:l.current.shortages,start:{date:new Date(l.current.period.first.timeStamp).toString(b.formats.date),timeStamp:l.current.period.first.timeStamp},end:{date:new Date(l.current.period.last.timeStamp).toString(b.formats.date),timeStamp:l.current.period.last.timeStamp},ratios:h.pies(i)},next:{data:l.next.data,shortages:l.next.shortages,start:{date:new Date(l.next.period.first.timeStamp).toString(b.formats.date),timeStamp:l.next.period.first.timeStamp},end:{date:new Date(l.next.period.last.timeStamp).toString(b.formats.date),timeStamp:l.next.period.last.timeStamp},ratios:h.pies(l.next.data)}}}}null==c[0].diff&&(c[0].diff=0),null==c[0].wish&&(c[0].wish=0);var j=[{start:l.current.period.first.timeStamp/1e3,end:l.current.period.last.timeStamp/1e3,wish:c[0].wish,diff:c[0].diff}],k=[{start:l.next.period.first.timeStamp/1e3,end:l.next.period.last.timeStamp/1e3,wish:c[0].wish,diff:c[0].diff}];return j[0].diff<0&&l.current.shortages.push(j[0]),k[0].diff<0&&l.next.shortages.push(k[0]),{id:a.id,division:a.division,name:a.name,weeks:{current:{data:j,state:j,shortages:l.current.shortages,start:{date:new Date(l.current.period.first.timeStamp).toString(b.formats.date),timeStamp:l.current.period.first.timeStamp},end:{date:new Date(l.current.period.last.timeStamp).toString(b.formats.date),timeStamp:l.current.period.last.timeStamp},ratios:h.pies(j)},next:{data:k,shortages:l.next.shortages,start:{date:new Date(l.next.period.first.timeStamp).toString(b.formats.date),timeStamp:l.next.period.first.timeStamp},end:{date:new Date(l.next.period.last.timeStamp).toString(b.formats.date),timeStamp:l.next.period.last.timeStamp},ratios:h.pies(k)}}}}var e=d.defer(),g=Math.floor(Date.now().getTime()/1e3),i=f.getPeriods(),j=f.current.week(),l={current:{period:i.weeks[j],data:[],shortages:[]},next:{period:i.weeks[j+1],data:[],shortages:[]}},m=l.current.period.last.timeStamp,n={id:a.id,start:l.current.period.first.timeStamp/1e3,end:l.next.period.last.timeStamp/1e3};return"both"!=a.division&&(n.stateGroup=a.division),k.query(n,function(a){e.resolve(c(a))},function(a){e.resolve({error:a})}),e.promise};var n={init:function(b){a.app.preloader={status:!0,total:b,count:0,started:Date.now().getTime()}},count:function(){a.app.preloader.count=Math.abs(Math.floor(a.app.preloader.count+100/a.app.preloader.total)),a.app.preloader.stopped=Date.now().getTime()}};return j.prototype.currentState=function(){var b;b=String(Date.now().getTime()),b=Number(b.substr(0,b.length-3));var c=d.defer(),f={user:angular.fromJson(e.get("resources")).uuid,start:b,end:b+1};return j.query(f,function(b){c.resolve(b.length>0?a.config.statesall[b[0].text]:{color:"gray",label:"Geen planning"})}),c.promise},j.prototype.all=function(a){var b=d.defer(),c=(f.getPeriods(),{user:angular.fromJson(e.get("resources")).uuid,start:a.stamps.start/1e3,end:a.stamps.end/1e3});return j.query(c,function(d){if(angular.forEach(d,function(a){a.recursive||(a.recursive=!1)}),a.layouts.group){var f={id:a.groupId,start:c.start,end:c.end,month:a.month};j.prototype.aggs(f).then(function(f){if(a.layouts.members){var g=angular.fromJson(e.get(a.groupId));m.query({id:a.groupId,start:c.start,end:c.end,type:"both"},function(c){var e=[];angular.forEach(c,function(a,b){angular.forEach(a,function(a){a.text=a.state});var c;angular.forEach(g,function(a){b==a.uuid&&(c=a.resources.lastName)}),e.push({id:b,lastName:c,data:a,stats:h.member(a)})}),b.resolve({user:d,groupId:a.groupId,aggs:f,members:e,synced:(new Date).getTime(),periods:{start:a.stamps.start,end:a.stamps.end}})},function(a){b.resolve({error:a})})}else b.resolve({user:d,groupId:a.groupId,aggs:f,synced:(new Date).getTime(),periods:{start:a.stamps.start,end:a.stamps.end}})})}else b.resolve({user:d,synced:(new Date).getTime(),periods:{start:a.stamps.start,end:a.stamps.end}})},function(a){b.resolve({error:a})}),b.promise},j.prototype.user=function(a){var b=d.defer();return j.query(a,function(c){n.count(),b.resolve({id:a.user,data:c,stats:h.member(c)})},function(a){b.resolve({error:a})}),b.promise},j.prototype.local=function(){return angular.fromJson(e.get("slots"))},j.prototype.add=function(a,b){var c=d.defer();return j.save({user:b},a,function(a){c.resolve(a)},function(a){c.resolve({error:a})}),c.promise},j.prototype.change=function(a,b,c){var e=d.defer();return j.change(angular.extend(i(b),{user:c}),i(a),function(a){e.resolve(a)},function(a){e.resolve({error:a})}),e.promise},j.prototype.remove=function(a,b){var c=d.defer();return j.remove(angular.extend(i(a),{user:b}),function(a){c.resolve(a)},function(a){c.resolve({error:a})}),c.promise},new j}]),angular.module("WebPaige.Modals.Messages",["ngResource"]).factory("Messages",["$rootScope","$config","$resource","$q","Storage","$http",function(a,b,c,d,e,f){var g=c(b.host+"/question/:action",{},{query:{method:"GET",params:{action:"",0:"dm"},isArray:!0},get:{method:"GET",params:{}},send:{method:"POST",params:{action:"sendDirectMessage"}},save:{method:"POST",params:{}},changeState:{method:"POST",params:{action:"changeState"}},remove:{method:"POST",params:{action:"deleteQuestions"}}}),h=c(b.host+"/notification/:uuid",{},{query:{method:"GET",params:{},isArray:!0},get:{method:"GET",params:{uuid:""}},save:{method:"POST",params:{}},edit:{method:"PUT",params:{uuid:""}},remove:{method:"DELETE",params:{uuid:""}}});return g.prototype.query=function(){var b=d.defer();return g.query(function(c){e.add("messages",angular.toJson(c)),g.prototype.unreadCount(),a.config.profile.smartAlarm?b.resolve({messages:g.prototype.filter(c),scheadules:{}}):g.prototype.scheaduled.list().then(function(a){b.resolve({messages:g.prototype.filter(c),scheadules:a})})},function(a){b.resolve({error:a})}),b.promise},g.prototype.scheaduled={list:function(){var a=d.defer();return h.query(function(b){e.add("notifications",angular.toJson(b)),angular.forEach(b,function(a){angular.forEach(a.types,function(b){"sms"==b&&(a.sms=!0),"email"==b&&(a.mail=!0)})}),a.resolve(b)},function(b){a.resolve({error:b})}),a.promise},create:function(a){var b=d.defer();return h.save(null,angular.toJson(a),function(a){var c="";angular.forEach(a,function(a){c+=a}),b.resolve(c)},function(a){b.resolve({error:a})}),b.promise},edit:function(a,b){var c=d.defer();return h.edit({uuid:a},angular.toJson(b),function(a){c.resolve(a)},function(a){c.resolve({error:a})}),c.promise},get:function(a){var b=d.defer();return h.get({uuid:a},function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise},find:function(a){var b;return angular.forEach(this.local(),function(c){c.uuid==a&&(b=c)}),b},local:function(){return angular.fromJson(e.get("notifications"))},remove:function(a){var b=d.defer();return h.remove({uuid:a},function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise}},g.prototype.filter=function(a){var b={inbox:[],outbox:[],trash:[]};angular.forEach(a,function(a){""==a.subject&&(a.subject="-No Subject-"),"inbox"==a.box&&"TRASH"!=a.state?b.inbox.push(a):"outbox"==a.box&&"TRASH"!=a.state?b.outbox.push(a):"inbox"!=a.box&&"outbox"!=a.box||"TRASH"!=a.state||b.trash.push(a)});var c=function(a){for(var b=50,c=a.length,d=0,e=[];c>d*b;)e[d]=a.slice(d*b,(d+1)*b),d++;return e};return b.inbox=c(b.inbox),b.outbox=c(b.outbox),b.trash=c(b.trash),b},g.prototype.local=function(){return angular.fromJson(e.get("messages"))},g.prototype.find=function(a){var b;return angular.forEach(g.prototype.local(),function(c){c.uuid==a&&(b=c)}),b},g.prototype.receviers=function(){var b=angular.fromJson(e.get("members")),c=angular.fromJson(e.get("groups")),d=[];return angular.forEach(b,function(b){d.push({id:b.uuid,name:b.name,lastName:b.resources.lastName,firstName:b.resources.firstName,group:a.ui.message.receiversUsers})}),angular.forEach(c,function(b){d.push({id:b.uuid,name:b.name,lastName:b.name,group:a.ui.message.receiversGroups})}),d},g.prototype.send=function(a,b){var c=d.defer(),e=[],f=[];angular.forEach(a.receivers,function(a){e.push(a.id)}),f.push("paige"),b.sms&&f.push("sms"),b.email&&f.push("email");var a={members:e,content:a.body,subject:a.subject,types:f};return g.send(null,a,function(a){var b="";angular.forEach(a,function(a){b+=a}),c.resolve(b)},function(a){c.resolve({error:a})}),c.promise},g.prototype.email=function(a){var c,e=d.defer();return"regular"==a?c="/mail/mobile_app.html":"experimental"==a&&(c="/mail/mobile_app_experimental.html"),f({method:"GET",url:"../profiles/"+b.profile.meta+c}).success(function(a){var b={content:a,subject:"Mobiele App Instructies",types:["email"],contenttype:"text/html"};g.send(null,b,function(a){var b="";angular.forEach(a,function(a){b+=a}),e.resolve(b)},function(a){e.resolve({error:a})})}).error(function(a,b,c,d){console.log("Something went wrong terribly with emailing the message!",a,b,c,d)}),e.promise},g.prototype.unread=function(){var a=g.prototype.local(),b=[];return angular.forEach(a,function(a){"inbox"==a.box&&"NEW"==a.state&&b.push(a)}),b},g.prototype.unreadCount=function(){var b=g.prototype.local(),c=0;angular.forEach(b,function(a){"inbox"==a.box&&"NEW"==a.state&&c++}),a.app.unreadMessages=c},g.prototype.changeState=function(a,b){var c=d.defer();if(g.changeState(null,{ids:a,state:b},function(a){c.resolve(a)},function(a){c.resolve({error:a})}),"READ"==b){var f=angular.fromJson(e.get("messages")),h=[];angular.forEach(f,function(b){angular.forEach(a,function(a){b.uuid==a&&(b.state="READ")}),h.push(b)}),e.remove("messages"),e.add(angular.toJson("messages",h)),g.prototype.unreadCount()}return c.promise},g.prototype.remove=function(a){var b=d.defer();return g.prototype.changeState(a,"TRASH").then(function(a){b.resolve(a)}),b.promise},g.prototype.restore=function(a){var b=d.defer();return g.prototype.changeState(a,"SEEN").then(function(a){b.resolve(a)}),b.promise},g.prototype.emptyTrash=function(){var a=d.defer(),b=g.prototype.local(),c=[];return angular.forEach(b,function(a){"inbox"!=a.box&&"outbox"!=a.box||"TRASH"!=a.state||c.push(a.uuid)}),g.remove(null,{members:c},function(b){a.resolve(b)},function(b){a.resolve({error:b})}),a.promise},g.prototype.clean=function(a){var b=d.defer(),c=[];return angular.forEach(a,function(a){var b=[];angular.forEach(a,function(a){b.push(a.uuid)}),c.push(g.remove(null,{members:b}))}),d.all(c).then(function(a){b.resolve(a)}),b.promise},new g}]),angular.module("WebPaige.Modals.Groups",["ngResource"]).factory("Groups",["$resource","$config","$q","Storage","$rootScope","Slots","$location",function(a,b,c,d,e,f,g){var h=a(b.host+"/network/:action/:id",{},{query:{method:"GET",params:{},isArray:!0},get:{method:"GET",params:{id:""}},save:{method:"POST",params:{id:""}},edit:{method:"PUT",params:{id:""}},remove:{method:"DELETE",params:{id:""}},search:{method:"POST",params:{id:"",action:"searchPaigeUser"},isArray:!0}}),i=a(b.host+"/node/:id/container",{},{get:{method:"GET",params:{id:""},isArray:!0}}),j=a(b.host+"/parent",{},{get:{method:"GET",params:{},isArray:!0}}),k=a(b.host+"/network/:id/members/:mid",{},{query:{method:"GET",params:{id:"",fields:"[role, settingsWebPaige]"},isArray:!0},get:{method:"GET",params:{id:""}},save:{method:"POST",params:{}},add:{method:"POST",params:{id:"",mid:""}},remove:{method:"DELETE",params:{id:"",mid:""}}}),l=a(b.host+"/network/guard/:id/:team",{},{global:{method:"GET",isArray:!0},position:{method:"GET",params:{id:"",team:""}}});return h.prototype.guardMonitor=function(){var a=c.defer(),b=angular.fromJson(d.get("guard"))||{};return l.global(null,function(c){var f="";angular.forEach(c[0],function(a){f+=a}),b.monitor=f,d.add("guard",angular.toJson(b)),e.app.guard.monitor=f,a.resolve(f)},function(b){a.resolve({error:b})}),a.promise},h.prototype.guardRole=function(){var a=c.defer(),b=this;return b.guard=angular.fromJson(d.get("guard")),l.position({id:b.guard.monitor,team:"status"},function(c){var f=angular.fromJson(d.get("members"));b.guard.synced=(new Date).getTime(),b.guard.users={},angular.forEach(c.station,function(a){("agent"!=a[0]||"state"!=a[1])&&(b.guard.users[a[0]]={name:f&&f[a[0]]&&f[a[0]].name||a[0],state:a[1]})}),b.guard.truck=[],b.guard.selection={},angular.forEach(c.selection,function(a,d){b.guard.selection[d]={user:a.agentID},null!=a.agentID&&b.guard.truck.push(a.agentID),"/tv"!=g.path()&&a.agentID==e.app.resources.uuid&&(b.guard.role=c.map[d].name)}),angular.forEach(c.map,function(a,c){b.guard.selection[c].role=a.name}),b.guard.reserves={available:[],unavailable:[],noplanning:[]},angular.forEach(b.guard.users,function(a,c){if(-1==b.guard.truck.indexOf(c)){var d={};d[c]=a,b.guard.reserves[a.state].push(d)}}),d.add("guard",angular.toJson(b.guard)),a.resolve(b.guard)},function(b){a.resolve({error:b})}),a.promise},h.prototype.parents=function(a){var b=c.defer();return j.get(null,function(c){a?b.resolve(c):0==c.length?b.resolve(null):b.resolve(c[0].uuid)},function(a){b.resolve({error:a})}),b.promise},h.prototype.containers=function(a){var b=c.defer(),d=[];return i.get({id:a},function(a){angular.forEach(a,function(a){var b=[];angular.forEach(a,function(a){b+=a}),d.push(b)}),b.resolve(d)},function(a){b.resolve({error:a})}),b.promise},h.prototype.addMember=function(a){var b=c.defer();return k.add({id:a.group.uuid,mid:a.id},{},function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise},h.prototype.removeMember=function(a,b){var d=c.defer();return k.remove({id:b,mid:a},function(a){d.resolve(a)},function(a){d.resolve({error:a})}),d.promise},h.prototype.removeMembers=function(a,b){var d=c.defer(),e=[];return angular.forEach(a,function(a,c){c&&e.push(h.prototype.removeMember(c,b.uuid))}),c.all(e).then(function(a){d.resolve(a)}),d.promise},h.prototype.wish=function(a){var b=c.defer(),d=0;return f.wishes({id:a,start:255600,end:860400}).then(function(a){angular.forEach(a,function(a){255600==a.start&&860400==a.end&&null!=a.count&&(d=a.count)}),b.resolve({count:d})}),b.promise},h.prototype.query=function(a){var b=c.defer();return h.query(function(e){if(d.add("groups",angular.toJson(e)),a)b.resolve(e);else{var f=[];angular.forEach(e,function(a){f.push(h.prototype.get(a.uuid))}),c.all(f).then(function(a){h.prototype.uniqueMembers();var c={};c.members={},angular.forEach(e,function(b){c.groups=e,c.members[b.uuid]=[],angular.forEach(a,function(a){a.id==b.uuid&&(c.members[b.uuid]=a.data)})}),b.resolve(c)})}},function(a){b.resolve({error:a})}),b.promise},h.prototype.get=function(a){var b=c.defer();return k.query({id:a},function(c){var e;e=4==c.length&&"n"==c[0][0]&&"u"==c[1][0]?[]:c,d.add(a,angular.toJson(e)),b.resolve({id:a,data:e})},function(a){b.resolve({error:a})}),b.promise},h.prototype.uniqueMembers=function(){angular.forEach(angular.fromJson(d.get("groups")),function(a){var b=angular.fromJson(d.get("members"))||{};angular.forEach(angular.fromJson(d.get(a.uuid)),function(a){b[a.uuid]=a}),d.add("members",angular.toJson(b))})},h.prototype.save=function(a){var b=c.defer();return a.id?h.edit({id:a.id},{name:a.name},function(){b.resolve(a.id)}):h.save({id:e.app.resources.uuid},a,function(a){var c="";angular.forEach(a,function(a){c+=a}),b.resolve(c)},function(a){b.resolve({error:a})}),b.promise},h.prototype.remove=function(a){var b=c.defer();return h.remove({id:a},function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise},h.prototype.search=function(a){var b=c.defer();return h.search(null,{key:a},function(a){var c=[];a.sort(function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return d>c?-1:c>d?1:0}),angular.forEach(a,function(a){c.push({id:a.id,name:a.name,groups:h.prototype.getMemberGroups(a.id)})}),b.resolve(c)},function(a){b.resolve({error:a})}),b.promise},h.prototype.getMemberGroups=function(a){var b=angular.fromJson(d.get("groups")),c=[];return angular.forEach(b,function(b){var e=angular.fromJson(d.get(b.uuid));angular.forEach(e,function(d){d.uuid===a&&c.push({uuid:b.uuid,name:b.name})})}),c},new h}]),angular.module("WebPaige.Modals.Profile",["ngResource"]).factory("Profile",["$rootScope","$config","$resource","$q","Storage","Groups","Slots","MD5",function(a,b,c,d,e,f,g,h){var i=c(b.host+"/node/:id/:section",{},{get:{method:"GET",params:{id:"",section:"resource"}},save:{method:"PUT",params:{section:"resource"}},role:{method:"PUT",params:{section:"role"},isArray:!0}}),j=c(b.host+"/register",{direct:"true",module:"default"},{profile:{method:"GET",params:{uuid:"",pass:"",name:"",phone:""},isArray:!0}}),k=c(b.host+"/resources",{},{get:{method:"GET",params:{}},save:{method:"POST",params:{}}});return i.prototype.register=function(b){var c=d.defer(),e=b.username.toLowerCase();return console.log("profile ->",b),j.profile({uuid:e,pass:h(b.password),name:String(b.firstName+" "+b.lastName),phone:b.PhoneAddress||""},function(g){console.log("registered ->",g),i.prototype.role(e,a.config.profile.smartAlarm?1:b.role.id).then(function(h){i.prototype.save(e,{firstName:b.firstName,lastName:b.lastName,EmailAddress:b.EmailAddress,PostAddress:b.PostAddress,PostZip:b.PostZip,PostCity:b.PostCity}).then(function(i){var j=[];angular.forEach(b.groups,function(a){j.push(f.addMember({id:e,group:a}))}),d.all(j).then(function(b){c.resolve({registered:a.config.profile.smartAlarm?g[0]:g,roled:h,resourced:i,grouped:b})})})})},function(a){c.resolve({error:a})}),c.promise},i.prototype.role=function(a,b){var c=d.defer();return i.role({id:a},b,function(a){c.resolve(a)},function(a){c.resolve({error:a})}),c.promise},i.prototype.changePassword=function(a){var b=d.defer();return k.save(null,{askPass:h(a.new1)},function(a){b.resolve(a)},function(a){b.resolve({error:a})}),b.promise},i.prototype.get=function(b,c){var f=d.defer();return i.get({id:b},function(d){b==a.app.resources.uuid&&(a.app.resources=d),c&&e.add("resources",angular.toJson(d)),f.resolve({resources:d})}),f.promise},i.prototype.getWithSlots=function(a,b,c){var e=d.defer();return i.prototype.get(a,b).then(function(b){g.user({user:a,start:c.start,end:c.end}).then(function(a){e.resolve(angular.extend(b,{slots:a,synced:(new Date).getTime(),periods:{start:1e3*c.start,end:1e3*c.end}}))})}),e.promise},i.prototype.getSlots=function(a,b){var c=d.defer();return g.user({user:a,start:b.start/1e3,end:b.end/1e3}).then(function(a){c.resolve({slots:a,synced:(new Date).getTime(),periods:{start:b.start,end:b.end}})}),c.promise},i.prototype.local=function(){return angular.fromJson(e.get("resources"))},i.prototype.save=function(a,b){var c=d.defer();return void 0!=b.firstName&&void 0!=b.lastName&&(b.name=b.firstName+" "+b.lastName),i.save({id:a},b,function(a){c.resolve(a)},function(a){c.resolve({error:a})}),c.promise},new i}]),angular.module("WebPaige.Modals.Settings",["ngResource"]).factory("Settings",["$rootScope","$config","$resource","$q","Storage","Profile",function(a,b,c,d,e,f){var g=c();return g.prototype.get=function(){return angular.fromJson(e.get("resources")).settingsWebPaige||{}},g.prototype.save=function(a,b){var c=d.defer();return f.save(a,{settingsWebPaige:angular.toJson(b)}).then(function(){c.resolve({saved:!0})}),c.promise},new g}]),angular.module("WebPaige.Directives",["ngResource"]).directive("chosen",function(){var a=function(a,b){a.$watch("receviersList",function(){b.trigger("liszt:updated")}),a.$watch("message.receviers",function(){$(b[0]).trigger("liszt:updated")}),b.chosen()};return{restrict:"A",link:a}}).directive("notificationItem",function(){return{restrict:"E",rep1ace:!0,templateUrl:"dist/views/messages-scheadule-item.html",link:function(a){a.s=a.scheadule,a.remover=function(b){a.$parent.$parent.remover(b)}},scope:{scheadule:"="}}}).directive("daterangepicker",["$rootScope",function(a){return{restrict:"A",link:function(b,c){var d={ranges:{}};d.ranges[a.ui.planboard.daterangerToday]=["today","tomorrow"],d.ranges[a.ui.planboard.daterangerTomorrow]=["tomorrow",(new Date.today).addDays(2)],d.ranges[a.ui.planboard.daterangerYesterday]=["yesterday","today"],d.ranges[a.ui.planboard.daterangerNext3Days]=["today",(new Date.create).addDays(3)],d.ranges[a.ui.planboard.daterangerNext7Days]=["today",(new Date.create).addDays(7)],c.daterangepicker(d,function(c,d){b.$apply(function(){var e=d.getTime()-c.getTime();864e5>=e?(b.timeline.range={start:c,end:c},b.timeline.scope={day:!0,week:!1,month:!1}):6048e5>e?(b.timeline.range={start:c,end:d},b.timeline.scope={day:!1,week:!0,month:!1}):e>6048e5&&(b.timeline.range={start:c,end:d},b.timeline.scope={day:!1,week:!1,month:!0}),a.$broadcast("timeliner",{start:c,end:d})
})}),c.attr("data-toggle","daterangepicker"),c.daterangepicker({autoclose:!0})}}}]),angular.module("$strap.config",[]).value("$strap.config",{}),angular.module("$strap.filters",["$strap.config"]),angular.module("$strap.directives",["$strap.config"]),angular.module("$strap",["$strap.filters","$strap.directives","$strap.config"]),angular.module("$strap.directives").directive("bsAlert",["$parse","$timeout","$compile",function(a,b,c){return{restrict:"A",link:function(b,d,e){var f=a(e.bsAlert),g=(f.assign,f(b));e.bsAlert?b.$watch(e.bsAlert,function(a,f){g=a,d.html((a.title?"<strong>"+a.title+"</strong>&nbsp;":"")+a.content||""),a.closed&&d.hide(),c(d.contents())(b),(a.type||f.type)&&(f.type&&d.removeClass("alert-"+f.type),a.type&&d.addClass("alert-"+a.type)),(angular.isUndefined(e.closeButton)||"0"!==e.closeButton&&"false"!==e.closeButton)&&d.prepend('<button type="button" class="close" data-dismiss="alert">&times;</button>')},!0):(angular.isUndefined(e.closeButton)||"0"!==e.closeButton&&"false"!==e.closeButton)&&d.prepend('<button type="button" class="close" data-dismiss="alert">&times;</button>'),d.addClass("alert").alert(),d.hasClass("fade")&&(d.removeClass("in"),setTimeout(function(){d.addClass("in")}));var h=e.ngRepeat&&e.ngRepeat.split(" in ").pop();d.on("close",function(a){var c;h?(a.preventDefault(),d.removeClass("in"),c=function(){d.trigger("closed"),b.$parent&&b.$parent.$apply(function(){for(var a=h.split("."),c=b.$parent,d=0;a.length>d;++d)c&&(c=c[a[d]]);c&&c.splice(b.$index,1)})},$.support.transition&&d.hasClass("fade")?d.on($.support.transition.end,c):c()):g&&(a.preventDefault(),d.removeClass("in"),c=function(){d.trigger("closed"),b.$apply(function(){g.closed=!0})},$.support.transition&&d.hasClass("fade")?d.on($.support.transition.end,c):c())})}}}]),angular.module("$strap.directives").directive("bsButton",["$parse","$timeout",function(a){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){if(e){c.parent('[data-toggle="buttons-checkbox"], [data-toggle="buttons-radio"]').length||c.attr("data-toggle","button");var f=!!b.$eval(d.ngModel);f&&c.addClass("active"),b.$watch(d.ngModel,function(a,b){var d=!!a,e=!!b;d!==e?$.fn.button.Constructor.prototype.toggle.call(g):d&&!f&&c.addClass("active")})}c.hasClass("btn")||c.on("click.button.data-api",function(){c.button("toggle")}),c.button();var g=c.data("button");g.toggle=function(){if(!e)return $.fn.button.Constructor.prototype.toggle.call(this);var d=c.parent('[data-toggle="buttons-radio"]');d.length?(c.siblings("[ng-model]").each(function(c,d){a($(d).attr("ng-model")).assign(b,!1)}),b.$digest(),e.$modelValue||(e.$setViewValue(!e.$modelValue),b.$digest())):b.$apply(function(){e.$setViewValue(!e.$modelValue)})}}}}]).directive("bsButtonsCheckbox",["$parse",function(){return{restrict:"A",require:"?ngModel",compile:function(a){a.attr("data-toggle","buttons-checkbox").find("a, button").each(function(a,b){$(b).attr("bs-button","")})}}}]).directive("bsButtonsRadio",["$parse",function(){return{restrict:"A",require:"?ngModel",compile:function(a,b){return a.attr("data-toggle","buttons-radio"),b.ngModel||a.find("a, button").each(function(a,b){$(b).attr("bs-button","")}),function(a,b,c,d){d&&(b.find("[value]").button().filter('[value="'+a.$eval(c.ngModel)+'"]').addClass("active"),b.on("click.button.data-api",function(b){a.$apply(function(){d.$setViewValue($(b.target).closest("button").attr("value"))})}),a.$watch(c.ngModel,function(d,e){if(d!==e){var f=b.find('[value="'+a.$eval(c.ngModel)+'"]');f.length&&$.fn.button.Constructor.prototype.toggle.call(f.data("button"))}}))}}}}]),angular.module("$strap.directives").directive("bsButtonSelect",["$parse","$timeout",function(a){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){var f=a(d.bsButtonSelect);f.assign,e&&(c.text(b.$eval(d.ngModel)),b.$watch(d.ngModel,function(a){c.text(a)}));var g,h,i,j;c.bind("click",function(){g=f(b),h=e?b.$eval(d.ngModel):c.text(),i=g.indexOf(h),j=i>g.length-2?g[0]:g[i+1],console.warn(g,j),b.$apply(function(){c.text(j),e&&e.$setViewValue(j)})})}}}]),angular.module("$strap.directives").directive("bsDatepicker",["$timeout",function(){var a="ontouchstart"in window&&!window.navigator.userAgent.match(/PhantomJS/i),b={"/":"[\\/]","-":"[-]",".":"[.]",dd:"(?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1}))",d:"(?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1}))",mm:"(?:[0]?[1-9]|[1][012])",m:"(?:[0]?[1-9]|[1][012])",yyyy:"(?:(?:[1]{1}[0-9]{1}[0-9]{1}[0-9]{1})|(?:[2]{1}[0-9]{3}))(?![[0-9]])",yy:"(?:(?:[0-9]{1}[0-9]{1}))(?![[0-9]])"};return{restrict:"A",require:"?ngModel",link:function(c,d,e,f){var g=function(a,c){c||(c={});var d=a,e=b;return angular.forEach(e,function(a,b){d=d.split(b).join(a)}),RegExp("^"+d+"$",["i"])},h=a?"yyyy/mm/dd":g(e.dateFormat||"mm/dd/yyyy");f&&f.$parsers.unshift(function(a){return!a||h.test(a)?(f.$setValidity("date",!0),a):(f.$setValidity("date",!1),void 0)});var i=d.next('[data-toggle="datepicker"]');if(i.length&&i.on("click",function(){a?d.trigger("focus"):d.datepicker("show")}),a&&"text"===d.prop("type"))d.prop("type","date"),d.on("change",function(){c.$apply(function(){f.$setViewValue(d.val())})});else{f&&d.on("changeDate",function(){c.$apply(function(){f.$setViewValue(d.val())})});var j=d.closest(".popover");j&&j.on("hide",function(){var a=d.data("datepicker");a&&(a.picker.remove(),d.data("datepicker",null))}),d.attr("data-toggle","datepicker"),d.datepicker({autoclose:!0,forceParse:e.forceParse||!1,language:e.language||"en"})}}}}]),angular.module("$strap.directives").directive("bsDropdown",["$parse","$compile",function(a,b){var c=Array.prototype.slice,d='<ul class="dropdown-menu" role="menu" aria-labelledby="drop1"><li ng-repeat="item in items" ng-class="{divider: !!item.divider, \'dropdown-submenu\': !!item.submenu && item.submenu.length}"><a ng-hide="!!item.divider" tabindex="-1" ng-href="{{item.href}}" ng-click="{{item.click}}" target="{{item.target}}" ng-bind-html-unsafe="item.text"></a></li></ul>',e=function(a,c,e){for(var g,h,i,j=0,k=a.length;k>j;j++)(g=a[j].submenu)&&(i=e.$new(),i.items=g,h=b(d)(i),h=h.appendTo(c.children("li:nth-child("+(j+1)+")")),f(g,h,i))},f=function(){var a=c.call(arguments);setTimeout(function(){e.apply(null,a)})};return{restrict:"EA",scope:!0,link:function(c,e,g){var h=a(g.bsDropdown);c.items=h(c);var i=b(d)(c);f(c.items,i,c),i.insertAfter(e),e.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}]),angular.module("$strap.directives").directive("bsModal",["$parse","$compile","$http","$timeout","$q","$templateCache",function(a,b,c,d,e,f){return{restrict:"A",scope:!0,link:function(g,h,i){var j=a(i.bsModal),k=(j.assign,j(g));e.when(f.get(k)||c.get(k,{cache:!0})).then(function(a){angular.isObject(a)&&(a=a.data);var c=j(g).replace(".html","").replace(/[\/|\.|:]/g,"-")+"-"+g.$id,e=$('<div class="modal hide" tabindex="-1"></div>').attr("id",c).attr("data-backdrop",i.backdrop||!0).attr("data-keyboard",i.keyboard||!0).addClass(i.modalClass?"fade "+i.modalClass:"fade").html(a);$("body").append(e),h.attr("href","#"+c).attr("data-toggle","modal"),d(function(){b(e)(g)}),g._modal=function(a){e.modal(a)},g.hide=function(){e.modal("hide")},g.show=function(){e.modal("show")},g.dismiss=g.hide})}}}]),angular.module("$strap.directives").directive("bsNavbar",["$location",function(a){return{restrict:"A",link:function(b,c){b.$watch(function(){return a.path()},function(a){c.find("li[data-match-route]").each(function(b,c){var d=angular.element(c),e=d.attr("data-match-route"),f=RegExp("^"+e+"$",["i"]);f.test(a)?d.addClass("active"):d.removeClass("active")})})}}}]),angular.module("$strap.directives").directive("bsPopover",["$parse","$compile","$http","$timeout","$q","$templateCache",function(a,b,c,d,e,f){return $("body").on("keyup",function(a){27===a.keyCode&&$(".popover.in").each(function(){$(this).popover("hide")})}),{restrict:"A",scope:!0,link:function(d,g,h){var i=a(h.bsPopover),j=(i.assign,i(d)),k={};angular.isObject(j)&&(k=j),e.when(k.content||f.get(j)||c.get(j,{cache:!0})).then(function(a){angular.isObject(a)&&(a=a.data),h.unique&&g.on("show",function(){$(".popover.in").each(function(){var a=$(this),b=a.data("popover");b&&!b.$element.is(g)&&a.popover("hide")})}),h.hide&&d.$watch(h.hide,function(a,b){a?c.hide():a!==b&&c.show()}),g.popover(angular.extend({},k,{content:a,html:!0}));var c=g.data("popover");c.hasContent=function(){return this.getTitle()||a},c.getPosition=function(){var a=$.fn.popover.Constructor.prototype.getPosition.apply(this,arguments);return b(this.$tip)(d),d.$digest(),this.$tip.data("popover",this),a},d._popover=function(a){g.popover(a)},d.hide=function(){g.popover("hide")},d.show=function(){g.popover("show")},d.dismiss=d.hide})}}}]),angular.module("$strap.directives").directive("bsTabs",["$parse","$compile",function(a,b){return{restrict:"A",link:function(a,c){var d=['<ul class="nav nav-tabs">',"</ul>"],e=['<div class="tab-content">',"</div>"];c.find("[data-tab]").each(function(b){var c=angular.element(this),f="tab-"+a.$id+"-"+b,g=c.hasClass("active"),h=c.hasClass("fade"),i=a.$eval(c.data("tab"));d.splice(b+1,0,"<li"+(g?' class="active"':"")+'><a href="#'+f+'" data-toggle="tab">'+i+"</a></li>"),e.splice(b+1,0,'<div class="tab-pane '+c.attr("class")+(h&&g?" in":"")+'" id="'+f+'">'+this.innerHTML+"</div>")}),c.html(d.join("")+e.join("")),b(c.children("div.tab-content"))(a)}}}]),angular.module("$strap.directives").directive("bsTimepicker",["$timeout",function(){var a="((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5][0-9])(?::[0-5][0-9])?(?:\\s?(?:am|AM|pm|PM))?)";return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){e&&c.on("change",function(){b.$apply(function(){e.$setViewValue(c.val())})});var f=RegExp("^"+a+"$",["i"]);e.$parsers.unshift(function(a){return!a||f.test(a)?(e.$setValidity("time",!0),a):(e.$setValidity("time",!1),void 0)});var g=c.closest(".popover");g&&g.on("hide",function(){var a=c.data("timepicker");a&&(a.$widget.remove(),c.data("timepicker",null))}),c.attr("data-toggle","timepicker"),c.timepicker()}}}]),angular.module("$strap.directives").directive("bsTooltip",["$parse","$compile",function(a){return{restrict:"A",scope:!0,link:function(b,c,d){var e=a(d.bsTooltip),f=(e.assign,e(b));b.$watch(d.bsTooltip,function(a,b){a!==b&&(f=a)}),d.unique&&c.on("show",function(){$(".tooltip.in").each(function(){var a=$(this),b=a.data("tooltip");b&&!b.$element.is(c)&&a.tooltip("hide")})}),c.tooltip({title:function(){return angular.isFunction(f)?f.apply(null,arguments):f},html:!0});var g=c.data("tooltip");g.show=function(){var a=$.Event("show");if(this.$element.trigger(a),!a.isDefaultPrevented()){var b=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),b}},g.hide=function(){var a=$.Event("hide");return this.$element.trigger(a),a.isDefaultPrevented()?void 0:$.fn.tooltip.Constructor.prototype.hide.apply(this,arguments)},b._tooltip=function(a){c.tooltip(a)},b.hide=function(){c.tooltip("hide")},b.show=function(){c.tooltip("show")},b.dismiss=b.hide}}}]),angular.module("$strap.directives").directive("bsTypeahead",["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){var f=a(d.bsTypeahead),g=(f.assign,f(b));b.$watch(d.bsTypeahead,function(a,b){a!==b&&(g=a)}),c.attr("data-provide","typeahead"),c.typeahead({source:function(){return angular.isFunction(g)?g.apply(null,arguments):g},minLength:d.minLength||1,items:d.items,updater:function(a){return e&&b.$apply(function(){e.$setViewValue(a)}),a}});var h=c.data("typeahead");h.lookup=function(){var a;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(a=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,a?this.process(a):this)},"0"===d.minLength&&setTimeout(function(){c.on("focus",function(){0===c.val().length&&setTimeout(c.typeahead.bind(c,"lookup"),200)})})}}}]),angular.module("WebPaige.Services.Timer",["ngResource"]).factory("Timer",["$rootScope","$timeout",function(a,b){var c=[],d=function(a,d,e){c[a]={event:d,delay:e,counter:0};var f=function(){c[a].counter++,console.log("counting ->",c[a].counter),c[a].mytimeout=b(f,1e3*e),c[a].delay==c[a].counter&&(c[a].event.call(),c[a].counter=0)};c[a].mytimeout=b(f,1e3*e)},e=function(a){b.cancel(c[a].mytimeout)};return{start:d,stop:e}}]),angular.module("WebPaige.Services.Session",["ngResource"]).factory("Session",["$rootScope","$http","Storage",function(a,b,c){return{check:function(){var a=angular.fromJson(c.cookie.get("session"));return a?(this.set(a.id),!0):!1},cookie:function(){for(var a,b=document.cookie.split(";"),c=0;c<b.length;c++)if(a=b[c].split("="),"WebPaige.session"==a[0].trim())return angular.fromJson(a[1])},get:function(a){return this.check(a),this.set(a.id),a.id},set:function(d){var e={id:d,time:new Date};return c.cookie.add("session",angular.toJson(e)),a.session=e,b.defaults.headers.common["X-SESSION_ID"]=a.session.id,e},clear:function(){a.session=null,b.defaults.headers.common["X-SESSION_ID"]=null}}}]),angular.module("WebPaige.Services.Dater",["ngResource"]).factory("Dater",["$rootScope","Storage",function(a,b){return{current:{today:function(){return Date.today().getDayOfYear()+1},week:function(){return(new Date).getWeek()?(new Date).getWeek():(console.log("Date getWeek does not exist !"),void 0)},month:function(){return(new Date).getMonth()+1},year:function(){return(new Date).toString("yyyy")}},readable:{date:function(b){return new Date(b).toString(a.config.formats.date)}},convert:{absolute:function(a,b,c){var d=a.split("-"),e=new Date(Date.parse(d[2]+"-"+d[1]+"-"+d[0]+" "+b)).getTime();return c?e/1e3:e}},calculate:{diff:function(a){return new Date(a.end).getTime()-new Date(a.start).getTime()}},getThisMonth:function(){return(new Date).toString("M")},getThisYear:function(){return(new Date).toString("yyyy")},getMonthTimeStamps:function(a){for(var b={},c=0;12>c;c++){var d=new Date(a,c).moveToFirstDayOfMonth(),e=new Date(a,c).moveToLastDayOfMonth().addDays(1);b[c+1]={first:{day:d,timeStamp:d.getTime()},last:{day:e,timeStamp:e.getTime()},totalDays:Date.getDaysInMonth(a,c)}}return b},getWeekTimeStamps:function(a){for(var b,c=[],d={},e=(new Date(a,0).moveToFirstDayOfMonth(),new Date(a,0).moveToFirstDayOfMonth().last().sunday().addWeeks(0)),f=new Date(e),g=0;54>g;g++)b=0==g?e.addWeeks(1):new Date(c[g-1]).addWeeks(1),c.push(new Date(b));c.unshift(f);for(var h=(new Date(c[54].addWeeks(1)),0);55>h;h++)d[h+1]={first:{day:c[h],timeStamp:new Date(c[h]).getTime()},last:{day:c[h+1],timeStamp:new Date(c[h+1]).getTime()}};return delete d[54],delete d[55],d},getDayTimeStamps:function(a){for(var b,c=[],d={},e=new Date(a,0).moveToFirstDayOfMonth(),f=0;366>f;f++)b=0==f?e:new Date(c[f-1]).addDays(1),c.push(new Date(b));for(var g=0;366>g;g++)d[g+1]={first:{day:c[g],timeStamp:new Date(c[g]).getTime()},last:{day:c[g+1],timeStamp:new Date(c[g+1]).getTime()}};return d[366].timeStamp?d.total=366:(delete d[366],d.total=365),d},registerPeriods:function(){var a=(angular.fromJson(b.get("periods")||"{}"),angular.fromJson(b.get("periodsNext")||"{}"),this.getThisYear()),c=Number(a)+1;b.add("periods",angular.toJson({months:this.getMonthTimeStamps(a),weeks:this.getWeekTimeStamps(a),days:this.getDayTimeStamps(a)})),b.add("periodsNext",angular.toJson({months:this.getMonthTimeStamps(c),weeks:this.getWeekTimeStamps(c),days:this.getDayTimeStamps(c)}))},getPeriods:function(a){return angular.fromJson(b.get(a?"periodsNext":"periods"))},translateToDutch:function(a){var b={Monday:"maandag",tuesday:"dinsdag",wednesday:"woensdag",thursday:"donderdag",friday:"vrijdag",saturday:"zaterdag",sunday:"zondag",january:"januari",february:"februari",march:"maart",april:"april",may:"mei",june:"juni",july:"juli",august:"augustus",september:"september",october:"oktober",november:"november",december:"december"};return a?(angular.forEach(b,function(b,c){a=a.replace(new RegExp(c,"gi"),b)}),a):void 0}}}]),angular.module("WebPaige.Services.EventBus",["ngResource"]).factory("EventBus",["$rootScope",function(a){var b=this,c={};b.emit=function(){var b=Array.prototype.slice.call(arguments,1);angular.forEach(c,function(c,d){angular.forEach(c,function(c){b.length?a.$emit(d,c(b)):a.$emit(d,c())})})},b.on=function(b,d){c[b]instanceof Array||(c[b]=[]),c[b].push(d),a.$on(c[b],d)},b.remove=function(a,b){var d=c[a],e=d instanceof Array?d.indexOf(b):-1;e>-1&&c[a].splice(e,1)},b.removeAll=function(a){a?c[a]=[]:c={}}}]),angular.module("WebPaige.Services.Interceptor",["ngResource"]).factory("Interceptor",["$q","$location",function(a){return function(b){return b.then(function(a){return a},function(b){return a.reject(b)})}}]),angular.module("WebPaige.Services.MD5",["ngResource"]).factory("MD5",function(){return function(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}var o,p,q,r,s,t,u,v,w,x=Array(),y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);var O=m(t)+m(u)+m(v)+m(w);return O.toLowerCase()}}),angular.module("WebPaige.Services.Storage",["ngResource"]).factory("Storage",["$rootScope","$config",function(a,b){"."!==b.title.substr(-1)&&(b.title=b.title?b.title+".":"");var c=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},d=function(a,d){if(!c())return!1;if(!d&&0!==d&&""!==d)return!1;try{localStorage.setItem(b.title+a,d)}catch(e){return!1}return!0},e=function(a){if(!c())return!1;var d=localStorage.getItem(b.title+a);return d?d:null},f=function(a){if(!c())return!1;try{localStorage.removeItem(b.title+a)}catch(d){return!1}return!0},g=function(){if(!c())return!1;var a=b.title.length;for(var d in localStorage)if(d.substr(0,a)===b.title)try{f(d.substr(a))}catch(e){return!1}return!0},h=function(){try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(a){return!1}},i=function(a,c){if(!h())return!1;if(!c&&0!==c&&""!==c)return!1;try{sessionStorage.setItem(b.title+a,c)}catch(d){return!1}return!0},j=function(a){if(!h())return!1;var c=sessionStorage.getItem(b.title+a);return c?c:null},k=function(a){if(!h())return!1;try{sessionStorage.removeItem(b.title+a)}catch(c){return!1}return!0},l=function(){if(!h())return!1;var a=b.title.length;for(var c in sessionStorage)if(c.substr(0,a)===b.title)try{k(c.substr(a))}catch(d){return!1}return!0},m=function(){try{return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}catch(a){return!1}},n=function(a,c){if("undefined"==typeof c)return!1;if(!m())return!1;try{var d="",e=new Date;null===c&&(b.cookie.expiry=-1,c=""),0!==b.cookie.expiry&&(e.setTime(e.getTime()+60*b.cookie.expiry*60*1e3),d="; expires="+e.toGMTString()),document.cookie=b.title+a+"="+c+d+"; path="+b.cookie.path}catch(f){return!1}return!0},o=function(c){if(!m())return a.$broadcast("StorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(b.title+c+"="))return decodeURIComponent(f.substring(b.title.length+c.length+1,f.length))}return null},p=function(a){n(a,null)},q=function(){for(var a=null,c=b.title.length,d=document.cookie.split(";"),e=0;e<d.length;e++){for(a=d[e];" "==a.charAt(0);)a=a.substring(1,a.length);key=a.substring(c,a.indexOf("=")),p(key)}},r=function(a){var b=a?localStorage.key:localStorage;return(.0009765625*(3+16*b.length/8192)).toPrecision(2)+" MB"},s=function(){return angular.fromJson(e("periods"))},t=function(){return angular.fromJson(e("groups"))},u=function(){return angular.fromJson(e("members"))},v=function(){var b=angular.fromJson(e("resources"));return b.settingsWebPaige?angular.fromJson(b.settingsWebPaige):a.config.defaults.settingsWebPaige};return{isSupported:c,add:d,get:e,remove:f,clearAll:g,session:{add:i,get:j,remove:k,clearAll:l},cookie:{add:n,get:o,remove:p,clearAll:q},size:r,local:{periods:s,groups:t,members:u,settings:v}}}]),angular.module("WebPaige.Services.Strings",["ngResource"]).factory("Strings",function(){return{truncate:function(a,b,c){var d=a.length>b,e=d?a.substr(0,b-1):a,e=c&&d?e.substr(0,e.lastIndexOf(" ")):e;return d?e+"..":e},toTitleCase:function(a){return a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):void 0}}}),angular.module("WebPaige.Services.Announcer",["ngResource"]).factory("Announcer",["$rootScope",function(a){return{process:function(b,c){var d={"short":[],"long":[]},e=0;if(c){var f=[];angular.forEach(b.rows,function(b){f.push({msgCode:a.config.profile.p2000.codes,day:new Date(b.value.timestamp).toString("dd-MM-yy"),time:new Date(b.value.timestamp).toString("HH:mm:ss"),body:b.value.message})}),b=f}return angular.forEach(b,function(a){a.body&&((a.body.match(/Prio 1/)||a.body.match(/PRIO 1/))&&(a.body=a.body.replace("Prio 1 ",""),a.prio={1:!0,test:!1}),(a.body.match(/Prio 2/)||a.body.match(/PRIO 2/))&&(a.body=a.body.replace("Prio 2 ",""),a.prio={2:!0,test:!1}),(a.body.match(/Prio 3/)||a.body.match(/PRIO 3/))&&(a.body=a.body.replace("Prio 3 ",""),a.prio={3:!0,test:!1}),a.body.match(/PROEFALARM/)&&(a.prio={test:!0}),4>e&&d.short.push(a),d.long.push(a),e++)}),d}}}]),angular.module("WebPaige.Services.Sloter",["ngResource"]).factory("Sloter",["$rootScope","Storage",function(a,b){return{get:{groups:function(){var a={};return angular.forEach(b.local.groups(),function(b){a[b.uuid]=b.name}),a},members:function(){var a={};return angular.forEach(b.local.members(),function(b){a[b.uuid]=b.name}),a}},wrapper:function(a){return'<span style="display:none;">'+a+"</span>"},secret:function(a){return'<span class="secret">'+a+"</span>"},addLoading:function(a,b,c){return angular.forEach(c,function(c){b.push({start:a.periods.end,end:15778368e5,group:c,content:"loading",className:"state-loading-right",editable:!1}),b.push({start:0,end:a.periods.start,group:c,content:"loading",className:"state-loading-left",editable:!1})}),b},user:function(b,c,d){var e=this;return angular.forEach(b.user,function(b,f){angular.forEach(d.legenda,function(g,h){b.text==h&&g&&c.push({start:Math.round(1e3*b.start),end:Math.round(1e3*b.end),group:b.recursive?e.wrapper("b")+a.ui.planboard.weeklyPlanning+e.wrapper("recursive"):e.wrapper("a")+a.ui.planboard.planning+e.wrapper("planning"),content:e.secret(angular.toJson({type:"slot",id:f,recursive:b.recursive,state:b.text})),className:"slot-"+f+" "+d.states[b.text].className,editable:!0})})}),c=e.addLoading(b,c,[e.wrapper("b")+a.ui.planboard.weeklyPlanning+e.wrapper("recursive"),e.wrapper("a")+a.ui.planboard.planning+e.wrapper("planning")])},profile:function(b,c){var d=this,e=[];return angular.forEach(b,function(b,f){angular.forEach(c.legenda,function(g,h){b.text==h&&g&&e.push({start:Math.round(1e3*b.start),end:Math.round(1e3*b.end),group:b.recursive?d.wrapper("b")+a.ui.planboard.weeklyPlanning+d.wrapper("recursive"):d.wrapper("a")+a.ui.planboard.planning+d.wrapper("planning"),content:d.secret(angular.toJson({type:"slot",id:f,recursive:b.recursive,state:b.text})),className:"slot-"+f+" "+c.states[b.text].className,editable:!0})})}),e.push({start:0,end:1,group:d.wrapper("b")+a.ui.planboard.weeklyPlanning+d.wrapper("recursive"),content:"",className:null,editable:!1}),e.push({start:0,end:1,group:d.wrapper("a")+a.ui.planboard.planning+d.wrapper("planning"),content:"",className:null,editable:!1}),e},namer:function(a,b){var c,d=this.get.groups(),e=d[a.id],f='<a href="#/groups?uuid='+a.id+'#view">'+e+"</a>";if(a.division){c=1==b?f:"<span>"+e+"</span>",c+=' <span class="label">'+a.division.label+"</span>"}else c=1==b?f:"<span>"+e+"</span>";return c},bars:function(a,b,c,d,e){var f=this,g=0;return angular.forEach(f.filtered(a,e),function(e){var h=f.namer(e,d);angular.forEach(e.data,function(a){a.wish>g&&(g=a.wish)}),angular.forEach(e.data,function(d){var e=g,i=d.wish,j=i,k=Math.round(i/e*80+20),l=k,m="height:"+k+"px;",n='<div class="requirement" style="'+m+'" title="Minimum aantal benodigden: '+i+' personen"></div>';i=d.wish+d.diff;var o=i;if(k=Math.round(i/e*80+20),d.diff>=0&&d.diff<7){var p;switch(d.diff){case 0:p=c.densities.even;break;case 1:p=c.densities.one;break;case 2:p=c.densities.two;break;case 3:p=c.densities.three;break;case 4:p=c.densities.four;break;case 5:p=c.densities.five;break;case 6:p=c.densities.six}}else p=d.diff>=7?c.densities.more:c.densities.less;var q='<span class="badge badge-inverse">'+d.diff+"</span>";o>j&&(k=l),m="height:"+k+"px;background-color: "+p+";";var r='<div class="bar" style="'+m+'"  title="Huidig aantal beschikbaar: '+i+' personen">'+q+"</div>";(d.diff>0&&c.legenda.groups.more||0==d.diff&&c.legenda.groups.even||d.diff<0&&c.legenda.groups.less)&&b.push({start:Math.round(1e3*d.start),end:Math.round(1e3*d.end),group:f.wrapper("c")+h,content:n+r+f.secret(angular.toJson({type:"group",diff:d.diff,group:h})),className:"group-aggs",editable:!1}),b=f.addLoading(a,b,[f.wrapper("c")+h])})}),b},aggs:function(a,b,c,d,e){var f=this;return angular.forEach(f.filtered(a,e),function(e){var g=f.namer(e,d);angular.forEach(e.data,function(d){var e;if(d.diff>=0&&d.diff<7)switch(d.diff){case 0:e="even";break;case 1:e=1;break;case 2:e=2;break;case 3:e=3;break;case 4:e=4;break;case 5:e=5;break;case 6:e=6}else e=d.diff>=7?"more":"less";(d.diff>0&&c.legenda.groups.more||0==d.diff&&c.legenda.groups.even||d.diff<0&&c.legenda.groups.less)&&b.push({start:Math.round(1e3*d.start),end:Math.round(1e3*d.end),group:f.wrapper("c")+g,content:e+f.secret(angular.toJson({type:"group",diff:d.diff,group:g})),className:"agg-"+e,editable:!1}),b=f.addLoading(a,b,[f.wrapper("c")+g])})}),b},wishes:function(a,b,c){var d,e=this,f=this.get.groups(),g=f[a.aggs[0].id],h='<a href="#/groups?uuid='+a.aggs[0].id+'#view">'+g+"</a>";return d=1==c?h:"<span>"+g+"</span>",d+=' <span class="label">Behoefte (elke divisie)</span>',angular.forEach(a.aggs.wishes,function(c){var f;f=c.count>=7?"wishes-more":0==c.count?"wishes-even":"wishes-"+c.count,b.push({start:Math.round(1e3*c.start),end:Math.round(1e3*c.end),group:e.wrapper("c")+d,content:'<span class="badge badge-inverse">'+c.count+"</span>"+e.secret(angular.toJson({type:"wish",wish:c.count,group:d,groupId:a.aggs[0].id})),className:f,editable:!1}),b=e.addLoading(a,b,[e.wrapper("c")+d])}),b},members:function(a,b,c,d){var e=this,f=this.get.members();return a.members.sort(function(a,b){var c=a.lastName.toLowerCase(),d=b.lastName.toLowerCase();return d>c?-1:c>d?1:0}),angular.forEach(a.members,function(g){var h=1==d?e.wrapper("d-"+g.lastName[0].toLowerCase())+'<a href="#/profile/'+g.id+'#timeline">'+f[g.id]+"</a>":e.wrapper("d-"+g.lastName[0].toLowerCase())+f[g.id];angular.forEach(g.data,function(a){angular.forEach(c.legenda,function(d,f){a.text==f&&d&&b.push({start:Math.round(1e3*a.start),end:Math.round(1e3*a.end),group:h,content:e.secret(angular.toJson({type:"member",id:a.id,mid:g.id,recursive:a.recursive,state:a.text})),className:c.states[a.text].className,editable:!1})})}),b.push({start:0,end:0,group:h,content:null,className:null,editable:!1}),b=e.addLoading(a,b,[h]),angular.forEach(g.stats,function(a){var b=a.state.split(".");b.reverse(),a.state=a.state.match(/bar-(.*)/)?a.state:"bar-"+b[0]})}),b},pies:function(b,c){var d=this;angular.forEach(d.filtered(b,c),function(b){var c;c=a.config.timeline.config.divisions.length>0?b.division.id:"",$.browser.msie&&"8.0"==$.browser.version?$("#groupPie-"+c).html(""):document.getElementById("groupPie-"+c).innerHTML="";var d=[],e={more:"#415e6b",even:"#ba6a24",less:"#a0a0a0"},f=[],g=[];angular.forEach(b.ratios,function(a,b){0!=a&&d.push({ratio:a,color:e[b]})}),d=d.sort(function(a,b){return b.ratio-a.ratio}),angular.forEach(d,function(a){f.push(a.color),g.push(a.ratio)});{var h=Raphael("groupPie-"+c);h.piechart(120,120,100,g,{colors:f})}})},filtered:function(a,b){var c=[];return"all"==b.division?c=a.aggs:angular.forEach(a.aggs,function(a){b.division==a.division.id&&c.push(a)}),c},process:function(a,b,c,d,e){var f=this,g=[];return a.user&&(g=f.user(a,g,b)),a.aggs&&(g=b.bar?f.bars(a,g,b,d,e):f.aggs(a,g,b,d,e)),b.wishes&&a.aggs&&(g=f.wishes(a,g,d)),a.members&&(g=f.members(a,g,b,d)),a.aggs&&setTimeout(function(){f.pies(a,e)},100),g}}}]),angular.module("WebPaige.Services.Stats",["ngResource"]).factory("Stats",["$rootScope","Storage",function(){return{aggs:function(a){var b={less:0,even:0,more:0},c={less:0,even:0,more:0,total:0},d=a.length;return angular.forEach(a,function(a){a.diff<0?b.less++:0==a.diff?b.even++:b.more++;var d=a.end-a.start;a.diff<0?c.less=c.less+d:0==a.diff?c.even=c.even+d:c.more=c.more+d,c.total=c.total+d}),{ratios:{less:Math.round(b.less/d*100),even:Math.round(b.even/d*100),more:Math.round(b.more/d*100)},durations:c}
},pies:function(a){var b={less:0,even:0,more:0},c=a.length;return angular.forEach(a,function(a){a.diff<0?b.less++:0==a.diff?b.even++:b.more++}),{less:Math.round(b.less/c*100),even:Math.round(b.even/c*100),more:Math.round(b.more/c*100)}},member:function(a){var b={},c=0;angular.forEach(a,function(a){b[a.text]?b[a.text]++:b[a.text]=1,c++});var d=[];return angular.forEach(b,function(a,b){d.push({state:b,ratio:a/c*100})}),d}}}]),angular.module("WebPaige.Services.Offsetter",["ngResource"]).factory("Offsetter",["$rootScope",function(){var a={factory:function(a){var b=86400,c=3600,d=60,e=1*Math.abs(Number(Date.today().getUTCOffset()))/100*c,f=[];angular.forEach(a,function(a){var g,h=0,i=0,j=0;a+=e,i=a%b,h=a-i,j=a%c;var k={days:Math.floor(h/b),hours:Math.floor(i/c),minutes:Math.floor(j/d)};switch(g={value:a,exact:a%b,mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1,hour:k.hours,minute:k.minutes},k.hours<10&&(k.hours="0"+k.hours),k.minutes<10&&(k.minutes="0"+k.minutes),g.time=k.hours+":"+k.minutes,k.days){case 1:g.mon=!0;break;case 2:g.tue=!0;break;case 3:g.wed=!0;break;case 4:g.thu=!0;break;case 5:g.fri=!0;break;case 6:g.sat=!0;break;case 7:g.sun=!0}f.push(g)});var g={};return angular.forEach(f,function(a){g[a.exact]=g[a.exact]||{},g[a.exact].hour=a.hour,g[a.exact].minute=a.minute,g[a.exact].time=a.time,g[a.exact].exact=a.exact,g[a.exact].mon=g[a.exact].mon?g[a.exact].mon:a.mon,g[a.exact].tue=g[a.exact].tue?g[a.exact].tue:a.tue,g[a.exact].wed=g[a.exact].wed?g[a.exact].wed:a.wed,g[a.exact].thu=g[a.exact].thu?g[a.exact].thu:a.thu,g[a.exact].fri=g[a.exact].fri?g[a.exact].fri:a.fri,g[a.exact].sat=g[a.exact].sat?g[a.exact].sat:a.sat,g[a.exact].sun=g[a.exact].sun?g[a.exact].sun:a.sun}),g},arrayed:function(a){var b=86400,c=3600,d=60,e=[];return angular.forEach(a,function(a){var f=-1*Math.abs(Number(Date.today().getUTCOffset()))/100,g=(Number(a.hour)+f)*c,h=Number(a.minute)*d,i=g+h;a.mon&&e.push(i+b),a.tue&&e.push(i+2*b),a.wed&&e.push(i+3*b),a.thu&&e.push(i+4*b),a.fri&&e.push(i+5*b),a.sat&&e.push(i+6*b),a.sun&&e.push(i+7*b)}),e}};return{factory:a.factory,arrayed:a.arrayed}}]),angular.module("WebPaige.Filters",["ngResource"]).filter("convertToDateObj",[function(){return function(a){return Date(a)}}]).filter("translateRole",["$config",function(a){return function(b){var c;return angular.forEach(a.roles,function(a){a.id==b&&(c=a.label)}),c}}]).filter("translateDivision",["$config",function(a){return function(b){var c;return angular.forEach(a.timeline.config.divisions,function(a){a.id==b&&(c=a.label)}),c}}]).filter("rangeMainFilter",["Dater",function(a){var b=a.getPeriods();return function(c){new Date(c.end).getTime()-new Date(c.start).getTime()==86401e3&&(c.start=new Date(c.end).addDays(-1));var d=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},e={start:{real:d(a.translateToDutch(new Date(c.start).toString("dddd d MMMM"))),month:d(a.translateToDutch(new Date(c.start).toString("MMMM"))),day:d(a.translateToDutch(new Date(c.start).toString("d"))),year:new Date(c.start).toString("yyyy")},end:{real:d(a.translateToDutch(new Date(c.end).toString("dddd d MMMM"))),month:d(a.translateToDutch(new Date(c.end).toString("MMMM"))),day:d(a.translateToDutch(new Date(c.end).toString("d"))),year:new Date(c.end).toString("yyyy")}},c={start:{real:new Date(c.start).toString("dddd d MMMM"),month:new Date(c.start).toString("MMMM"),day:new Date(c.start).toString("d")},end:{real:new Date(c.end).toString("dddd d MMMM"),month:new Date(c.end).toString("MMMM"),day:new Date(c.end).toString("d")}},f=Date.getMonthNumberFromName(c.start.month);return(Math.round(c.start.day)+1==c.end.day&&c.start.hour==c.end.hour||c.start.day==c.end.day)&&c.start.month==c.end.month?e.start.real+", "+e.start.year:1==c.start.day&&c.end.day==b.months[f+1].totalDays?e.start.month+", "+e.start.year:e.start.real+", "+e.start.year+" / "+e.end.real+", "+e.end.year}}]).filter("rangeMainWeekFilter",["Dater",function(a){return function(b){if(b){var c=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},d={start:c(a.translateToDutch(new Date(b.start).toString("dddd d MMMM"))),end:c(a.translateToDutch(new Date(b.end).toString("dddd d MMMM")))};return d.start+" / "+d.end+", "+a.getThisYear()}return!1}}]).filter("rangeInfoFilter",["$rootScope","Dater","Storage",function(a,b){var c=b.getPeriods();return function(b){var d=new Date(b.range.end).getTime()-new Date(b.range.start).getTime();if(d>26784e5)return a.ui.planboard.rangeInfoTotalSelectedDays+Math.round(d/864e5);if(b.scope.day){var e={start:new Date(b.range.start).toString("HH:mm"),end:new Date(b.range.end).toString("HH:mm")};return"00:00"==e.end&&(e.end="24:00"),a.ui.planboard.rangeInfoTime+e.start+" / "+e.end}return b.scope.week?a.ui.planboard.rangeInfoWeekNumber+b.current.week:b.scope.month?a.ui.planboard.rangeInfoMonth+b.current.month+a.ui.planboard.rangeInfoTotalDays+c.months[b.current.month].totalDays:void 0}}]).filter("rangeInfoWeekFilter",["$rootScope","Dater","Storage",function(a,b){b.getPeriods();return function(b){return b?a.ui.planboard.rangeInfoWeekNumber+b.current.week:void 0}}]).filter("convertRatios",["$config",function(){return function(a){var b="";return angular.forEach(a,function(a){var c=a.state.replace(/^bar-+/,"");"Available"==c&&(c="Beschikbaar"),"Unavailable"==c&&(c="Niet Beschikbaar"),"SchipperVanDienst"==c&&(c="Schipper Van Dienst"),"BeschikbaarNoord"==c&&(c="Beschikbaar Noord"),"BeschikbaarZuid"==c&&(c="Beschikbaar Zuid"),"Unreached"==c&&(c="Niet Bereikt"),b+=a.ratio.toFixed(1)+"% "+c+", "}),b.substring(0,b.length-2)}}]).filter("calculateTimeInDays",function(){return function(a){var b=864e5,c=0,d=0,a=1e3*a,d=a%b,c=a-d;return Math.floor(c/b)}}).filter("calculateTimeInHours",function(){return function(a){var b=864e5,c=36e5,d=0,a=1e3*a,d=a%b;return Math.floor(d/c)}}).filter("calculateTimeInMinutes",function(){return function(a){var b=36e5,c=6e4,d=0,a=1e3*a,d=a%b;return Math.floor(d/c)}}).filter("convertEve",["$config",function(a){return function(b){if(a.profile.smartAlarm)return b;var c=b;return c="undefined"!=typeof b?b.split("/"):["",b,""],c[c.length-2]}}]).filter("convertUserIdToName",["Storage",function(a){var b=angular.fromJson(a.get("members"));return function(a){return null==b||"undefined"==typeof b[a]?a:b[a].name}}]).filter("nicelyDate",["$rootScope",function(a){return function(b){return"string"==typeof b&&(b=Number(b)),new Date(b).toString(a.config.formats.datetimefull)}}]).filter("convertTimeStamp",function(){return function(a){return console.warn(typeof a),new Date(a).toString("dd-MM-yyyy HH:mm")}}).filter("noTitle",function(){return function(a){return""==a?"- No Title -":a}}).filter("stripSpan",function(){return function(a){return a.match(/<span class="label">(.*)<\/span>/)}}).filter("stripHtml",function(){return function(a){return a?a.split(">")[1].split("<")[0]:void 0}}).filter("groupIdToName",["Storage",function(a){return function(b){var c=angular.fromJson(a.get("groups"));for(var d in c)if(c[d].uuid==b)return c[d].name}}]).filter("i18n_spec",["$rootScope",function(a){return function(b,c){var d=c.split("."),e=a.ui[d[0]][d[1]],e=e.replace("$v",b);return e}}]).filter("truncateGroupTitle",["Strings",function(a){return function(b){return a.truncate(b,20,!0)}}]).filter("toTitleCase",["Strings",function(a){return function(b){return a.toTitleCase(b)}}]).filter("countBox",function(){return function(a){var b=0;return angular.forEach(a,function(a){b+=a.length}),b}}).filter("nicelyOffsets",["Dater","Storage","Offsetter",function(a,b,c){return function(a){var b=c.factory(a),d="";return angular.forEach(b,function(a){d+='<div style="display:block; margin-bottom: 5px;">',d+='<span class="badge">'+a.time+"</span>&nbsp;",a.mon&&(d+='<span class="muted"><small><i> maandag,</i></small></span>'),a.tue&&(d+='<span class="muted"><small><i> dinsdag,</i></small></span>'),a.wed&&(d+='<span class="muted"><small><i> woensdag,</i></small></span>'),a.thu&&(d+='<span class="muted"><small><i> donderdag,</i></small></span>'),a.fri&&(d+='<span class="muted"><small><i> vrijdag,</i></small></span>'),a.sat&&(d+='<span class="muted"><small><i> zaterdag,</i></small></span>'),a.sun&&(d+='<span class="muted"><small><i> zondag,</i></small></span>'),d=d.substring(0,d.length-20),d=d+="</i></small></span>",d+="</div>",d=d.substring(0,d.length)}),d}}]).filter("nicelyAudience",["Storage",function(a){return function(b){if(b){var c=angular.fromJson(a.get("members")),d=angular.fromJson(a.get("groups")),e=[];return angular.forEach(b,function(a){var b;c[a]?b=c[a].name:angular.forEach(d,function(c){c.uuid==a&&(b=c.name)}),e+=b+", "}),e.substring(0,e.length-2)}}}]),angular.module("WebPaige.Controllers.Login",[]).controller("login",["$rootScope","$location","$q","$scope","Session","User","Groups","Messages","Storage","$routeParams","Settings","Profile","MD5",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){o.progress(100,a.ui.login.loading_everything),o.redirectToDashboard(),o.getMessages(),o.getMembers()}var o=this;j.uuid&&j.key?(d.views={changePass:!0},d.changepass={uuid:j.uuid,key:j.key}):d.views={login:!0,forgot:!1},a.config.demo_users&&demo_users.length>0&&(d.demo_users=demo_users),d.knrmLogin=function(b){$("#login button[type=submit]").text(a.ui.login.button_loggingIn).attr("disabled","disabled"),o.auth(b.uuid,b.resources.askPass)},d.alert={login:{display:!1,type:"",message:""},forgot:{display:!1,type:"",message:""}},i.session.get("app")||i.session.add("app","{}"),$(".navbar").hide(),$("#footer").hide(),$("#watermark").hide(),$("body").css({background:"url(../"+a.config.profile.background+") no-repeat center center fixed",backgroundSize:"cover"});var p=angular.fromJson(i.get("logindata"));p&&p.remember&&(d.logindata=p),d.login=function(){return $("#alertDiv").hide(),d.logindata&&d.logindata.username&&d.logindata.password?($("#login button[type=submit]").text(a.ui.login.button_loggingIn).attr("disabled","disabled"),i.add("logindata",angular.toJson({username:d.logindata.username,password:d.logindata.password,remember:d.logindata.remember})),a.config.smartAlarm&&i.add("guard",angular.toJson({monitor:"",role:""})),o.auth(d.logindata.username,m(d.logindata.password)),void 0):(d.alert={login:{display:!0,type:"alert-error",message:a.ui.login.alert_fillfiled}},$("#login button[type=submit]").text(a.ui.login.button_login).removeAttr("disabled"),!1)},o.auth=function(b,c){f.login(b.toLowerCase(),c).then(function(b){return 400==b.status||404==b.status?(d.alert={login:{display:!0,type:"alert-error",message:a.ui.login.alert_wrongUserPass}},$("#login button[type=submit]").text(a.ui.login.button_login).removeAttr("disabled"),!1):(e.set(b["X-SESSION_ID"]),o.preloader(),void 0)})},o.preloader=function(){$("#login").hide(),$("#download").hide(),$("#preloader").show(),o.progress(30,a.ui.login.loading_User),f.states().then(function(b){i.add("states",angular.toJson(b)),angular.forEach(b,function(b){a.config.timeline.config.states[b]=a.config.statesall[b]}),f.divisions().then(function(b){a.config.timeline.config.divisions=b,i.add("divisions",angular.toJson(b)),f.resources().then(function(b){b.error?console.warn("error ->",b):(a.app.resources=b,o.progress(70,a.ui.login.loading_Group),g.query(!0).then(function(c){if(c.error)console.warn("error ->",c);else{var d=angular.fromJson(b.settingsWebPaige)||{},e=!1,h=!1,i=a.config.defaults.settingsWebPaige,j=function(a){var b={};return angular.forEach(a,function(a){b[a.uuid]={status:!0,divisions:!1}}),b};if(null!=d||void 0!=d)if(d.user?d.user.language?(a.changeLanguage(angular.fromJson(b.settingsWebPaige).user.language),i.user.language=d.user.language):(a.changeLanguage(a.config.defaults.settingsWebPaige.user.language),e=!0):e=!0,d.app){if(d.app.widgets)if(d.app.widgets.groups){var l=!1;jQuery.isEmptyObject(d.app.widgets.groups)?l=!0:angular.forEach(d.app.widgets.groups,function(a){("object"!=typeof a||a=={})&&(l=!0)}),l?(i.app.widgets.groups=j(c),e=!0):i.app.widgets.groups=d.app.widgets.groups}else console.warn("user has NO app widgets groups!!"),i.app.widgets.groups=j(c),e=!0;else i.app.widgets={groups:j(c)},e=!0;d.app.group&&void 0!=d.app.group?i.app.group=d.app.group:(h=!0,e=!0)}else i.app={widgets:{groups:j(c)}},e=!0;else i={user:a.config.defaults.settingsWebPaige.user,app:{widgets:{groups:j(c)},group:c[0].uuid}},e=!0;e?h?g.parents().then(function(d){i.app.group=null!=d?d:c[0].uuid,k.save(b.uuid,i).then(function(){f.resources().then(function(b){a.app.resources=b,n()})})}):(i.app.group=c[0].uuid,k.save(b.uuid,i).then(function(){f.resources().then(function(b){a.app.resources=b,n()})})):(ga("send","pageview",{dimension1:b.uuid}),ga("send","event","Login",b.uuid),n())}}))})})})},o.getMembers=function(){g.query().then(function(a){var b=[];angular.forEach(a,function(a){b.push(g.get(a.uuid))}),c.all(b).then(function(){g.uniqueMembers()})})},o.getMessages=function(){h.query().then(function(b){b.error?console.warn("error ->",b):(a.app.unreadMessages=h.unreadCount(),i.session.unreadMessages=h.unreadCount())})},o.redirectToDashboard=function(){b.path("/dashboard"),setTimeout(function(){$("body").css({background:"none"}),$(".navbar").show(),a.browser.mobile||$("#footer").show(),$("#watermark").show(),$("body").css({background:"url(../img/bg.jpg) repeat"})},100)},o.progress=function(a,b){$("#preloader .progress .bar").css({width:a+"%"}),$("#preloader span").text(b)},d.forgot=function(){$("#forgot button[type=submit]").text(a.ui.login.setting).attr("disabled","disabled"),f.password(d.remember.id).then(function(b){d.alert="ok"==b?{forget:{display:!0,type:"alert-success",message:a.ui.login.checkYourMail}}:{forget:{display:!0,type:"alert-error",message:a.ui.errors.login.forgotCantFind}},$("#forgot button[type=submit]").text(a.ui.login.button_changePassword).removeAttr("disabled")})},o.changePass=function(c,e,g){f.changePass(c,e,g).then(function(c){400==c.status||500==c.status||409==c.status?d.alert={changePass:{display:!0,type:"alert-error",message:a.ui.errors.login.changePass}}:(d.alert={changePass:{display:!0,type:"alert-success",message:a.ui.login.passwordChanged}},b.path("/message")),$("#changePass button[type=submit]").text(a.ui.login.button_changePassword).removeAttr("disabled")})},d.changePass=function(){return $("#alertDiv").hide(),d.changeData&&d.changeData.newPass&&d.changeData.retypePass?d.changeData.newPass!=d.changeData.retypePass?(d.alert={changePass:{display:!0,type:"alert-error",message:a.ui.errors.login.changePassNoMatch}},$("#changePass button[type=submit]").text(a.ui.login.button_changePassword).removeAttr("disabled"),!1):($("#changePass button[type=submit]").text(a.ui.login.button_changingPassword).attr("disabled","disabled"),o.changePass(d.changepass.uuid,m(d.changeData.newPass),d.changepass.key),void 0):(d.alert={changePass:{display:!0,type:"alert-error",message:a.ui.errors.login.changePassAllFields}},$("#changePass button[type=submit]").text(a.ui.login.button_changePassword).removeAttr("disabled"),!1)}}]),angular.module("WebPaige.Controllers.Logout",[]).controller("logout",["$rootScope","$scope","$window","Session","User","Storage",function(a,b,c,d,e,f){$(".navbar").hide(),$("#footer").hide();var g=angular.fromJson(f.get("logindata")),h=angular.fromJson(f.get("registeredNotifications"));e.logout().then(function(a){a.error?console.warn("error ->",a):(f.clearAll(),f.session.clearAll(),f.add("logindata",angular.toJson(g)),f.add("registeredNotifications",angular.toJson(h)),c.location.href="logout.html")})}]),angular.module("WebPaige.Controllers.Dashboard",[]).controller("dashboard",["$scope","$rootScope","$q","$window","$location","Dashboard","Slots","Dater","Storage","Settings","Profile","Groups","Announcer","User",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.loadingPies=!0,a.checkAnyPies()?b.statusBar.off():f.pies().then(function(c){a.loadingPies=!1,c.error?(b.notifier.error(b.ui.errors.dashboard.getOverviews),console.warn("error ->",c.error)):(a.shortageHolders={},a.loading.pies=!1,a.periods={start:c[0].weeks.current.start.date,end:c[0].weeks.next.end.date},angular.forEach(c,function(c){c.weeks.current.state instanceof Array&&(c.weeks.current.state=c.weeks.current.state[0]),null===c.weeks.current.state.diff&&(c.weeks.current.state.diff=0),null===c.weeks.current.state.wish&&(c.weeks.current.state.wish=0),c.weeks.current.state.diff>0?c.weeks.current.state.cls="more":0===c.weeks.current.state.diff?c.weeks.current.state.cls="even":c.weeks.current.state.diff<0&&(c.weeks.current.state.cls="less"),c.weeks.current.state.start=void 0!==c.weeks.current.state.start?new Date(1e3*c.weeks.current.state.start).toString(b.config.formats.datetime):"Geen planning",c.weeks.current.state.end=void 0!==c.weeks.current.state.end?new Date(1e3*c.weeks.current.state.end).toString(b.config.formats.datetime):"Geen planning",c.shortages={current:c.weeks.current.shortages,next:c.weeks.next.shortages,total:c.weeks.current.shortages.length+c.weeks.next.shortages.length},c.state=c.weeks.current.state,delete c.weeks.current.shortages,delete c.weeks.current.state,a.shortageHolders["shortages-"+c.id]=!1}),a.pies=c)}).then(function(){function b(a,b,c){setTimeout(function(){$.browser.msie&&"8.0"==$.browser.version?$("#"+a+b).html(""):document.getElementById(a+b)&&(document.getElementById(a+b).innerHTML="");var d=[],e={more:"#415e6b",even:"#ba6a24",less:"#a0a0a0"},f=[],g=[];angular.forEach(c,function(a,b){0!==a&&d.push({ratio:a,color:e[b]})}),d=d.sort(function(a,b){return b.ratio-a.ratio}),angular.forEach(d,function(a){f.push(a.color),g.push(a.ratio)});{var h=new Raphael(a+b);h.piechart(40,40,40,g,{colors:f,stroke:"white"})}},100)}angular.forEach(a.pies,function(a){b("weeklyPieCurrent-",a.id+"-"+a.division,a.weeks.current.ratios),b("weeklyPieNext-",a.id+"-"+a.division,a.weeks.next.ratios)})})}function o(c){var d=angular.fromJson(i.get("guard"));a.saMembers={truck:[],reserves:[]},a.saSynced=d.synced,angular.forEach(c.selection,function(d){function e(a){return null!==a?c.users[a].name:"Niet ingedeeld"}switch(d.role){case"bevelvoerder":a.saMembers.truck.push({rank:1,icon:"B",role:"Bevelvoerder","class":"sa-icon-commander",name:e(d.user)});break;case"chauffeur":a.saMembers.truck.push({rank:0,icon:"C",role:"Chauffeur","class":"sa-icon-driver",name:e(d.user)});break;case"manschap.1":a.saMembers.truck.push({rank:2,icon:"M1",role:"Manschap 1",name:e(d.user)});break;case"manschap.2":a.saMembers.truck.push({rank:3,icon:"M2",role:"Manschap 2",name:e(d.user)});break;case"manschap.3":a.saMembers.truck.push({rank:4,icon:"M3",role:"Manschap 3",name:e(d.user)});break;case"manschap.4":a.saMembers.truck.push({rank:5,icon:"M4",role:"Manschap 4",name:e(d.user)})}b.app.guard.role=c.role,c.users[b.app.resources.uuid]?b.app.guard.currentState=c.users[b.app.resources.uuid].state:g.currentState().then(function(a){b.app.guard.currentState=a.label});var f={},h=["available","unavailable","noplanning"];angular.forEach(h,function(a){f[a]=[],angular.forEach(c.reserves[a],function(b){angular.forEach(b,function(b,c){f[a].push({id:c,name:b.name,state:b.state})})})}),a.saMembers.reserves=f,a.loading.smartAlarm=!1})}b.notification.status=!1,b.fixStyles(),a.loading={pies:!0,alerts:!0,smartAlarm:!0},a.more={status:!1,text:b.ui.dashboard.showMore},a.synced={alarms:(new Date).getTime(),pies:(new Date).getTime()};var p=i.local.groups(),q={};angular.forEach(i.local.settings().app.widgets.groups,function(a,b){q[b]=a}),angular.forEach(p,function(a){q[a.uuid]||(q[a.uuid]={divisions:!!(b.config.timeline.config.divisions.length>0),status:!1})}),a.popover={groups:p,selection:q,divisions:!!(b.config.timeline.config.divisions.length>0)},a.checkAnyPies=function(){var b=!0;return a.loading.pies=!1,angular.forEach(i.local.settings().app.widgets.groups,function(a){a.status===!0&&(b=!1)}),b},a.loadingPies=!0,n(),b.config.profile.smartAlarm&&(angular.fromJson(i.get("guard")).selection&&(a.loading.smartAlarm=!1,o(angular.fromJson(i.get("guard")))),l.guardMonitor().then(function(){l.guardRole().then(function(a){o(a)})})),a.saveOverviewWidget=function(a){b.statusBar.display(b.ui.settings.saving),angular.forEach(a,function(a){a.status||(a.divisions=!1)}),j.save(b.app.resources.uuid,{user:i.local.settings().user,app:{group:i.local.settings().app.group,widgets:{groups:a}}}).then(function(){b.statusBar.display(b.ui.dashboard.refreshGroupOverviews),k.get(b.app.resources.uuid,!0).then(function(){n()})})},a.getP2000=function(){f.p2000().then(function(b){a.loading.alerts=!1,a.alarms=b.alarms,a.alarms.list=a.alarms.short,a.synced.alarms=b.synced})},b.alarmSync={start:function(){d.planboardSync=d.setInterval(function(){"/dashboard"==e.path()&&(a.$apply(),a.getP2000(),b.config.profile.smartAlarm&&(angular.fromJson(i.get("guard").selection)&&o(angular.fromJson(i.get("guard"))),l.guardRole().then(function(a){o(a)})))},6e4)},clear:function(){d.clearInterval(d.alarmSync)}},b.alarmSync.start(),a.toggle=function(c){a.alarms.list=c?a.alarms.short:a.alarms.long,a.more.text=c?b.ui.dashboard.showMore:b.ui.dashboard.showLess,a.more.status=!a.more.status},a.fixPopoverPos=function(){setTimeout(function(){var a=$("#dashboard .span9").css("width"),b=$("#dashboard .popover").css("width");$(".popover").css({top:$("#dashboardPopoverBtn").css("top"),left:a.substring(0,a.length-2)-b.substring(0,b.length-2)/2+4+"px"})},100)},b.config.profile.smartAlarm?$.ajax({url:b.config.profile.p2000.url,dataType:"json",success:function(c){b.statusBar.off();var d=m.process(c,!0),e={alarms:d,synced:(new Date).getTime()};a.$apply(function(){a.loading.alerts=!1,a.alarms=e.alarms,a.alarms.list=a.alarms.short,a.synced.alarms=e.synced})},error:function(){console.log("ERROR with getting p2000 for the first time!")}}):f.getCapcodes().then(function(c){var d="";c=c.sort(),angular.forEach(c,function(a){d+=a+", "}),a.capcodes=d.substring(0,d.length-2),$.ajax({url:b.config.profile.p2000.url+"?code="+c,dataType:"jsonp",success:function(c){b.statusBar.off();var d=m.process(c),e={alarms:d,synced:(new Date).getTime()};a.$apply(function(){a.loading.alerts=!1,a.alarms=e.alarms,a.alarms.list=a.alarms.short,a.synced.alarms=e.synced})},error:function(){console.log("ERROR with getting p2000 for the first time!")}})}),a.setPrefixedAvailability=function(a,b){i.session.add("setPrefixedAvailability",angular.toJson({availability:a,period:b})),e.path("/planboard").search({setPrefixedAvailability:!0})}}]),angular.module("WebPaige.Controllers.TV",[]).controller("tv",["$scope","$rootScope","$q","$window","$location","Dashboard","Dater","Storage","Settings","Profile","Groups","Announcer",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){var c=angular.fromJson(h.get("guard"));a.saMembers={truck:[],reserves:[]},a.saSynced=c.synced,angular.forEach(b.selection,function(c){function d(a){return null!==a?b.users[a].name:"Niet ingedeeld"}switch(c.role){case"bevelvoerder":a.saMembers.truck.push({rank:1,icon:"B",role:"Bevelvoerder","class":"sa-icon-commander",name:d(c.user)});break;case"chauffeur":a.saMembers.truck.push({rank:0,icon:"C",role:"Chauffeur","class":"sa-icon-driver",name:d(c.user)});break;case"manschap.1":a.saMembers.truck.push({rank:2,icon:"M1",role:"Manschap 1",name:d(c.user)});break;case"manschap.2":a.saMembers.truck.push({rank:3,icon:"M2",role:"Manschap 2",name:d(c.user)});break;case"manschap.3":a.saMembers.truck.push({rank:4,icon:"M3",role:"Manschap 3",name:d(c.user)});break;case"manschap.4":a.saMembers.truck.push({rank:5,icon:"M4",role:"Manschap 4",name:d(c.user)})}var e={},f=["available","unavailable","noplanning"];angular.forEach(f,function(a){e[a]=[],angular.forEach(b.reserves[a],function(b){angular.forEach(b,function(b,c){e[a].push({id:c,name:b.name,state:b.state})})})}),a.saMembers.reserves=e,a.loading.smartAlarm=!1})}b.notifier.destroy(),b.fixStyles(),$(".navbar").hide(),$("#footer").hide(),$("#watermark").css({bottom:"-10px"}),a.loading={alerts:!0,smartAlarm:!0},a.synced={alarms:(new Date).getTime()},k.query().then(function(b){var d=[];angular.forEach(b,function(a){d.push(k.get(a.uuid))}),c.all(d).then(function(){k.uniqueMembers();var b=angular.fromJson(h.get("guard"));b&&b.selection&&(a.loading.smartAlarm=!1,m(angular.fromJson(h.get("guard")))),k.guardMonitor().then(function(){k.guardRole().then(function(a){m(a)})})})}),a.getP2000=function(){f.p2000().then(function(b){a.loading.alerts=!1,a.alarms=b.alarms,a.alarms.list=a.alarms.short,a.synced.alarms=b.synced})},d.setInterval(function(){a.$apply(),a.getP2000();var b=angular.fromJson(h.get("guard"));b&&b.selection&&m(angular.fromJson(h.get("guard"))),k.guardRole().then(function(a){m(a)})},6e4),$.ajax({url:b.config.profile.p2000.url,dataType:"json",success:function(c){b.statusBar.off();var d=l.process(c,!0),e={alarms:d,synced:(new Date).getTime()};a.$apply(function(){a.loading.alerts=!1,a.alarms=e.alarms,a.alarms.list=a.alarms.short,a.synced.alarms=e.synced})},error:function(){console.log("ERROR with getting p2000 for the first time!")}})}]),angular.module("WebPaige.Controllers.Planboard",[]).controller("planboard",["$rootScope","$scope","$q","$window","$location","data","Slots","Dater","Storage",function(a,b,c,d,e,f,g,h,i){a.notification.status=!1,a.fixStyles(),b.self=this,b.data=f;var j=i.local.groups(),k=i.local.settings();b.current={layouts:{user:!0,group:!0,members:!1},day:h.current.today(),week:h.current.week(),month:h.current.month(),year:h.current.year(),group:k.app.group,division:"all"},b.periods=h.getPeriods(),b.periodsNext=h.getPeriods(!0),b.slot={};var l={};l=h.current.today()>360?{start:b.periods.days[358].last.timeStamp,end:b.periods.days[365].last.timeStamp}:{start:b.periods.days[h.current.today()-1].last.timeStamp,end:b.periods.days[h.current.today()+6].last.timeStamp},b.timeline={id:"mainTimeline",main:!0,user:{id:a.app.resources.uuid,role:a.app.resources.role},current:b.current,options:{start:l.start,end:l.end,min:l.start,max:l.end},range:{start:l.start,end:l.end},scope:{day:!1,week:!0,month:!1},config:{bar:a.config.timeline.config.bar,layouts:a.config.timeline.config.layouts,wishes:a.config.timeline.config.wishes,legenda:{},legendarer:a.config.timeline.config.legendarer,states:a.config.timeline.config.states,divisions:a.config.timeline.config.divisions,densities:a.config.timeline.config.densities}},$.browser.msie&&"8.0"==$.browser.version&&(b.timeline.options={start:b.periods.days[h.current.today()].last.timeStamp,end:b.periods.days[h.current.today()+7].last.timeStamp,min:b.periods.days[h.current.today()].last.timeStamp,max:b.periods.days[h.current.today()+7].last.timeStamp}),angular.forEach(a.config.timeline.config.states,function(a,c){b.timeline.config.legenda[c]=!0}),b.timeline.config.legenda.groups={more:!0,even:!0,less:!0},b.daterange=h.readable.date(b.timeline.range.start)+" / "+h.readable.date(b.timeline.range.end);var m={};angular.forEach(b.timeline.config.states,function(a,b){a.display&&(m[b]=a.label)}),b.states=m,b.groups=j,b.divisions=b.timeline.config.divisions,b.timeline.config.divisions.length>0&&("all"!==b.divisions[0].id&&b.divisions.unshift({id:"all",label:"Alle divisies"}),b.groupPieHide={},angular.forEach(b.divisions,function(a){b.groupPieHide[a.id]=!1})),b.resetViews=function(){b.views={slot:{add:!1,edit:!1},group:!1,wish:!1,member:!1}},b.resetViews(),a.$on("resetPlanboardViews",function(){b.resetViews()}),b.toggleSlotForm=function(){b.views.slot.add?(a.planboardSync.start(),b.resetInlineForms()):(a.planboardSync.clear(),a.$broadcast("slotInitials"),b.resetViews(),b.views.slot.add=!0)},b.resetInlineForms=function(){b.slot={},b.original={},b.resetViews()},b.sendShortageMessage=function(b){a.statusBar.display(a.ui.planboard.preCompilingStortageMessage),i.session.add("escalation",angular.toJson({group:b.group,start:{date:b.start.date,time:b.start.time},end:{date:b.end.date,time:b.end.time},diff:b.diff})),e.path("/messages").search({escalate:!0}).hash("compose")}}]),angular.module("WebPaige.Controllers.Timeline",[]).controller("timeline",["$rootScope","$scope","$q","$location","$route","$window","Slots","Dater","Storage","Sloter","Profile",function(a,b,c,d,e,f,g,h,i,j,k){function l(){b.timeline.current.layouts.group&&(a.statusBar.display(a.ui.message.getWishes),g.wishes({id:b.timeline.current.group,start:b.data.periods.start/1e3,end:b.data.periods.end/1e3}).then(function(c){a.statusBar.off(),b.data.aggs.wishes=c,b.timeliner.render({start:b.timeline.range.start,end:b.timeline.range.end},!0)}))}var m;if(b.$watch(function(){if(b.timeline&&b.timeline.main){m=b.self.timeline.getVisibleChartRange();var c={hour:36e5,day:864e5,week:6048e5};f=h.calculate.diff(m)-c.hour,b.timeline.scope=f<=c.day?{day:!0,week:!1,month:!1}:f<=c.week?{day:!1,week:!0,month:!1}:{day:!1,week:!1,month:!0},b.timeline.range={start:new Date(m.start).toString(),end:new Date(m.end).toString()},b.daterange=h.readable.date(b.timeline.range.start)+" / "+h.readable.date(b.timeline.range.end)}else e.current.params.userId!=a.app.resources.uuid&&b.self.timeline&&(m=b.self.timeline.getVisibleChartRange(),b.timeline.range={start:new Date(m.start).toString(),end:new Date(m.end).toString()});if(b.timeline){var d=new Date(Number(h.current.year())+1,11).moveToLastDayOfMonth().addDays(1),f=d-new Date(m.end);if(0>=f)$("#timelineAfterBtn").attr("disabled","disabled");else if(b.timeline.current.year==h.current.year()&&(b.timeline.scope.month&&1===b.timeline.current.month||b.timeline.scope.week&&1===b.timeline.current.week&&12!=b.timeline.current.month||b.timeline.scope.day&&1===b.timeline.current.day))$("#timelineBeforeBtn").attr("disabled","disabled");else{var g=$("#timelineBeforeBtn"),i=$("#timelineAfterBtn"),j=g.attr("disabled"),k=i.attr("disabled");"undefined"!=typeof j&&j!==!1&&g.removeAttr("disabled"),"undefined"!=typeof k&&k!==!1&&i.removeAttr("disabled")}}}),a.$on("slotInitials",function(){b.slot={},b.slot={start:{date:(new Date).toString(a.config.formats.date),time:(new Date).toString(a.config.formats.time),datetime:(new Date).toString("yyyy-MM-ddTHH:mm:ss")},end:{date:(new Date).toString(a.config.formats.date),time:(new Date).addHours(1).toString("HH:00"),datetime:(new Date).addHours(1).toString("yyyy-MM-ddTHH:00:00")},state:"com.ask-cs.State.Available",recursive:!1,id:""},console.log("slot initials ->",b.slot)}),b.timeliner={init:function(){b.self.timeline=new links.Timeline(document.getElementById(b.timeline.id)),links.events.addListener(b.self.timeline,"rangechanged",this.getRange),links.events.addListener(b.self.timeline,"add",this.onAdd),links.events.addListener(b.self.timeline,"delete",this.onRemove),links.events.addListener(b.self.timeline,"change",this.onChange),links.events.addListener(b.self.timeline,"select",this.onSelect),this.render(b.timeline.options)},getRange:function(){b.timelineGetRange()},onAdd:function(){b.timelineOnAdd()},onRemove:function(){b.timelineOnRemove()},onChange:function(){b.timelineChanging()},onSelect:function(){b.timelineOnSelect()},render:function(c,e){var f,g;if(b.timeline.range?(typeof b.timeline.range.start!=Date&&(b.timeline.range.start=new Date(b.timeline.range.start)),typeof b.timeline.range.end!=Date&&(b.timeline.range.end=new Date(b.timeline.range.end)),f=b.timeline.range.start,g=b.timeline.range.end):(f=new Date(c.start),g=new Date(c.end)),b.timeline={id:b.timeline.id,main:b.timeline.main,user:b.timeline.user,current:b.timeline.current,scope:b.timeline.scope,config:b.timeline.config,options:{start:e?f:new Date(c.start),end:e?g:new Date(c.end),min:new Date(c.start),max:new Date(c.end)}},$.browser.msie&&"8.0"==$.browser.version&&(b.timeline.options.start=new Date(c.start),b.timeline.options.end=new Date(c.end)),angular.extend(b.timeline.options,a.config.timeline.options),b.timeline.main)b.self.timeline.draw(j.process(b.data,b.timeline.config,b.divisions,b.timeline.user.role,b.timeline.current),b.timeline.options);else{var h="timeline"==d.hash()?100:2e3;a.timelineLoaded=!1,setTimeout(function(){a.timelineLoaded=!0,a.$apply(),b.self.timeline.draw(j.profile(b.data.slots.data,b.timeline.config),b.timeline.options)},h)}b.self.timeline.setVisibleChartRange(b.timeline.options.start,b.timeline.options.end)},load:function(c,d){var e=this;a.statusBar.display(a.ui.planboard.refreshTimeline),b.timeline.main?g.all({groupId:b.timeline.current.group,division:b.timeline.current.division,layouts:b.timeline.current.layouts,month:b.timeline.current.month,stamps:c}).then(function(f){f.error?(a.notifier.error(a.ui.errors.timeline.query),console.warn("error ->",f)):(b.data=f,e.render(c,d)),a.statusBar.off(),b.timeline.config.wishes&&l()
}):k.getSlots(b.timeline.user.id,c).then(function(f){f.error?(a.notifier.error(a.ui.errors.timeline.query),console.warn("error ->",f)):(f.user=f.slots.data,b.data=f,e.render(c,d),a.statusBar.off())})},refresh:function(){b.slot={},b.timeline.main?a.$broadcast("resetPlanboardViews"):b.forms={add:!0,edit:!1},this.load({start:b.data.periods.start,end:b.data.periods.end},!0)},redraw:function(){b.self.timeline.redraw()},isAdded:function(){return $(".state-new").length},cancelAdd:function(){b.self.timeline.cancelAdd()}},b.timeline&&b.timeliner.init(),a.$on("timeliner",function(){b.timeliner.load({start:new Date(arguments[1].start).getTime(),end:new Date(arguments[1].end).getTime()})}),b.requestTimeline=function(a){switch(a){case"group":b.timeline.current.layouts.group=!b.timeline.current.layouts.group,b.timeline.current.layouts.members&&!b.timeline.current.layouts.group&&(b.timeline.current.layouts.members=!1);break;case"members":b.timeline.current.layouts.members=!b.timeline.current.layouts.members,b.timeline.current.layouts.members&&!b.timeline.current.layouts.group&&(b.timeline.current.layouts.group=!0)}b.timeliner.load({start:b.data.periods.start,end:b.data.periods.end})},b.timelineGetRange=function(){var a=b.self.timeline.getVisibleChartRange();b.$apply(function(){b.timeline.range={start:new Date(a.from).toString(),end:new Date(a.till).toString()},b.timeline.main&&(b.daterange={start:h.readable.date(new Date(a.start).getTime()),end:h.readable.date(new Date(a.end).getTime())})})},b.selectedSlot=function(){var c;if(b.timeliner.isAdded()>0,c=b.self.timeline.getSelection()[0]){var d=b.self.timeline.getItem(c.row),e=angular.fromJson(d.content.match(/<span class="secret">(.*)<\/span>/)[1])||null;if(b.original={start:d.start,end:d.end,content:{recursive:e.recursive,state:e.state}},b.timeline.main?a.$broadcast("resetPlanboardViews"):b.forms={add:!1,edit:!0},e.type){if(b.timeline.main)switch(e.type){case"slot":b.views.slot.edit=!0;break;case"group":b.views.group=!0;break;case"wish":b.views.wish=!0;break;case"member":b.views.member=!0}if(b.slot={start:{date:new Date(d.start).toString(a.config.formats.date),time:new Date(d.start).toString(a.config.formats.time),datetime:new Date(d.start).toISOString().replace("Z","")},end:{date:new Date(d.end).toString(a.config.formats.date),time:new Date(d.end).toString(a.config.formats.time),datetime:new Date(d.end).toISOString().replace("Z","")},state:e.state,recursive:e.recursive,id:e.id},b.timeline.main)switch(e.type){case"group":b.slot.diff=e.diff,b.slot.group=e.group;break;case"wish":b.slot.wish=e.wish,b.slot.group=e.group,b.slot.groupId=e.groupId;break;case"member":b.slot.member=e.mid}}return d}},b.timelineOnSelect=function(){a.planboardSync.clear(),b.$apply(function(){b.selectedOriginal=b.selectedSlot()})},b.destroy={timeline:function(){},statistics:function(){setTimeout(function(){b.timeliner.redraw()},10)}},b.changeDivision=function(){angular.forEach(b.divisions,function(a){b.groupPieHide[a.id]=!1}),"all"!==b.timeline.current.division&&(b.groupPieHide[b.timeline.current.division]=!0),b.timeliner.render({start:b.timeline.range.start,end:b.timeline.range.end})},b.barCharts=function(){b.timeline.config.bar=!b.timeline.config.bar,b.timeliner.render({start:b.timeline.range.start,end:b.timeline.range.end})},b.groupWishes=function(){b.timeline.config.wishes?(b.timeline.config.wishes=!1,delete b.data.aggs.wishes,b.timeliner.render({start:b.timeline.range.start,end:b.timeline.range.end},!0)):(b.timeline.config.wishes=!0,l())},b.showLegenda=function(){b.timeline.config.legendarer=!b.timeline.config.legendarer},b.alterLegenda=function(a){b.timeline.config.legenda=a,b.timeliner.render({start:b.timeline.range.start,end:b.timeline.range.end})},b.setAvailability=function(c,d){var e=Math.abs(Math.floor(Date.now().getTime()/1e3)),f=3600,h={start:e,end:Number(e+d*f),state:c?"com.ask-cs.State.Available":"com.ask-cs.State.Unavailable"},j={start:h.start,end:h.end,recursive:!1,text:h.state};a.statusBar.display(a.ui.planboard.addTimeSlot),g.add(j,b.timeline.user.id).then(function(c){i.session.remove("setPrefixedAvailability"),a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.add),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.slotAdded),b.timeliner.refresh(),a.planboardSync.start()})},d.search().setPrefixedAvailability){var n=angular.fromJson(i.session.get("setPrefixedAvailability"));b.setAvailability(n.availability,n.period)}b.timelineOnAdd=function(c,d){if(a.planboardSync.clear(),console.log("slot adding values ->",d),c){var e=Date.now().getTime(),f={start:a.browser.mobile?Math.abs(Math.floor(new Date(d.start.datetime).getTime()/1e3)):h.convert.absolute(d.start.date,d.start.time,!0),end:a.browser.mobile?Math.abs(Math.floor(new Date(d.end.datetime).getTime()/1e3)):h.convert.absolute(d.end.date,d.end.time,!0),recursive:d.recursive?!0:!1,text:d.state};1e3*f.start+12e4<e&&0==f.recursive?(a.notifier.error(a.ui.errors.timeline.pastAdding),b.timeliner.refresh()):(a.statusBar.display(a.ui.planboard.addTimeSlot),g.add(f,b.timeline.user.id).then(function(c){a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.add),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.slotAdded),b.timeliner.refresh(),a.planboardSync.start()}))}else{var f=b.self.timeline.getItem(b.self.timeline.getSelection()[0].row);b.timeliner.isAdded()>1&&b.self.timeline.cancelAdd(),b.$apply(function(){b.timeline.main?(a.$broadcast("resetPlanboardViews"),b.views.slot.add=!0):b.forms={add:!0,edit:!1},b.slot={start:{date:new Date(f.start).toString(a.config.formats.date),time:new Date(f.start).toString(a.config.formats.time),datetime:new Date(f.start).toISOString()},end:{date:new Date(f.end).toString(a.config.formats.date),time:new Date(f.end).toString(a.config.formats.time),datetime:new Date(f.end).toISOString()},recursive:f.group.match(/recursive/)?!0:!1,state:"com.ask-cs.State.Available"}})}},b.timelineChanging=function(){a.planboardSync.clear();var c=b.self.timeline.getItem(b.self.timeline.getSelection()[0].row),d={start:c.start,end:c.end,content:angular.fromJson(c.content.match(/<span class="secret">(.*)<\/span>/)[1])};b.$apply(function(){b.slot={start:{date:new Date(c.start).toString(a.config.formats.date),time:new Date(c.start).toString(a.config.formats.time),datetime:new Date(c.start).toISOString()},end:{date:new Date(c.end).toString(a.config.formats.date),time:new Date(c.end).toString(a.config.formats.time),datetime:new Date(c.end).toISOString()},state:d.content.state,recursive:d.content.recursive,id:d.content.id}})},b.timelineOnChange=function(c,d,e,f){if(a.planboardSync.clear(),c)f={start:a.browser.mobile?new Date(e.start.datetime).getTime():h.convert.absolute(e.start.date,e.start.time,!1),end:a.browser.mobile?new Date(e.end.datetime).getTime():h.convert.absolute(e.end.date,e.end.time,!1),content:{recursive:e.recursive,state:e.state}};else{var i=b.self.timeline.getItem(b.self.timeline.getSelection()[0].row);f={start:i.start,end:i.end,content:angular.fromJson(i.content.match(/<span class="secret">(.*)<\/span>/)[1])}}var j=function(a,b){var c=Date.now().getTime();return a==b?!0:c>a?!1:b>=c};0==f.content.recursive&&new Date(b.original.start).getTime()<f.start&&new Date(b.original.end).getTime()<f.end&&b.original.start<Date.now().getTime()?g.change(b.original,{start:new Date(b.original.start).getTime(),end:Date.now().getTime(),content:{recursive:e.recursive,state:e.state}},b.timeline.user.id).then(function(c){a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.change),console.warn("error ->",c)):g.add({start:f.start/1e3,end:f.end/1e3,recursive:e.recursive?!0:!1,text:e.state},b.timeline.user.id).then(function(c){a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.add),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.slotChanged),b.timeliner.refresh(),a.planboardSync.start()})}):1==f.content.recursive||j(new Date(b.original.start).getTime(),f.start)&&j(new Date(b.original.end).getTime(),f.end)?(a.statusBar.display(a.ui.planboard.changingSlot),g.change(b.original,f,b.timeline.user.id).then(function(c){a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.change),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.slotChanged),b.timeliner.refresh(),a.planboardSync.start()})):(console.log("->",a.ui.errors),a.notifier.error(a.ui.errors.timeline.pastChanging),b.timeliner.refresh())},b.timelineOnRemove=function(){if(a.planboardSync.clear(),b.timeliner.isAdded()>0)b.self.timeline.cancelAdd(),b.$apply(function(){b.resetInlineForms()});else{var c=Date.now().getTime();b.original.end.getTime()<=c&&0==b.original.content.recursive?(a.notifier.error(a.ui.errors.timeline.pastDeleting),b.timeliner.refresh()):(a.statusBar.display(a.ui.planboard.deletingTimeslot),g.remove(b.original,b.timeline.user.id).then(function(c){a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.remove),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.timeslotDeleted),b.timeliner.refresh(),a.planboardSync.start()}))}},b.wisher=function(c){a.statusBar.display(a.ui.planboard.changingWish),g.setWish({id:c.groupId,start:a.browser.mobile?new Date(c.start.datetime).getTime()/1e3:h.convert.absolute(c.start.date,c.start.time,!0),end:a.browser.mobile?new Date(c.end.datetime).getTime()/1e3:h.convert.absolute(c.end.date,c.end.time,!0),recursive:!1,wish:c.wish}).then(function(c){a.$broadcast("resetPlanboardViews"),c.error?(a.notifier.error(a.ui.errors.timeline.wisher),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.wishChanged),b.timeliner.refresh()})},b.timeline&&b.timeline.main&&setTimeout(function(){b.self.timeline.redraw()},100),a.planboardSync={start:function(){f.planboardSync=f.setInterval(function(){"/planboard"==d.path()&&(b.slot={},a.$broadcast("resetPlanboardViews"),b.timeliner.load({start:b.data.periods.start,end:b.data.periods.end},!0))},6e4)},clear:function(){f.clearInterval(f.planboardSync)}},a.planboardSync.start()}]),angular.module("WebPaige.Controllers.Timeline.Navigation",[]).controller("timeline-navigation",["$rootScope","$scope","$window",function(a,b,c){b.timelineScoper=function(a){switch(b.timeline.current.day=b.current.day,b.timeline.current.week=b.current.week,b.timeline.current.month=b.current.month,b.timeline.current.year=Number((new Date).toString("yyyy")),a){case"day":b.timeline.scope={day:!0,week:!1,month:!1},b.timeliner.load({start:b.periods.days[b.timeline.current.day].first.timeStamp,end:b.periods.days[b.timeline.current.day].last.timeStamp});break;case"week":b.timeline.scope={day:!1,week:!0,month:!1},b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp});break;case"month":b.timeline.scope={day:!1,week:!1,month:!0},b.timeliner.load({start:b.periods.months[b.timeline.current.month].first.timeStamp,end:b.periods.months[b.timeline.current.month].last.timeStamp})}},b.timelineBefore=function(){var a=(new Date).toString("yyyy");b.timeline.scope.day?b.timeline.current.year===Number(a)+1?1===b.timeline.current.day?(b.timeline.current.year=a,b.timeline.current.day=b.periods.days.total,b.timeliner.load({start:b.periods.days[b.timeline.current.day].first.timeStamp,end:b.periods.days[b.timeline.current.day].last.timeStamp})):(b.timeline.current.day--,b.timeliner.load({start:b.periodsNext.days[b.timeline.current.day].first.timeStamp,end:b.periodsNext.days[b.timeline.current.day].last.timeStamp})):1!=b.timeline.current.day&&(b.timeline.current.day--,b.timeliner.load({start:b.periods.days[b.timeline.current.day].first.timeStamp,end:b.periods.days[b.timeline.current.day].last.timeStamp})):b.timeline.scope.week?b.timeline.current.year===Number(a)+1?1===b.timeline.current.week?(b.timeline.current.year=a,b.timeline.current.week=52,b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp})):(b.timeline.current.week--,b.timeliner.load({start:b.periodsNext.weeks[b.timeline.current.week].first.timeStamp,end:b.periodsNext.weeks[b.timeline.current.week].last.timeStamp})):1!=b.timeline.current.week?(b.timeline.current.week--,b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp})):12==b.timeline.current.month&&(b.timeline.current.week=53,b.timeline.current.week--,b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp})):b.timeline.scope.month&&(b.timeline.current.year===Number(a)+1?1===b.timeline.current.month?(b.timeline.current.year=a,b.timeline.current.month=12,b.timeliner.load({start:b.periods.months[b.timeline.current.month].first.timeStamp,end:b.periods.months[b.timeline.current.month].last.timeStamp})):(b.timeline.current.month--,b.timeliner.load({start:b.periodsNext.months[b.timeline.current.month].first.timeStamp,end:b.periodsNext.months[b.timeline.current.month].last.timeStamp})):1!=b.timeline.current.month&&(b.timeline.current.month--,b.timeliner.load({start:b.periods.months[b.timeline.current.month].first.timeStamp,end:b.periods.months[b.timeline.current.month].last.timeStamp})))},b.timelineAfter=function(){var a=(new Date).toString("yyyy");b.timeline.scope.day?b.timeline.current.year===Number(a)?b.timeline.current.day!=b.periods.days.total?(b.timeline.current.day++,b.timeliner.load({start:b.periods.days[b.timeline.current.day].first.timeStamp,end:b.periods.days[b.timeline.current.day].last.timeStamp})):(b.timeline.current.year=Number(a)+1,b.timeline.current.day=1,b.timeliner.load({start:b.periodsNext.days[b.timeline.current.day].first.timeStamp,end:b.periodsNext.days[b.timeline.current.day].last.timeStamp})):(b.timeline.current.year=Number(a)+1,b.timeline.current.day++,b.timeliner.load({start:b.periodsNext.days[b.timeline.current.day].first.timeStamp,end:b.periodsNext.days[b.timeline.current.day].last.timeStamp})):b.timeline.scope.week?b.timeline.current.year==a?(1==b.timeline.current.week&&12==b.timeline.current.month&&(b.timeline.current.week=53),53!=b.timeline.current.week?(b.timeline.current.week++,b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp})):(b.timeline.current.year=Number(a)+1,b.timeline.current.week=1,b.timeliner.load({start:b.periodsNext.weeks[b.timeline.current.week].first.timeStamp,end:b.periodsNext.weeks[b.timeline.current.week].last.timeStamp}))):53!=b.timeline.current.week&&(b.timeline.current.week++,b.timeliner.load({start:b.periodsNext.weeks[b.timeline.current.week].first.timeStamp,end:b.periodsNext.weeks[b.timeline.current.week].last.timeStamp})):b.timeline.scope.month&&(b.timeline.current.year==a?12!=b.timeline.current.month?(b.timeline.current.month++,b.timeliner.load({start:b.periods.months[b.timeline.current.month].first.timeStamp,end:b.periods.months[b.timeline.current.month].last.timeStamp})):(b.timeline.current.year=Number(a)+1,b.timeline.current.month=1,b.timeliner.load({start:b.periodsNext.months[b.timeline.current.month].first.timeStamp,end:b.periodsNext.months[b.timeline.current.month].last.timeStamp})):12!=b.timeline.current.month&&(b.timeline.current.month++,b.timeliner.load({start:b.periodsNext.months[b.timeline.current.month].first.timeStamp,end:b.periodsNext.months[b.timeline.current.month].last.timeStamp})))},b.timelineThisWeek=function(){b.timeline.current.week!=(new Date).getWeek()&&(b.timeliner.load({start:b.periods.weeks[(new Date).getWeek()].first.timeStamp,end:b.periods.weeks[(new Date).getWeek()].last.timeStamp}),b.timeline.range={start:b.periods.weeks[(new Date).getWeek()].first.day,end:b.periods.weeks[(new Date).getWeek()].last.day})},b.timelineWeekBefore=function(){1!=b.timeline.current.week&&(b.timeline.current.week--,b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp})),b.timeline.range={start:b.periods.weeks[b.timeline.current.week].first.day,end:b.periods.weeks[b.timeline.current.week].last.day}},b.timelineWeekAfter=function(){53!=b.timeline.current.week&&(b.timeline.current.week++,b.timeliner.load({start:b.periods.weeks[b.timeline.current.week].first.timeStamp,end:b.periods.weeks[b.timeline.current.week].last.timeStamp})),b.timeline.range={start:b.periods.weeks[b.timeline.current.week].first.day,end:b.periods.weeks[b.timeline.current.week].last.day}},b.timelineZoomIn=function(){b.self.timeline.zoom(a.config.timeline.config.zoom,Date.now())},b.timelineZoomOut=function(){b.self.timeline.zoom(-a.config.timeline.config.zoom,Date.now())},c.onresize=function(){b.self.timeline.redraw()},b.fullWidth=function(){b.self.timeline.redraw()}}]),angular.module("WebPaige.Controllers.Messages",[]).controller("messages",["$scope","$rootScope","$q","$location","$route","data","Messages","Storage","Timer","Offsetter",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.views={compose:!1,message:!1,inbox:!1,outbox:!1,trash:!1,notifications:!1,scheaduler:!1},a.views[b]=!0}function l(c){if(b.statusBar.display(b.ui.message.loadingMessage),k("message"),a.setViewTo("message"),a.message=g.find(c),"NEW"==a.message.state&&"inbox"==a.message.box){g.changeState([c],"READ").then(function(a){a.error&&(b.notifier.error(b.ui.errors.messages.changeState),console.warn("error ->",a))});var d=[];angular.forEach(a.messages.inbox,function(b){b.uuid==a.message.uuid&&(b.state="READ"),d.push(b)}),a.messages.inbox=d,g.unreadCount()}b.statusBar.off()}function m(c){a.origin="notifications",a.scheadulerPane=!0;var d=g.scheaduled.find(c);angular.forEach(d.types,function(b){"sms"==b&&(a.broadcast.sms=!0),"email"==b&&(a.broadcast.email=!0)});var e=angular.fromJson(h.get("members")),f=angular.fromJson(h.get("groups")),i=[];angular.forEach(d.recipients,function(a){var c;e[a]?(c=e[a].name,i.push({group:b.ui.message.receiversUsers,id:a,name:c})):angular.forEach(f,function(d){d.uuid==a&&(c=d.name,i.push({group:b.ui.message.receiversGroups,id:a,name:c}))})}),a.message={subject:d.subject,body:d.message,receivers:i},angular.forEach($("div#composeTab select.chzn-select option"),function(a){angular.forEach(d.recipients,function(b){e[b]?a.innerHTML==e[b].name&&(a.selected=!0):angular.forEach(f,function(c){c.uuid==b&&a.innerHTML==c.name&&(a.selected=!0)})})}),$("div#composeTab select.chzn-select").trigger("liszt:updated"),a.scheaduled={uuid:d.uuid,sender:d.sender,title:d.label,status:d.active,offsets:j.factory(d.offsets)};var k=0;angular.forEach(a.scheaduled.offsets,function(){k++}),a.scheaduleCount=k}function n(){angular.forEach(a.message.receivers,function(a){angular.forEach($("div#composeTab select.chzn-select option"),function(b){b.innerHTML==a.name&&(b.selected=!0)})}),$("div#composeTab select.chzn-select").trigger("liszt:updated")}b.notification.status=!1,b.fixStyles();if(a.receviersList=g.receviers(),a.messages=f.messages,a.scheadules=f.scheadules,a.page={inbox:0,outbox:0,trash:0},a.paginate={set:function(b,c){a.page[c]=b},next:function(b){a.page[b]+1!=a.messages[b].length&&a.page[b]++},before:function(b){0!=a.page[b]&&a.page[b]--}},a.selection={inbox:{},outbox:{},trash:{}},a.selectionMaster={inbox:"",outbox:"",trash:""},a.broadcast={sms:!1,email:!1},a.scheaduled={title:"",offsets:{},status:!1},a.origin="inbox",a.setViewTo=function(b){a.$watch(b,function(){d.hash(b),k(b)})},d.hash())var o=d.hash();else{var o="inbox";d.hash("inbox")}if(k(o),a.scheadulerPane=!1,d.search().uuid&&("scheaduler"==d.hash()?m(d.search().uuid):l(d.search().uuid)),a.requestMessage=function(b,c){a.origin=c,l(b),a.$watch(d.search(),function(){d.search({uuid:b})})},a.scheaduleCounter=function(){var b=0;angular.forEach(a.scheaduled.offsets,function(){b++}),a.scheaduleCount=b},a.requestNotification=function(c){b.statusBar.display(b.ui.message.loadingNotifications),k("scheaduler"),a.setViewTo("scheaduler"),m(c),a.$watch(d.search(),function(){d.search({uuid:c})}),b.statusBar.off()},a.composeMessage=function(){a.views.compose?a.closeTabs():(d.search({}),a.message={},a.broadcast.sms=!1,a.broadcast.email=!1,a.scheadulerPane=!1,angular.forEach($("div#composeTab select.chzn-select option"),function(a){a.selected=!1}),$("div#composeTab select.chzn-select").trigger("liszt:updated"),a.scheaduled={title:"",offsets:{},status:!1},a.scheaduleCounter(),a.setViewTo("inbox"))},a.closeTabs=function(){a.message={},d.search({}),k(a.origin),a.setViewTo(a.origin),h.session.remove("escalation")},a.toggleSelection=function(b,c,d){var e=d?!0:!1;angular.forEach(b,function(b){a.selection[c][b.uuid]=e})},a.removeMessage=function(c){b.statusBar.display(b.ui.message.removing);var d=[];d.push(c),g.remove(d).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.removeMessage),console.warn("error ->",c)):(b.notifier.success(b.ui.message.removed),b.statusBar.display(b.ui.message.refreshing),g.query().then(function(c){a.messages=c.messages,b.loading=!1,a.closeTabs(),b.statusBar.off()}))})},a.removeMessages=function(c){b.statusBar.display(b.ui.message.removingSelected);var d=[];angular.forEach(c,function(a,b){a&&d.push(b)}),g.remove(d).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.removeMessages),console.warn("error ->",c)):(b.notifier.success(b.ui.message.removed),b.statusBar.display(b.ui.message.refreshing),g.query().then(function(c){a.messages=c.messages,b.statusBar.off()}))})},a.restoreMessage=function(c){b.statusBar.display(b.ui.message.restoring);var d=[];d.push(c),g.restore(d).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.restoreMessage),console.warn("error ->",c)):(b.notifier.success(b.ui.message.restored),b.statusBar.display(b.ui.message.refreshing),g.query().then(function(c){a.messages=c.messages,b.statusBar.off()}))})},a.restoreMessages=function(c){b.statusBar.display(b.ui.message.restoringSelected);var d=[];angular.forEach(c,function(a,b){a&&d.push(b)}),g.restore(d).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.restoreMessages),console.warn("error ->",c)):(b.notifier.success(b.ui.message.removed),b.statusBar.display(b.ui.message.refreshing),g.query().then(function(c){a.messages=c.messages,b.statusBar.off()}))})},a.emptyTrash=function(){b.statusBar.display(b.ui.message.emptying),g.emptyTrash().then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.emptyTrash),console.warn("error ->",c)):(b.notifier.success(b.ui.message.emptied),b.statusBar.display(b.ui.message.refreshing),g.query().then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.query),console.warn("error ->",c)):(a.messages=c.messages,b.statusBar.off())}))})},a.reply=function(c){k("compose"),a.setViewTo("compose");var d=angular.fromJson(h.get("members")),e=b.config.profile.smartAlarm?c.requester:c.requester.split("personalagent/")[1].split("/")[0],f="undefined"==typeof d[e]?e:d[e].name;a.message={subject:"RE: "+c.subject,receivers:[{group:"Users",id:e,name:f}]},n()},a.send=function(c,d){b.statusBar.display(b.ui.message.sending),c.receivers?g.send(c,d).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.send),console.warn("error ->",c)):(b.notifier.success(b.ui.message.sent),b.statusBar.display(b.ui.message.refreshing),g.query().then(function(d){d.error?(b.notifier.error(b.ui.errors.messages.query),console.warn("error ->",d)):(a.messages=d.messages,a.closeTabs(),a.requestMessage(c,a.origin),b.statusBar.off())}))}):(b.notifier.error(b.ui.message.noReceivers),b.statusBar.off())},$("div#composeTab select.chzn-select").chosen().change(function(){$.each($(this).next().find("ul li.result-selected"),function(a,b){var c=$(b).html();$.each($("div#composeTab select.chzn-select option"),function(a,b){b.innerHTML==c&&(b.selected=!0)})})}),d.search().escalate){var p=angular.fromJson(h.session.get("escalation")),q=p.group.split(">")[1].split("<")[0],r=p.group.split("uuid=")[1].split("#view")[0];setTimeout(function(){angular.forEach($("div#composeTab select.chzn-select option"),function(a){a.innerHTML==q&&(a.selected=!0)}),$("div#composeTab select.chzn-select").trigger("liszt:updated")},100),a.message={subject:b.ui.message.escalation,receivers:[{group:b.ui.message.receiversGroups,id:r,name:q}],body:b.ui.message.escalationBody(p.diff,p.start.date,p.start.time,p.end.date,p.end.time)},a.broadcast={sms:!0}}a.clean={inbox:function(){g.clean(a.messages.inbox)},outbox:function(){g.clean(a.messages.outbox)},trash:function(){g.clean(a.messages.trash)}},a.scheaduler={job:function(a,c,d){var e=[],f=[];return angular.forEach(a.receivers,function(a){e.push(a.id)}),f.push("paige"),c.sms&&f.push("sms"),c.email&&f.push("email"),{sender:b.app.resources.uuid,recipients:e,label:d.title,subject:a.subject,message:a.body,offsets:j.arrayed(d.offsets),repeat:"week",types:f,active:d.status}},list:function(c){b.statusBar.display(b.ui.message.notificationsRefresh),g.scheaduled.list().then(function(d){d.error?(b.notifier.error(b.ui.errors.messages.notificationsList),console.warn("error ->",d)):(a.scheadules=d,b.statusBar.off(),c())})},get:function(c){g.scheaduled.get(c).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.notificationsGet),console.warn("error ->",c)):a.scheaduled=c})},save:function(a,b,c){c.uuid?this.edit(a,b,c):this.add(a,b,c)},add:function(c,d,e){var f=this;b.statusBar.display(b.ui.message.notificationsAdd),g.scheaduled.create(this.job(c,d,e)).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.notificationsAdd),console.warn("error ->",c)):(b.notifier.success(b.ui.message.notificationSaved),f.list(function(){a.setViewTo("notifications")}))})},edit:function(c,d,e){var f=this;b.statusBar.display(b.ui.message.notificationsEditing),g.scheaduled.edit(e.uuid,this.job(c,d,e)).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.notificationsEdit),console.warn("error ->",c)):(b.notifier.success(b.ui.message.notificationsEdited),f.list(function(){a.setViewTo("notifications")}))})},remove:function(c){var d=this;b.statusBar.display(b.ui.message.notificationsDeleting),g.scheaduled.remove(c).then(function(c){c.error?(b.notifier.error(b.ui.errors.messages.notificationsDelete),console.warn("error ->",c)):(b.notifier.success(b.ui.message.notificationsDeleted),d.list(function(){a.setViewTo("notifications")}))})}}}]),angular.module("WebPaige.Controllers.Scheaduler",[]).controller("scheaduler",["$scope","$rootScope",function(a){a.$watch(function(){a.scheaduled&&angular.forEach(a.scheaduled.offsets,function(a){0==a.mon&&0==a.tue&&0==a.wed&&0==a.thu&&0==a.fri&&0==a.sat&&0==a.sun&&(a.mon=!0);var b=3600,c=60,d=a.time.split(":"),e=d[0]*b+d[1]*c;d[0]!=a.hour&&(a.hour=d[0]),d[1]!=a.minute&&(a.minute=d[1]),a.exact!=e&&(a.exact=e)})}),a.addNewOffset=function(){if(a.scheaduled.offsets[0]){var b=3600,c=60,d=a.scheaduled.offsets[0].time.split(":"),e=d[0]*b+d[1]*c;a.scheaduled.offsets[e]=a.scheaduled.offsets[0],a.scheaduled.offsets[e].exact=e}a.scheaduled.offsets[0]={mon:!0,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1,hour:0,minute:0,time:"00:00",exact:0},a.scheaduleCounter()},a.remover=function(b){delete a.scheaduled.offsets[b],a.scheaduleCounter()}}]),angular.module("WebPaige.Controllers.Groups",[]).controller("groups",["$rootScope","$scope","$location","data","Groups","Profile","$route","$routeParams","Storage","Slots",function(a,b,c,d,e,f,g,h,i,j){function k(a){angular.forEach(d.groups,function(c){c.uuid==a&&(b.group=c)}),b.members=d.members[a],b.members.sort(function(a,b){var c=a.resources.lastName.toLowerCase(),d=b.resources.lastName.toLowerCase();return d>c?-1:c>d?1:0}),b.current=a,l(a)}function l(a){b.wished=!1,e.wish(a).then(function(c){b.wished=!0,b.wish=c.count,b.popover={id:a,wish:c.count}})}function m(a){b.views={view:!1,add:!1,edit:!1,search:!1,member:!1},b.views[a]=!0}a.fixStyles();var n=c.search();b.search={query:""},b.selection={},b.data=d,b.roles=a.config.roles,b.groups=d.groups;var o,p;n.uuid||c.hash()?(o=n.uuid,p=c.hash()):(o=d.groups[0].uuid,p="view",c.search({uuid:d.groups[0].uuid}).hash("view")),k(o),m(p),b.saveWish=function(b,c){a.statusBar.display(a.ui.planboard.changingWish),j.setWish({id:b,start:255600,end:860400,recursive:!0,wish:c}).then(function(c){a.statusBar.off(),c.error?(a.notifier.error(a.ui.errors.groups.saveWish),console.warn("error ->",c)):a.notifier.success(a.ui.planboard.wishChanged),l(b)})},b.requestGroup=function(a,d){k(a),b.$watch(c.search(),function(){c.search({uuid:a})}),d&&("view"!=c.hash()&&c.hash("view"),m("view"))},b.setViewTo=function(a){b.$watch(a,function(){c.hash(a),m(a)})},b.addGroupForm=function(){b.views.add?b.closeTabs():(b.groupForm={},b.setViewTo("add"))},b.newMemberForm=function(){b.views.member?b.closeTabs():(b.memberForm={},b.setViewTo("member"))},b.editGroup=function(a){b.setViewTo("edit"),b.groupForm={id:a.uuid,name:a.name}},b.closeTabs=function(){b.groupForm={},b.memberForm={},b.setViewTo("view")},b.searchMembers=function(c){a.statusBar.display(a.ui.groups.searchingMembers),e.search(c).then(function(d){d.error?(a.notifier.error(a.ui.errors.groups.searchMembers),console.warn("error ->",d)):(b.search={query:"",queried:c},b.candidates=d,b.setViewTo("search"),a.statusBar.off())})},b.addMember=function(d){a.statusBar.display(a.ui.groups.addingNewMember),e.addMember(d).then(function(d){d.error?(a.notifier.error(a.ui.errors.groups.addMember),console.warn("error ->",d)):(a.notifier.success(a.ui.groups.memberAdded),a.statusBar.display(a.ui.groups.refreshingGroupMember),e.query().then(function(d){d.error?(a.notifier.error(a.ui.errors.groups.query),console.warn("error ->",d)):(b.data=d,a.statusBar.off(),"search"==c.hash()&&b.searchMembers(b.search.query))}))})},b.removeMember=function(c,d){a.statusBar.display(a.ui.groups.removingMember),e.removeMember(c,d).then(function(c){c.error?(a.notifier.error(a.ui.errors.groups.removeMember),console.warn("error ->",c)):(a.notifier.success(a.ui.groups.memberRemoved),a.statusBar.display(a.ui.groups.refreshingGroupMember),e.query().then(function(c){c.error?(a.notifier.error(a.ui.errors.groups.query),console.warn("error ->",c)):(b.data=c,a.statusBar.off())}))})},b.removeMembers=function(c,d){a.statusBar.display(a.ui.groups.removingSelected),e.removeMembers(c,d).then(function(c){c.error?(a.notifier.error(a.ui.errors.groups.removeMembers),console.warn("error ->",c)):(a.notifier.success(a.ui.groups.memberRemoved),a.statusBar.display(a.ui.groups.refreshingGroupMember),b.selection={},e.query().then(function(c){c.error?(a.notifier.error(a.ui.errors.groups.query),console.warn("error ->",c)):(b.data=c,a.statusBar.off())}))})},b.groupSubmit=function(d){a.statusBar.display(a.ui.groups.saving),e.save(d).then(function(d){d.error?(a.notifier.error(a.ui.errors.groups.groupSubmit),console.warn("error ->",d)):(a.notifier.success(a.ui.groups.groupSaved),a.statusBar.display(a.ui.groups.refreshingGroupMember),e.query().then(function(e){e.error?(a.notifier.error(a.ui.errors.groups.query),console.warn("error ->",e)):(b.closeTabs(),b.data=e,angular.forEach(e.groups,function(a){a.uuid==d&&(b.groups=e.groups,angular.forEach(e.groups,function(c){c.uuid==a.uuid&&(b.group=c)}),b.members=e.members[a.uuid],b.current=a.uuid,b.$watch(c.search(),function(){c.search({uuid:a.uuid})}))}),a.statusBar.off())}))})},b.memberSubmit=function(d){a.config.profile.smartAlarm&&(d.role=1),a.statusBar.display(a.ui.groups.registerNew),f.register(d).then(function(f){f.error?(409===f.error.status?(a.notifier.error(a.ui.errors.groups.memberSubmitRegistered),a.statusBar.off()):403===f.error.status?(a.notifier.error("Registering a new user is failed. Please try again."),a.statusBar.off(),$("body").scrollTop(0)):a.notifier.error(a.ui.errors.groups.memberSubmitRegister),console.warn("error ->",f)):(a.notifier.success(a.ui.groups.memberRegstered),a.statusBar.display(a.ui.groups.refreshingGroupMember),e.query().then(function(e){e.error?(a.notifier.error(a.ui.errors.groups.query),console.warn("error ->",e)):(b.data=e,c.path("/profile/"+d.username).hash("profile"),a.statusBar.off())
}))})},b.confirmGroupDelete=function(b){a.notifier.alert("",!1,!0,{section:"groups",id:b})},a.$on("fireGroupDelete",function(a,c){b.deleteGroup(c.id)}),b.deleteGroup=function(d){a.statusBar.display(a.ui.groups.deleting),e.remove(d).then(function(d){d.error?(a.notifier.error(a.ui.errors.groups.deleteGroup),console.warn("error ->",d)):(a.notifier.success(a.ui.groups.deleted),a.statusBar.display(a.ui.groups.refreshingGroupMember),e.query().then(function(d){d.error?(a.notifier.error(a.ui.errors.groups.query),console.warn("error ->",d)):(b.data=d,angular.forEach(d.groups,function(){b.groups=d.groups,b.group=d.groups[0],b.members=d.members[d.groups[0].uuid],b.current=d.groups[0].uuid,b.$watch(c.search(),function(){c.search({uuid:d.groups[0].uuid})})}),a.statusBar.off())}))})},b.toggleSelection=function(a,c){var d=c?!0:!1,e=angular.fromJson(i.get(a.uuid));angular.forEach(e,function(a){b.selection[a.uuid]=d})},b.fetchParent=function(){e.parents().then(function(a){console.warn("parent -> ",a)})},b.fetchContainers=function(a){e.containers(a).then(function(a){console.warn("containers -> ",a)})},b.reverse=!1,b.sorter="resources.lastName",b.toggleSorter=function(a){b.reverse=b.sorter==a?!b.reverse:!1,b.sorter=a}}]),angular.module("WebPaige.Controllers.Profile",[]).controller("profile",["$rootScope","$scope","$q","$location","$window","$route","data","Profile","Storage","Groups","Dater","MD5",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(c){b.views={profile:!1,edit:!1,password:!1,timeline:!1},b.views[c]=!0,b.views.user=a.app.resources.uuid.toLowerCase()==f.current.params.userId?!0:!1}function n(){b.timeline={id:"userTimeline",main:!1,user:{id:f.current.params.userId},current:b.current,options:{start:new Date(b.periods.weeks[b.current.week].first.day),end:new Date(b.periods.weeks[b.current.week].last.day),min:new Date(b.periods.weeks[b.current.week].first.day),max:new Date(b.periods.weeks[b.current.week].last.day)},range:{start:b.periods.weeks[b.current.week].first.day,end:b.periods.weeks[b.current.week].last.day},config:{legenda:{},legendarer:a.config.timeline.config.legendarer,states:a.config.timeline.config.states}};var c={};angular.forEach(b.timeline.config.states,function(a,b){c[b]=a.label}),b.states=c,angular.forEach(a.config.timeline.config.states,function(a,c){b.timeline.config.legenda[c]=!0}),b.daterange=k.readable.date(b.timeline.range.start)+" / "+k.readable.date(b.timeline.range.end),$("#timeline").html(""),$("#timeline").append('<div id="userTimeline"></div>')}a.notification.status=!1,a.fixStyles(),b.self=this,b.periods=k.getPeriods(),b.current={day:Date.today().getDayOfYear()+1,week:(new Date).getWeek(),month:(new Date).getMonth()+1},a.app.resources.uuid.toLowerCase()!=f.current.params.userId&&g&&g.slots&&(g.user=g.slots.data),b.data=g,b.profilemeta=g&&g.resources,b.groups=f.current.params.userId&&j.getMemberGroups(f.current.params.userId.toLowerCase()),b.passwords={current:"",new1:"",new2:""},b.forms={add:!1,edit:!1},b.toggleSlotForm=function(){b.forms.add?b.resetInlineForms():(b.slot={},b.slot={start:{date:(new Date).toString(a.config.formats.date),time:(new Date).toString(a.config.formats.time),datetime:(new Date).toISOString()},end:{date:(new Date).toString(a.config.formats.date),time:(new Date).addHours(1).toString(a.config.formats.time),datetime:(new Date).toISOString()},state:"",recursive:!1,id:""},b.forms={add:!0,edit:!1})},b.resetInlineForms=function(){b.slot={},b.original={},b.forms={add:!1,edit:!1}},m(d.hash()),b.setViewTo=function(a){b.$watch(d.hash(),function(){d.hash(a),m(a)})},b.save=function(c){a.statusBar.display(a.ui.profile.saveProfile),c.Password&&(c.askPass=l(c.Password)),h.save(f.current.params.userId,c).then(function(c){if(c.error)a.notifier.error(a.ui.errors.profile.save),console.warn("error ->",c);else{a.statusBar.display(a.ui.profile.refreshing);var d=f.current.params.userId.toLowerCase()==a.app.resources.uuid?!0:!1;h.get(f.current.params.userId.toLowerCase(),d).then(function(c){c.error?(a.notifier.error(a.ui.errors.profile.get),console.warn("error ->",c)):(a.notifier.success(a.ui.profile.dataChanged),b.data=c,a.statusBar.off())})}})},b.change=function(c){return""==c.new1||""==c.new2?(a.notifier.error(a.ui.profile.pleaseFill,!0),!1):c.new1!=c.new2?(a.notifier.error(a.ui.profile.passNotMatch,!0),!1):(a.app.resources.askPass==l(c.current)?(a.statusBar.display(a.ui.profile.changingPass),h.changePassword(c).then(function(c){c.error?(a.notifier.error(a.ui.errors.profile.changePassword),console.warn("error ->",c)):(a.statusBar.display(a.ui.profile.refreshing),h.get(a.app.resources.uuid,!0).then(function(c){c.error?(a.notifier.error(a.ui.errors.profile.get),console.warn("error ->",c)):(a.notifier.success(a.ui.profile.passChanged),b.data=c,a.statusBar.off())}))})):a.notifier.error(a.ui.profile.passwrong,!0),void 0)},f.current.params.userId&&a.app.resources.uuid!=f.current.params.userId.toLowerCase()&&n(),b.redraw=function(){setTimeout(function(){b.self.timeline&&b.self.timeline.redraw()},100)}}]),angular.module("WebPaige.Controllers.Settings",[]).controller("settings",["$rootScope","$scope","$window","data","Settings","Profile","Storage",function(a,b,c,d,e,f,g){a.notification.status=!1,a.fixStyles(),b.settings=angular.fromJson(d);var h={};angular.forEach(ui,function(a){h[a.meta.name]=a.meta.label}),b.languages=h;var i={};angular.forEach(g.local.groups(),function(a){i[a.uuid]=a.name}),b.groups=i,b.save=function(c){a.statusBar.display(a.ui.settings.saving),e.save(a.app.resources.uuid,c).then(function(){a.notifier.success(a.ui.settings.saved),a.statusBar.display(a.ui.settings.refreshing),f.get(a.app.resources.uuid,!0).then(function(c){c.error?(a.notifier.error(a.ui.errors.settings.save),console.warn("error ->",c)):(b.settings=angular.fromJson(c.resources.settingsWebPaige),a.changeLanguage(angular.fromJson(c.resources.settingsWebPaige).user.language),a.statusBar.off())})})},b.authGoogle=function(){window.location="http://3rc2.ask-services.appspot.com/auth/google?agentUrl=http://3rc2.ask-services.appspot.com/eveagents/personalagent/"+a.app.resources.uuid+"/&agentMethod=createGoogleAgents&applicationCallback="+location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+"/index.html?account="+a.app.resources.uuid+encodeURIComponent("#")+"/settings"}}]),angular.module("WebPaige.Controllers.Help",[]).controller("help",["$rootScope","$scope","$location",function(a,b,c){function d(a){b.views={dashboard:!1,planboard:!1,messages:!1,groups:!1,profile:!1,settings:!1,support:!1},b.views[a]=!0}if(a.notification.status=!1,a.fixStyles(),b.setViewTo=function(a){b.$watch(a,function(){c.hash(a),d(a)})},c.hash())var e=c.hash();else{var e="dashboard";c.hash("dashboard")}d(e)}]);