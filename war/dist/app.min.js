/*!
 * WebPaige v2.0.2 (snapshot)
 * Ask Community Systems
 * Authors: Cengiz Ulusoy
 * 13-04-2014 02:04
 */
"use strict";var ui={en:{meta:{name:"en",label:"English"},login:{setting_up_app:"Setting up the application...",header:"Please sign in",placeholder_username:"Please enter your username",placeholder_password:"Your password",label_rememberMe:"Remember Me",button_login:"Login",button_loggingIn:"Logging...",forgot_password:"forgot your password?",forgetPassword:"Forgot password",emailAddress:"Email address",resetPassword:"Reset Password",returnLogin:"return back to login",changePassword:"change password",downloadApp:"Download Mobile App",ph_username:"username",ph_newPass:"new  password",ph_retypePass:"retype password",alert_fillfiled:"Please fill all fields!",alert_wrongUserPass:"Wrong username or password!",loading_User:"Loading user information...",loading_Message:"Loading messages...",loading_Group:"Loading groups...",loading_Members:"Loading members...",loading_everything:"Everything loaded!",logout:"Logout",loading:"Loading..",setting:"Setting..",passwordChanged:"Password changed!",button_changePassword:"Change password",button_changingPassword:"Changing password..",checkYourMail:"Please check your email to reset your password!"},dashboard:{dashboard:"Dashboard",groupOverviews:"Loading and analyzing group overviews...",thisWeek:"This week",nextWeek:"Next week",welcome:"Welcome",newMessage:"New Messages",goToInbox:"Go to inbox",announcements:"Announcements",loadingPie:"Loading pie charts...",loadingP2000:"Loading alarm messages",noP2000:"There are no alarm messages",widgetSave:"Save",widgetCancel:"Cancel",currentState:"Current state",overview:"Overview",statMore:"more",statEven:"enough",statLess:"less",periods:"Periods",refreshGroupOverviews:"Refreshing group overviews..",showMore:"meer tonen",showLess:"minder tonen",gettingAlarms:"Getting P2000 alarm messages"},planboard:{planboard:"Agenda",newAvail:"New Availability",day:"Day",week:"Week",month:"Month",updateAvail:"Update Availability",from:"From",till:"Till",state:"State",selectAState:"select a state",reoccuring:"Re-occuring",lessPeople:"There $v less people than needed!",samePeople:"There are just as many peopleas needed.",morePeople:"There are $v more people than needed!",wished:"Wished",combine_reoccuring:"This is a combined row of planning with re-occuring rows.",sendMsgToMember:"Send Message To Members",add:"Add",del:"Delete",change:"Change",setWish:"Set Wish",timeline:"Timeline",statistics:"Statistics",barCharts:"Bar charts",wishes:"Wishes",legenda:"Legenda",group:"Group",groups:"Groups",members:"Members",bothAvailable:"Both available",northAavailable:"available North",southAvailable:"available South",skipperOutService:"Skipper Of Service",notAvailable:"Not Available",notachieve:"Not Achieved",legendaLabels:{morePeople:"More people",enoughPeople:"Just enough people",lessPeople:"Less people"},lastSyncTime:"Last sync time:",dataRangeStart:"Data range start: ",DataRangeEnd:"Data range end: ",loadingTimeline:"Loading timeline...",addTimeSlot:"Adding a timeslot...",slotAdded:"New timeslot added successfully.",changingSlot:"Changing a timeslot...",slotChanged:"Timeslot changed successfully.",changingWish:"Changing wish value...",wishChanged:"Wish value changed successfully.",deletingTimeslot:"Deleting a timeslot...",timeslotDeleted:"Timeslot deleted successfully.",refreshTimeline:"Refreshing timeline...",preCompilingStortageMessage:"Pre-compiling shortage message",weeklyPlanning:"Weekly planning",planning:"Planning",minNumber:"Minimum number benodigden",statDays:"days",statHours:"hours",statMinutes:"minutes",statPeopleLess:"Less people than expected",statPeopleEven:"Just enough people as expected",statPeopleMore:"More people than expected",getWishes:"Getting minimum required value...",daterangerToday:"Today",daterangerTomorrow:"Tomorrow",daterangerYesterday:"Yesterday",daterangerNext3Days:"Next 3 days",daterangerNext7Days:"Next 7 days",rangeInfoTotalSelectedDays:"Total selected days: ",rangeInfoTime:"Time: ",rangeInfoWeekNumber:"Week number: ",rangeInfoMonth:"Month: ",rangeInfoTotalDays:", Total days: "},message:{messages:"Messages",composeAMessage:"Compose a message",compose:"Compose",inbox:"Inbox",outbox:"Outbox",trash:"Trash",composeMessage:"Compose message",close:"Close",broadcast:"Broadcast",sms:"SMS",email:"Email",receviers:"Recevier(s)",subject:"Subject",message:"Message",sendMessage:"Send Message",sender:"Sender",date:"Date",questionText:"Message",reply:"Reply",del:"Delete",noMessage:"There are no messages.",from:"From",newMsg:"New",deleteSelected:"Delete Selected Messages",someMessage:"There are $v message(s)",emptyTrash:"Empty Trash",noMsgInTrash:"There are no messages in trash.",box:"Box",persons:"Person(s)",restoreSelected:"Restore Selected Messages",loadingMessage:"Loading message...",escalation:"Escalation message",escalationBody:function(e,t,r,n,a){return"We have "+e+" shortage in between "+t+" "+r+" and "+n+" "+a+". "+"Would you please make yourself available if you are available for that period?"},removed:"Message removed successfully.",removing:"Removing the message...",refreshing:"Refreshing messages...",removingSelected:"Removing selected messages...",restoring:"Restoring the message back...",restored:"Message restored successfully.",restoringSelected:"Restoring selected messages...",emptying:"Emptying trash...",emptied:"Trash bin emptied successfully.",sending:"Sending the message...",sent:"Message sent.",typeSubject:"Type a subject",ph_filterMessage:"Filter messages..",noReceivers:"Please select a receiver.",days:{monday:"monday",tuesday:"tuesday",wednesday:"wednesday",thursday:"thursday",friday:"friday",saturday:"saturday",sunday:"sunday"},repeat:"Repeat",repeatOn:"On",repeatOff:"Off",enabled:"Enabled",disabled:"Disabled",repeatNew:"New repeat",notificationLabel:"Notification label",notifications:"Notifications",notificationsEmpty:"There are currently no notifications.Er zijn (nog) geen herhalingen.",notificationStatus:"Notification status",notificationSave:"Save",notificationHeaderLabel:"Label",notificationHeaderReceivers:"Receivers",notificationHeaderFrequency:"Frequency",paginationPage:"Page",paginationOf:"of",paginationInTotal:"in total",paginationPrevious:"Previous",paginationNext:"Next",filterMessages:"Filter messages...",inTotal:"In total:",loadingNotifications:"Getting notifications...",receiversUsers:"Users",receiversGroups:"Groups",notificationsRefresh:"Refreshing scheduled notifications...",notificationsAdd:"Adding a new scheduled notification...",notificationSaved:"Scheduled notification is successfully saved.",notificationsEditing:"Editing scheduled notification...",notificationsEdited:"Scheduled notification is successfully edited.",notificationsDeleting:"Deleting a scheduled notification...",notificationsDeleted:"Scheduled notification is successfully deleted."},groups:{groups:"Groups",newGroup:"New Group",newMember:"New Member",search:"Search",addNewGroup:"Add New Group",editGroup:"Edit Group",searchResults:"Search results",group:"Group",close:"Close",name:"Name",firstName:"First Name",lastName:"Last Name",saveGroup:"Save Group",registerMember:"Register Member",role:"Role",selectRole:"Select a role",selectGroup:"Choose a group",email:"Email",phone:"Phone",address:"Address",postCode:"Postcode",tel:"Tel",city:"City",userName:"Username",password:"Password",saveMember:"Save Member",searchedFor:"Search results for ",sorryCanNotFind:"Sorry but we couldn't find what you are looking for.",addToGroup:"Add to group",addMemberToGroup:"Add Selected Members To Groups",resultCount:"There are $v results in your query.",deleteGroup:"Delete Group",noMembers:"There are no members.",removeSelectedMembers:"Remove Selected Members",memberCount:"There are $v member(s)",searchingMembers:"Searching members..",addingNewMember:"Adding a new member..",memberAdded:"Member added to group successfully.",refreshingGroupMember:"Refreshing groups and members list..",removingMember:"Removing member from group..",memberRemoved:"Member(s) removed from group successfully.",removingSelected:"Removing selected members..",saving:"Saving group..",groupSaved:"Group saved successfully.",registerNew:"Registering a new member..",memberRegstered:"Member registered successfully.",deleting:"Deleting group..",deleted:"Group deleted successfully.",filterMembers:"Filter members..",searchFor:"firstname, lastname..",widgetSave:"Save",widgetCancel:"Cancel",requiredPeople:"Required"},profile:{profile:"Profile",edit:"Edit",password:"Password",timeline:"Timeline",profileView:"Profile View",userGroups:"User Groups",role:"Role",email:"Email",phone:"Phone",address:"Address",postcode:"Postcode",city:"City",editProfile:"Edit Profile",name:"Name",saveProfile:"Save Profile",passChange:"Password Change",currentPass:"Current password",newPass:"New password",newPassRepeat:"New password (Repeat)",changePass:"Change password",newAvail:"New Availability",refreshing:"Refreshing profile information..",dataChanged:"Profile data is succesfully changed.",pleaseFill:"Please fill all fields!",passNotMatch:"Provided passwords do not match! Please try it again.",changingPass:"Changing password..",passChanged:"Password is succesfully changed.",passwrong:"Given current password is wrong! Please try it again.",newTimeslotAdded:"New timeslot added successfully.",changingTimeslot:"Changing a timeslot..",timeslotChanged:"Timeslot is succesfully changed.",passwordChangeWarning:"Warning! with this option you will change password this user."},settings:{settings:"Settings",user:"User",application:"Application",userSettings:"User Settings",appSettings:"Application Settings",saveSettings:"Save Settings",langSetting:"Language",saving:"Saving settings...",refreshing:"Refreshing settings...",saved:"Settings successfully saved."},help:{help:"Help",header:"Help & Support",support:"Support"},downloads:{app:"Soon it will be downloadable.<br>",manual:"Download Manual"},loading:{general:"Loading",dashboard:"dashboard",planboard:"agenda",messages:"messages",groups:"groups",profile:"profile",settings:"settings",loggingOut:"Logging out..."},errors:{dashboard:{getOverviews:"Error with getting group overviews!"},groups:{query:"Error with getting groups and users!",saveWish:"Error with changing wish value!",searchMembers:"Error with searching members!",addMember:"Error with adding a member to a group!",removeMember:"Error with removing a member from a group!",removeMembers:"Error with removing members from a group!",groupSubmit:"Error with saving group!",memberSubmitRegistered:"Username is already registered!",memberSubmitRegister:"Error with registering a member!",deleteGroup:"Error with deleting a group!"},login:{changePass:"Something wrong with password changing!",forgotCantFind:"Error this account does not exist!",changePassAllFields:"Please fill all fields!",changePassNoMatch:"Error, passwords do not match!"},settings:{save:"Error with saving settings!"},profile:{save:"Error with saving profile information!",get:"Error with getting profile data!",changePassword:"Error with changing password!"},messages:{query:"Error with getting messages!",changeState:"Error with changing message state!",removeMessage:"Error with removing message!",removeMessages:"Error with removing messages!",restoreMessage:"Error with restoring message!",restoreMessages:"Error with restoring message!",emptyTrash:"Error with empting trash!",send:"Error with sending message!",notificationsList:"Error with getting scheduled notifictions!",notificationsGet:"Error with getting scheduled notification!",notificationsAdd:"Error with creating scheduled notification!",notificationsEdit:"Error with editing scheduled notification!",notificationsDelete:"Error with deleting scheduled notification!"},timeline:{query:"There has been some problems with syncing planboard information. Please refresh your browser for getting the latest planboard information.",pastAdding:"Invoer van tijden in het verleden is niet toegestaan!",add:"Error with adding a new timeslot!",change:"Error with changing timeslot!",pastChanging:"Veranderen van tijden in het verleden is niet toegestaan!",pastDeleting:"Verwijderen van tijden in het verleden is niet toegestaan!",remove:"Error with removing timeslot!",wisher:"Error with changing wish value!"}},confirms:{remove:"Are you sure you want to delete it? You can not undo this action."}},nl:{meta:{name:"nl",label:"Nederlands"},login:{setting_up_app:"Applicatie laden...",header:"Inloggen",placeholder_username:"Vul uw gebruikersnaam in",placeholder_password:"Vul uw wachtwoord in",label_rememberMe:"Onthoud mij",button_login:"Login",button_loggingIn:"Inloggen...",forgot_password:"Wachtwoord vergeten?",forgetPassword:"Wachtwoord vergeten",emailAddress:"Email adres",resetPassword:"Wachtwoord opnieuw instellen",returnLogin:"Terugkeren om in te loggen",changePassword:"Wachtwoord wijzigen",downloadApp:"Download Mobiele App",ph_username:"gebruikersnaam",ph_newPass:"nieuw wachtwoord",ph_retypePass:"Typ wachtwoord",alert_fillfiled:"Vul alle velden in!",alert_wrongUserPass:"Onjuiste gebruikersnaam of wachtwoord!",loading_User:"Gebruikersinformatie laden...",loading_Message:"Berichten laden...",loading_Group:"Groepen laden...",loading_Members:"Leden laden...",loading_everything:"Alles is geladen!",logout:"Uitloggen",loading:"Aan het laden..",setting:"Aan het toepassen..",passwordChanged:"Wachtwoord gewijzigd!",button_changePassword:"Wachtwoord wijzigen",button_changingPassword:"Wachtwoord aan het wijzigen..",checkYourMail:"Controleer uw mailbox voor de instructies!"},dashboard:{dashboard:"Dashboard",groupOverviews:"Laden en analyseren groepsoverzichten...",thisWeek:"Deze week",nextWeek:"Volgende week",welcome:"Welkom",newMessage:"Nieuwe berichten",goToInbox:"Ga naar inbox",loadingPie:"Cirkeldiagrammen laden...",announcements:"Alarm berichten",loadingP2000:"Alarm berichten laden...",noP2000:"Er zijn geen alarm berichten.",widgetSave:"Opslaan",widgetCancel:"Annuleren",currentState:"Huidige status",overview:"Overzicht",statMore:"meer",statEven:"genoeg",statLess:"minder",periods:"Perioden",refreshGroupOverviews:"Groep overzichten laden...",showMore:"show more",showLess:"show less",gettingAlarms:"P2000 alarm berichten aan het ophalen..."},planboard:{planboard:"Agenda",newAvail:"Nieuwe beschikbaarheid",day:"Dag",week:"Week",month:"Maand",updateAvail:"Update beschikbaarheid",from:"Van",till:"Tot",state:"Status",selectAState:"selecteer een status",reoccuring:"Herhaling",lessPeople:"Er is een tekort van $v mens(en)!",samePeople:"Er zijn precies genoeg mensen.",morePeople:"Er is een overschot van $v mens(en)!",wished:"Gewenst",combine_reoccuring:"Dit is een gecombineerde planning.",sendMsgToMember:"Stuur bericht naar leden",add:"Toevoegen",del:"Verwijderen",change:"Wijzigen",setWish:"Behoefte instellen",timeline:"Tijdlijn",statistics:"Statistieken",barCharts:"Staafdiagrammen",wishes:"Behoefte",legenda:"Legenda",group:"Groep",groups:"Groepen",members:"Leden",bothAvailable:"Beiden beschikbaar",northAavailable:"Beschikbaar Noord",southAvailable:"Beschikbaar Zuid",skipperOutService:"Schipper van dienst",notAvailable:"Niet beschikbaar",notachieve:"Niet behaald",legendaLabels:{morePeople:"Meer mensen",enoughPeople:"Precies genoeg mensen",lessPeople:"Te weinig mensen"},lastSyncTime:"Laatste synchronisatietijd:",dataRangeStart:"Begin gegevensscala: ",DataRangeEnd:"Eind gegevensscala: ",loadingTimeline:"Tijdlijn laden...",addTimeSlot:"Tijdslot toevoegen...",slotAdded:"Tijdslot succesvol toegevoegd.",changingSlot:"Tijdslot wijzigen...",slotChanged:"Tijdslot succesvol gewijzigd.",changingWish:"Behoefte veranderen...",wishChanged:"Behoefte succesvol veranderd.",deletingTimeslot:"Tijdslot verwijderen...",timeslotDeleted:"Tijdslot succesvol verwijderd.",refreshTimeline:"Tijdlijn vernieuwen...",preCompilingStortageMessage:"Opstellen tekortbericht",weeklyPlanning:"Wekelijkse planning",planning:"Planning",minNumber:"Minimum aantal benodigde mensen",statDays:"dagen",statHours:"uren",statMinutes:"minuten",statPeopleLess:"Te weinig mensen",statPeopleEven:"Precies genoeg mensen",statPeopleMore:"Meer mensen",getWishes:"Groep behoefte getal aan het ophalen...",daterangerToday:"Vandaag",daterangerTomorrow:"Morgen",daterangerYesterday:"Gisteren",daterangerNext3Days:"Komende 3 dagen",daterangerNext7Days:"Komende 7 dagen",rangeInfoTotalSelectedDays:"Totaal aantal geselecteerde dagen: ",rangeInfoTime:"Tijd: ",rangeInfoWeekNumber:"Weeknummer: ",rangeInfoMonth:"Maand: ",rangeInfoTotalDays:", Totaal aantal dagen: "},message:{messages:"Berichten",composeAMessage:"Bericht opstellen",compose:"Opstellen",inbox:"Inbox",outbox:"Outbox",trash:"Prullenbak",composeMessage:"Bericht opstellen",close:"Sluiten",broadcast:"Extra medium",sms:"SMS",email:"Email",receviers:"Ontvanger(s)",subject:"Onderwerp",message:"Bericht",sendMessage:"Bericht versturen",sender:"Zender",date:"Datum",questionText:"Bericht",reply:"Antwoorden",del:"Verwijderen",noMessage:"Er zijn geen berichten.",from:"Van",newMsg:"Nieuw",deleteSelected:"Verwijder geselecteerde berichten",someMessage:"Er zijn $v berichten",emptyTrash:"Prullenbak legen",noMsgInTrash:"Er zijn geen berichten.",box:"Box",persons:"Personen",restoreSelected:"Geselecteerde berichten terugplaatsen",loadingMessage:"Bericht laden...",escalation:"Escalatiebericht",escalationBody:function(e,t,r,n,a){return"Er is een tekort van "+e+" mensen tussen "+t+" "+r+" en "+n+" "+a+". "+"Zet uzelf a.u.b. op beschikbaar indien u beschikbaar bent voor die periode"},removed:"Bericht succesvol verwijderd.",removing:"Bericht verwijderen...",refreshing:"Bericht vernieuwen...",removingSelected:"Geselecteerde berichten verwijderen...",restoring:"Bericht terugplaatsen...",restored:"Bericht succesvol teruggeplaatst.",restoringSelected:"Geselecteerde berichten terugplaatsen...",emptying:"Prullenbak leegmaken...",emptied:"Prullenbak succesvol geleegd.",sending:"Bericht versturen...",sent:"Bericht verstuurd.",typeSubject:"Vul een onderwerp in",ph_filterMessage:"Berichten filteren...",noReceivers:"Graag een ontvanger selecteren.",days:{monday:"maandag",tuesday:"dinsdag",wednesday:"woensdag",thursday:"donderdag",friday:"vrijdag",saturday:"zaterdag",sunday:"zondag"},repeat:"Herhaling",repeatOn:"Aan",repeatOff:"Uit",enabled:"Ingeschakeld",disabled:"Uitgeschakeld",repeatNew:"Nieuwe herhaling",notificationLabel:"Notificatie label",notifications:"Herinneringen",notificationsEmpty:"Er zijn (nog) geen herhalingen.",notificationStatus:"Notificatie status",notificationSave:"Opslaan",notificationHeaderLabel:"Label",notificationHeaderReceivers:"Ontvangers",notificationHeaderFrequency:"Frequentie",paginationPage:"Pagina",paginationOf:"van",paginationInTotal:"in totaal",paginationPrevious:"Vorige",paginationNext:"Volgende",filterMessages:"Berichten filteren...",inTotal:"In totaal:",loadingNotifications:"Notificaties aan het laden...",receiversUsers:"Gebruikers",receiversGroups:"Groepen",notificationsRefresh:"Notificaties aan het laden...",notificationsAdd:"Notificatie aan het toevoegen...",notificationSaved:"Notificatie is met success opgeslagen.",notificationsEditing:"Notificatie wordt gewijzigd...",notificationsEdited:"Notificatie is met succes gewijzigd.",notificationsDeleting:"Notificatie wordt verwijderd...",notificationsDeleted:"Notificatie is met succes verwijderd."},groups:{groups:"Groepen",newGroup:"Nieuwe groep",newMember:"Nieuw lid",search:"Zoeken",addNewGroup:"Nieuwe groep toevoegen",editGroup:"Groep wijzigen",searchResults:"Zoekresultaten",group:"Groep",close:"Sluiten",name:"Naam",firstName:"Voornaam",lastName:"Achternaam",saveGroup:"Groep opslaan",registerMember:"Lid registreren",role:"Functie",selectRole:"Selecteer een functie",email:"Email",phone:"Telefoon",address:"Adres",postCode:"Postcode",tel:"Tel",city:"Stad",userName:"Gebruikersnaam",password:"Wachtwoord",saveMember:"Lid opslaan",searchedFor:"Zoekresultaten voor ",sorryCanNotFind:"Sorry, geen resultaten.",addToGroup:"Aan groep toevoegen",addMemberToGroup:"Voeg geselecteerde leden aan groep toe",resultCount:"Er zijn $v resultaten.",deleteGroup:"Groep verwijderen",noMembers:"Er zijn geen leden.",removeSelectedMembers:"Geselecteerde leden verwijderen",memberCount:"Er zijn $v leden",searchingMembers:"Leden zoeken...",addingNewMember:"Nieuw lid toevoegen...",memberAdded:"Lid succesvol aan groep toegevoegd.",refreshingGroupMember:"Groepen- en ledenlijst vernieuwen...",removingMember:"Lid van groep verwijderen...",memberRemoved:"Lid/leden succesvol van groep verwijderd.",removingSelected:"Geselecteerde leden verwijderen...",saving:"Groep opslaan...",groupSaved:"Groep succesvol opgeslagen.",registerNew:"Nieuw lid registreren...",memberRegstered:"Lid succesvol geregistreerd.",deleting:"Groep verwijderen...",deleted:"Groep succesvol verwijderd.",filterMembers:"Leden filteren...",searchFor:"voornaam, achternaam..",widgetSave:"Opslaan",widgetCancel:"Annuleren",requiredPeople:"Behoefte"},profile:{profile:"Profiel",edit:"Wijzigen",password:"Wachtwoord",timeline:"Tijdlijn",profileView:"Profiel weergave",userGroups:"Gebruikersgroepen",role:"Functie",email:"Email",phone:"Telefoon",address:"Adres",postcode:"Postcode",city:"Stad",editProfile:"Profiel wijzigen",name:"Naam",saveProfile:"Profiel opslaan",passChange:"Wachtwoord wijzigen",currentPass:"Huidig wachtwoord",newPass:"Nieuw wachtwoord",newPassRepeat:"Herhaal nieuw wachtwoord",changePass:"Wachtwoord wijzigen",newAvail:"Nieuwe beschikbaarheid",refreshing:"Profielinformatie vernieuwen...",dataChanged:"Profielgegevens succesvol gewijzigd.",pleaseFill:"Vul a.u.b. alle velden in!",passNotMatch:"Ingevoerd wachtwoord komt niet overeen. Probeer het opnieuw.",changingPass:"Wachtwoord wijzigen...",passChanged:"Wachtwoord succesvol gewijzigd.",passwrong:"Ingevoerd wachtwoord is foutief! Probeer het opnieuw.",newTimeslotAdded:"Nieuw tijdslot succesvol toegevoegd.",changingTimeslot:"Tijdslot wijzigen...",timeslotChanged:"Tijdslot succesvol gewijzigd.",passwordChangeWarning:"Let op! Hiermee wijzigt u het wachtwoord van deze persoon."},settings:{settings:"Instellingen",user:"Gebruiker",application:"Applicatie",userSettings:"Gebruikersinstellingen",appSettings:"Applicatie-instellingen",saveSettings:"Instellingen Opslaan",langSetting:"Taal",saving:"Instellingen wijzigen...",refreshing:"Instellingen vernieuwen...",saved:"Instellingen succesvol gewijzigd."},help:{help:"Hulp",header:"Hulp & Ondersteuning",support:"Ondersteuning"},downloads:{app:"Binnenkort te downloaden.",manual:"Download Handleiding"},loading:{general:"Laden",dashboard:"dashboard",planboard:"agenda",messages:"berichten",groups:"groepen",profile:"profiel",settings:"instellingen",loggingOut:"Aan het uitloggen..."},errors:{dashboard:{getOverviews:"Fout bij het ophalen van groep overzichten!"},groups:{query:"Fout bij het ophalen van groepen en gebruikers!",saveWish:"Fout bij het veranderen van de behoefte!",searchMembers:"Fout bij het zoeken van leden!",addMember:"Fout bij het toevoegen van een lid aan een groep!",removeMember:"Fout bij het verwijderen van een lid uit een groep!",removeMembers:"Fout bij het verwijderen van leden uit een groep!",groupSubmit:"Fout bij het opslaan van de groep!",memberSubmitRegistered:"Gebruikersnaam bestaat al!",memberSubmitRegister:"Fout bij het registreren van een gebruiker!",deleteGroup:"Fout bij het verwijderen van een groep!"},login:{changePass:"Er ging iets mis met het wijzigen van het wachtwoord!",forgotCantFind:"Fout, deze account bestaat niet!",changePassAllFields:"Vul alstublieft alle velden in!",changePassNoMatch:"Fout, de wachtwoorden komen niet overeen!"},settings:{save:"Fout bij het opslaan van de instellingen!"},profile:{save:"Fout bij het opslaan van het profiel!",get:"Fout bij het ophalen van het profiel!",changePassword:"Fout bij het wijzigen van het wachtwoord!"},messages:{query:"Fout bij het ophalen van berichten!",changeState:"Fout bij het wijzigen van bericht status!",removeMessage:"Fout bij het verwijderen van het bericht!",removeMessages:"Fout bij het verwijderen van de berichten!",restoreMessage:"Fout bij het terugzetten van het bericht!",restoreMessages:"Fout bij het terugzetten van de berichten!",emptyTrash:"Fout bij het leegmaken van de prullenbak!",send:"Fout bij het verzenden van bericht!",notificationsList:"Fout bij het ophalen van de geplande notificaties!",notificationsGet:"Fout bij het ophalen van een geplande notificatie!",notificationsAdd:"Fout bij het aanmaken van een geplande notificatie!"},timeline:{query:"Er is iets fout gegaan bij het laden van de tijdlijndata. Vernieuw deze webpagina om het nogmaals te proberen.",pastAdding:"Invoer van tijden in het verleden is niet toegestaan!",add:"Error with adding a new timeslot!",change:"Error with changing timeslot!",pastChanging:"Veranderen van tijden in het verleden is niet toegestaan!",pastDeleting:"Verwijderen van tijden in het verleden is niet toegestaan!",remove:"Error with removing timeslot!",wisher:"Error with changing wish value!"}},confirms:{remove:"Weet u zeker dat u dit wilt verwijderen? U kunt dit niet ongedaan maken."}}};localStorage.removeItem("WebPaige.periods"),localStorage.removeItem("WebPaige.periodsNext"),angular.module("WebPaige",["ngResource","WebPaige.Modals.User","WebPaige.Modals.Dashboard","WebPaige.Modals.Slots","WebPaige.Modals.Messages","WebPaige.Modals.Groups","WebPaige.Modals.Profile","WebPaige.Modals.Settings","WebPaige.Controllers.Login","WebPaige.Controllers.Logout","WebPaige.Controllers.Dashboard","WebPaige.Controllers.TV","WebPaige.Controllers.Planboard","WebPaige.Controllers.Timeline","WebPaige.Controllers.Timeline.Navigation","WebPaige.Controllers.Messages","WebPaige.Controllers.Scheaduler","WebPaige.Controllers.Groups","WebPaige.Controllers.Profile","WebPaige.Controllers.Settings","WebPaige.Controllers.Help","WebPaige.Services.Timer","WebPaige.Services.Session","WebPaige.Services.Dater","WebPaige.Services.EventBus","WebPaige.Services.Interceptor","WebPaige.Services.MD5","WebPaige.Services.Storage","WebPaige.Services.Strings","WebPaige.Services.Announcer","WebPaige.Services.Sloter","WebPaige.Services.Stats","WebPaige.Services.Offsetter","WebPaige.Directives","$strap.directives","WebPaige.Filters"]),"localStorage"in window&&null!==window.localStorage&&basket.require({url:"libs/chosen/chosen.jquery.min.js"},{url:"libs/bootstrap-datepicker/bootstrap-datepicker.min.js"},{url:"libs/bootstrap-timepicker/bootstrap-timepicker.min.js"},{url:"libs/daterangepicker/1.1.0/daterangepicker.min.js"},{url:"libs/sugar/1.3.7/sugar.min.js"},{url:"libs/raphael/2.1.0/raphael-min.js"}).then(function(){basket.require({url:"libs/g-raphael/0.5.1/g.raphael-min.js"},{url:"libs/g-raphael/0.5.1/g.pie-min.js"}).then(function(){})}),angular.module("WebPaige").value("$config",{title:"WebPaige",version:"2.3.12",lang:"nl",fullscreen:!0,demo_users:!1,smartAlarm:profile.smartAlarm,profile:{meta:profile.meta,title:profile.title,logos:{login:"profiles/"+profile.meta+"/img/login_logo.png",app:""},background:"profiles/"+profile.meta+"/img/login_bg.jpg",p2000:profile.p2000,mobileApp:profile.mobileApp,smartAlarm:profile.smartAlarm},statesall:{"com.ask-cs.State.Available":{className:"state-available",label:"Beschikbaar",color:"#4f824f",type:"Beschikbaar",display:!0},"com.ask-cs.State.KNRM.BeschikbaarNoord":{className:"state-available-north",label:"Beschikbaar voor Noord",color:"#000",type:"Beschikbaar",display:!0},"com.ask-cs.State.KNRM.BeschikbaarZuid":{className:"state-available-south",label:"Beschikbaar voor Zuid",color:"#e08a0c",type:"Beschikbaar",display:!0},"com.ask-cs.State.Unavailable":{className:"state-unavailable",label:"Niet Beschikbaar",color:"#a93232",type:"Niet Beschikbaar",display:!0},"com.ask-cs.State.KNRM.SchipperVanDienst":{className:"state-schipper-service",label:"Schipper van Dienst",color:"#e0c100",type:"Beschikbaar",display:!0},"com.ask-cs.State.Unreached":{className:"state-unreached",label:"Niet Bereikt",color:"#65619b",type:"Niet Beschikbaar",display:!1}},host:profile.host(),formats:{date:"dd-MM-yyyy",time:"HH:mm",datetime:"dd-MM-yyyy HH:mm",datetimefull:"dd-MM-yyyy HH:mm:ss"},roles:profile.roles,timeline:{options:{axisOnTop:!0,width:"100%",height:"auto",selectable:!0,editable:!0,style:"box",groupsWidth:"150px",eventMarginAxis:0,showCustomTime:!0,groupsChangeable:!1,showNavigation:!1,intervalMin:36e5},config:{zoom:"0.4",bar:!1,layouts:profile.timeline.config.layouts,wishes:!1,legenda:{},legendarer:!1,states:{},divisions:profile.divisions,densities:{less:"#a0a0a0",even:"#ba6a24",one:"#415e6b",two:"#3d5865",three:"#344c58",four:"#2f4550",five:"#2c424c",six:"#253943",more:"#486877"}}},pie:{colors:["#415e6b","#ba6a24","#a0a0a0"]},defaults:{settingsWebPaige:{user:{language:"nl"},app:{widgets:{groups:{}}}}},cookie:{expiry:30,path:"/"},init:function(){var e=this;angular.forEach(profile.states,function(t){e.timeline.config.states[t]=e.statesall[t]})}}),angular.module("WebPaige").config(["$locationProvider","$routeProvider","$httpProvider",function(e,t,r){t.when("/login",{templateUrl:"dist/views/login.html",controller:"login"}).when("/logout",{templateUrl:"dist/views/logout.html",controller:"logout"}).when("/dashboard",{templateUrl:"dist/views/dashboard.html",controller:"dashboard"}).when("/tv",{templateUrl:"dist/views/tv.html",controller:"tv",resolve:{data:["$route","$http",function(e,t){e.current.params.sessionID&&(t.defaults.headers.common["X-SESSION_ID"]=e.current.params.sessionID)}]}}).when("/planboard",{templateUrl:"dist/views/planboard.html",controller:"planboard",resolve:{data:["$route","Slots","Storage","Dater",function(e,t,r,n){var a=r.local.periods(),o=r.local.settings(),i={};return i=n.current.today()>360?{start:a.days[358].last.timeStamp,end:a.days[365].last.timeStamp}:{start:a.days[n.current.today()-1].last.timeStamp,end:a.days[n.current.today()+6].last.timeStamp},t.all({groupId:o.app.group,stamps:i,month:n.current.month(),layouts:{user:!0,group:!0,members:!1}})}]},reloadOnSearch:!1}).when("/messages",{templateUrl:"dist/views/messages.html",controller:"messages",resolve:{data:["$route","Messages",function(e,t){return t.query()}]},reloadOnSearch:!1}).when("/groups",{templateUrl:"dist/views/groups.html",controller:"groups",resolve:{data:["Groups",function(e){return e.query()}]},reloadOnSearch:!1}).when("/profile/:userId",{templateUrl:"dist/views/profile.html",controller:"profile",resolve:{data:["$rootScope","Profile","$route","$location",function(e,t,r){if(r.current.params.userId.toLowerCase()!=e.app.resources.uuid){var n=new Date((new Date).getFullYear(),0,1),a=angular.fromJson(localStorage.getItem("WebPaige.periods")),o=Math.ceil(((new Date-n)/864e5+n.getDay()+1)/7),i={start:a.weeks[o].first.timeStamp/1e3,end:a.weeks[o].last.timeStamp/1e3};return t.getWithSlots(r.current.params.userId.toLowerCase(),!1,i)}return t.get(r.current.params.userId.toLowerCase(),!1)}]},reloadOnSearch:!1}).when("/profile",{templateUrl:"dist/views/profile.html",controller:"profile",resolve:{data:["$rootScope","$route","$location",function(e,t,r){t.current.params.userId&&r.hash()||r.path("/profile/"+e.app.resources.uuid).hash("profile")}]}}).when("/settings",{templateUrl:"dist/views/settings.html",controller:"settings",resolve:{data:["Settings",function(e){return angular.fromJson(e.get())}]}}).when("/help",{templateUrl:"dist/views/help.html",controller:"help"}).otherwise({redirectTo:"/login"}),r.responseInterceptors.push("Interceptor")}]),angular.module("WebPaige").run(["$rootScope","$location","$timeout","Session","Dater","Storage","Messages","$config","$window",function(e,t,r,n,a,o,i,s,u){e.config=s,e.config.init(),$("#notification").removeClass("ng-cloak"),e.browser=$.browser,angular.extend(e.browser,{screen:u.screen}),e.browser.ios?angular.extend(e.browser,{landscape:!(90!=Math.abs(u.orientation)),portrait:!(90==Math.abs(u.orientation))}):angular.extend(e.browser,{landscape:!(90==Math.abs(u.orientation)),portrait:!(90!=Math.abs(u.orientation))}),u.onresize=function(){e.browser.screen=u.screen},u.onorientationchange=function(){e.$apply(function(){e.browser.ios?angular.extend(e.browser,{landscape:!(90!=Math.abs(u.orientation)),portrait:!(90==Math.abs(u.orientation))}):angular.extend(e.browser,{landscape:!(90==Math.abs(u.orientation)),portrait:!(90!=Math.abs(u.orientation))})
})},e.changeLanguage=function(t){e.ui=ui[t]},e.ui=ui[e.config.lang],o.get("periods")||a.registerPeriods(),e.app=e.app||{},e.app.resources=angular.fromJson(o.get("resources")),e.config.timeline.config.divisions=angular.fromJson(o.get("divisions"));var l=angular.fromJson(o.get("registeredNotifications"));l?e.registeredNotifications=l:o.add("registeredNotifications",angular.toJson({timeLineDragging:!0})),e.registerNotification=function(t,r){e.registeredNotifications[t]=r,o.add("registeredNotifications",angular.toJson(e.registeredNotifications))},e.app.unreadMessages||i.unreadCount(),e.app.guard=angular.fromJson(o.get("guard"))?angular.fromJson(o.get("guard")):{monitor:"",role:"",currentState:"",currentStateClass:""},e.statusBar={init:function(){e.loading={status:!1,message:"Aan het laden.."},e.app.preloader={status:!1,total:0,count:0}},display:function(t){e.app.preloader.status=!1,e.loading={status:!0,message:t}},off:function(){e.loading.status=!1}},e.statusBar.init(),e.notification={status:!1,type:"",message:""},e.notifier={init:function(t,r,n,a,o){e.notification.status=!0,e.browser.mobile&&1==t?u.alert(n):e.notification={status:t,type:r,message:n,confirm:a,options:o}},success:function(e,t){this.init(!0,"alert-success",e),t||this.destroy()},error:function(e,t){this.init(!0,"alert-danger",e),t||this.destroy()},alert:function(e,t,r,n){this.init(!0,"",e,r,n),t||this.destroy()},destroy:function(){setTimeout(function(){e.notification.status=!1},5e3)}},e.notifier.init(!1,"",""),e.fireDeleteRequest=function(t){switch(t.section){case"groups":e.$broadcast("fireGroupDelete",{id:t.id})}},e.$on("$routeChangeStart",function(){function r(){e.loaderIcons={general:!1,dashboard:!1,planboard:!1,messages:!1,groups:!1,profile:!1,settings:!1}}switch(r(),t.path()){case"/dashboard":e.loaderIcons.dashboard=!0,e.location="dashboard";break;case"/planboard":e.loaderIcons.planboard=!0,e.location="planboard";break;case"/messages":e.loaderIcons.messages=!0,e.location="messages";break;case"/groups":e.loaderIcons.groups=!0,e.location="groups";break;case"/settings":e.loaderIcons.settings=!0,e.location="settings";break;default:t.path().match(/profile/)?(e.loaderIcons.profile=!0,e.location="profile"):e.loaderIcons.general=!0}t.path().match(/logout/)&&(e.location="logout"),e.location||ga("send","Undefined Page",t.path()),ga("send","pageview",{page:"/index.html#/"+e.location||"login",title:e.location||"login"}),"/tv"!=t.path()&&(n.check()||t.path("/login")),e.loadingBig=!0,e.statusBar.display("Aan het laden..."),$("div[ng-view]").hide()}),e.$on("$routeChangeSuccess",function(){e.newLocation=t.path(),e.loadingBig=!1,e.statusBar.off(),$("div[ng-view]").show()}),e.$on("$routeChangeError",function(t,r,n,a){e.notifier.error(a)}),e.fixStyles=function(){e.timelineLoaded=!1;var t=$(".tabs-left .nav-tabs").height();$.each($(".tab-content").children(),function(){var e=($(this),$(this).attr("id")),r=$(".tabs-left .tab-content #"+e).height();t>r&&$(".tabs-left .tab-content #"+e).css({height:$(".tabs-left .nav-tabs").height()-41})}),($.os.mac||$.os.linux)&&$(".nav-tabs-app li a span").css({paddingTop:"10px",marginBottom:"0px"})},e.fullScreen=function(){screenfull.toggle($("html")[0])},$.os.windows&&$("#loading p").css({paddingTop:"130px"}),$.browser.msie&&"8.0"==$.browser.version&&(document.title=e.config.profile.title),s.profile.mobileApp.status||$("#copyrights span.muted").css({right:0}),e.downloadMobileApp=function(t){e.statusBar.display("Instructies aan het verzenden..."),i.email(t).then(function(){e.notifier.success("Controleer uw inbox voor de instructies."),e.statusBar.off()})}}]),angular.module("WebPaige.Modals.User",["ngResource"]).factory("User",["$resource","$config","$q","$location","Storage","$rootScope",function(e,t,r,n,a){var o=e(),i=e(t.host+"/login",{},{process:{method:"GET",params:{uuid:"",pass:""}}}),s=e(t.host+"/logout",{},{process:{method:"GET",params:{},isArray:!0}}),u=e(t.host+"/resources",{},{get:{method:"GET",params:{}}}),l=e(t.host+"/divisions",{},{get:{method:"GET",params:{},isArray:!0}}),d=e(t.host+"/passwordReset",{},{password:{method:"GET",params:{uuid:"",path:""},isArray:!0}}),c=e(t.host+"/passwordReset",{},{reset:{method:"GET",params:{uuid:"",pass:"",key:""}}});return o.prototype.divisions=function(){var e=r.defer();return l.get({},function(t){e.resolve(t)},function(t){e.resolve(t)}),e.promise},o.prototype.password=function(e){var t=r.defer();return d.password({uuid:e.toLowerCase(),path:n.absUrl()},function(e){angular.equals(e,[])||angular.equals(e,[{}])?t.resolve("ok"):t.resolve(e)},function(e){t.resolve(e)}),t.promise},o.prototype.login=function(e,t){var n=r.defer();return i.process({uuid:e,pass:t},function(e){angular.equals(e,[])?n.reject("Something went wrong with login!"):n.resolve(e)},function(e){n.resolve(e)}),n.promise},o.prototype.changePass=function(e,t,n){var a=r.defer();return c.get({uuid:e,pass:t,key:n},function(e){a.resolve(e)},function(e){a.resolve(e)}),a.promise},o.prototype.logout=function(){var e=r.defer();return s.process(null,function(t){e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},o.prototype.resources=function(){var e=r.defer();return u.get(null,function(t){angular.equals(t,[])?e.reject("User has no resources!"):(a.add("resources",angular.toJson(t)),e.resolve(t))},function(t){e.resolve({error:t})}),e.promise},new o}]),angular.module("WebPaige.Modals.Dashboard",["ngResource"]).factory("Dashboard",["$rootScope","$resource","$config","$q","Storage","Slots","Dater","Announcer","$http",function(e,t,r,n,a,o,i,s){var u=t("http://knrm.myask.me/rpc/client/p2000.php",{},{p2000:{method:"GET",params:{},isArray:!0}}),l=t(r.host+"/capcodes",{},{capcodes:{method:"GET",params:{},isArray:!0}});return u.prototype.pies=function(){var t=n.defer(),r=angular.fromJson(a.get("groups")),i=a.local.settings().app.widgets.groups,s=[];return 0===i.length&&console.warn("no settings"),angular.forEach(r,function(t){i[t.uuid]&&i[t.uuid].status&&(0==e.config.timeline.config.divisions.length?s.push(o.pie({id:t.uuid,name:t.name,division:"both"})):i[t.uuid].divisions?angular.forEach(e.config.timeline.config.divisions,function(e){"all"!==e.id&&s.push(o.pie({id:t.uuid,name:t.name,division:e.id}))}):s.push(o.pie({id:t.uuid,name:t.name,division:"both"})))}),n.all(s).then(function(r){e.statusBar.off(),t.resolve(r)}),t.promise},u.prototype.getCapcodes=function(){function e(e){var t="";return angular.forEach(e,function(e){t+=e}),Number(t)}var t=n.defer();return l.capcodes(null,function(r){var n=[];angular.forEach(r,function(t){n.push(e(t))}),t.resolve(n)},function(e){t.resolve({error:e})}),t.promise},u.prototype.p2000=function(){var t=n.defer();return e.statusBar.display(e.ui.dashboard.gettingAlarms),e.config.profile.smartAlarm?$.ajax({url:e.config.profile.p2000.url,dataType:"json",success:function(r){e.statusBar.off();var n=s.process(r,!0);t.resolve({alarms:n,synced:(new Date).getTime()})},error:function(){t.resolve({error:error})}}):u.prototype.getCapcodes().then(function(n){$.ajax({url:r.profile.p2000.url+"?code="+n,dataType:"jsonp",success:function(r){e.statusBar.off();var n=s.process(r);t.resolve({alarms:n,synced:(new Date).getTime()})},error:function(){t.resolve({error:error})}})}),t.promise},new u}]),angular.module("WebPaige.Modals.Slots",["ngResource"]).factory("Slots",["$rootScope","$config","$resource","$q","Storage","Dater","Sloter","Stats",function(e,t,r,n,a,o,i,s){function u(e){var t=angular.fromJson(e.content);return{start:Math.floor(new Date(e.start).getTime()/1e3),end:Math.floor(new Date(e.end).getTime()/1e3),recursive:t.recursive,text:t.state,id:t.id}}var l=r(t.host+"/askatars/:user/slots",{user:""},{query:{method:"GET",params:{start:"",end:""},isArray:!0},change:{method:"PUT",params:{start:"",end:"",text:"",recursive:""}},save:{method:"POST",params:{}},remove:{method:"DELETE",params:{}}}),d=r(t.host+"/calc_planning/:id",{},{query:{method:"GET",params:{id:"",start:"",end:""},isArray:!0}}),c=r(t.host+"/network/:id/wish",{},{query:{method:"GET",params:{id:"",start:"",end:""},isArray:!0},save:{method:"PUT",params:{id:""}}}),g=r(t.host+"/network/:id/member/slots2",{},{query:{method:"GET",params:{id:"",start:"",end:""}}});l.prototype.wishes=function(e){var t=n.defer(),r={id:e.id,start:e.start,end:e.end};return c.query(r,function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise},l.prototype.setWish=function(e){var t=n.defer(),r={start:e.start,end:e.end,wish:e.wish,recurring:e.recursive};return c.save({id:e.id},r,function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise},l.prototype.aggs=function(t){var r=n.defer(),a=[];return e.config.timeline.config.divisions.length>0?angular.forEach(e.config.timeline.config.divisions,function(e){if("all"!==e.id){var r={id:t.id,start:t.start,end:t.end,stateGroup:e.id,division:{id:e.id,label:e.label}};a.push(l.prototype.agg(r))}}):a.push(l.prototype.agg({id:t.id,start:t.start,end:t.end})),n.all(a).then(function(e){r.resolve(e)}),r.promise},l.prototype.agg=function(e){var t=n.defer();return d.query(e,function(r){var n=s.aggs(r);t.resolve({id:e.id,division:e.division,data:r,ratios:n.ratios,durations:n.durations})},function(e){t.resolve({error:e})}),t.promise},l.prototype.pie=function(e){function r(r){var n;if(r.length>1){angular.forEach(r,function(e){i>=e.start&&e.end>=i&&(n=e),1e3*e.start>=g?c.next.data.push(e):g>=1e3*e.start&&c.current.data.push(e)});var a=c.current.data[c.current.data.length-1],o=(c.next.data[0],(1e3*a.end-g)/1e3),u=[];return c.current.data[0].start=c.current.period.first.timeStamp/1e3,o>0&&(a.end=g/1e3,c.next.data.unshift({diff:a.diff,start:g/1e3,end:a.end,wish:a.wish})),angular.forEach(c.current.data,function(e){e.end-e.start>0&&u.push(e),0>e.diff&&c.current.shortages.push(e)}),u[0].start=c.current.period.first.timeStamp/1e3,angular.forEach(c.next.data,function(e){0>e.diff&&c.next.shortages.push(e)}),{id:e.id,division:e.division,name:e.name,weeks:{current:{data:u,state:n,shortages:c.current.shortages,start:{date:new Date(c.current.period.first.timeStamp).toString(t.formats.date),timeStamp:c.current.period.first.timeStamp},end:{date:new Date(c.current.period.last.timeStamp).toString(t.formats.date),timeStamp:c.current.period.last.timeStamp},ratios:s.pies(u)},next:{data:c.next.data,shortages:c.next.shortages,start:{date:new Date(c.next.period.first.timeStamp).toString(t.formats.date),timeStamp:c.next.period.first.timeStamp},end:{date:new Date(c.next.period.last.timeStamp).toString(t.formats.date),timeStamp:c.next.period.last.timeStamp},ratios:s.pies(c.next.data)}}}}null==r[0].diff&&(r[0].diff=0),null==r[0].wish&&(r[0].wish=0);var l=[{start:c.current.period.first.timeStamp/1e3,end:c.current.period.last.timeStamp/1e3,wish:r[0].wish,diff:r[0].diff}],d=[{start:c.next.period.first.timeStamp/1e3,end:c.next.period.last.timeStamp/1e3,wish:r[0].wish,diff:r[0].diff}];return 0>l[0].diff&&c.current.shortages.push(l[0]),0>d[0].diff&&c.next.shortages.push(d[0]),{id:e.id,division:e.division,name:e.name,weeks:{current:{data:l,state:l,shortages:c.current.shortages,start:{date:new Date(c.current.period.first.timeStamp).toString(t.formats.date),timeStamp:c.current.period.first.timeStamp},end:{date:new Date(c.current.period.last.timeStamp).toString(t.formats.date),timeStamp:c.current.period.last.timeStamp},ratios:s.pies(l)},next:{data:d,shortages:c.next.shortages,start:{date:new Date(c.next.period.first.timeStamp).toString(t.formats.date),timeStamp:c.next.period.first.timeStamp},end:{date:new Date(c.next.period.last.timeStamp).toString(t.formats.date),timeStamp:c.next.period.last.timeStamp},ratios:s.pies(d)}}}}var a=n.defer(),i=Math.floor(Date.now().getTime()/1e3),u=o.getPeriods(),l=o.current.week(),c={current:{period:u.weeks[l],data:[],shortages:[]},next:{period:u.weeks[l+1],data:[],shortages:[]}},g=c.current.period.last.timeStamp,m={id:e.id,start:c.current.period.first.timeStamp/1e3,end:c.next.period.last.timeStamp/1e3};return"both"!=e.division&&(m.stateGroup=e.division),d.query(m,function(e){a.resolve(r(e))},function(e){a.resolve({error:e})}),a.promise};var m={init:function(t){e.app.preloader={status:!0,total:t,count:0,started:Date.now().getTime()}},count:function(){e.app.preloader.count=Math.abs(Math.floor(e.app.preloader.count+100/e.app.preloader.total)),e.app.preloader.stopped=Date.now().getTime()}};return l.prototype.currentState=function(){var t;t=Date.now().getTime()+"",t=Number(t.substr(0,t.length-3));var r=n.defer(),o={user:angular.fromJson(a.get("resources")).uuid,start:t,end:t+1};return l.query(o,function(t){r.resolve(t.length>0?e.config.statesall[t[0].text]:{color:"gray",label:"Geen planning"})}),r.promise},l.prototype.all=function(e){var t=n.defer(),r=(o.getPeriods(),{user:angular.fromJson(a.get("resources")).uuid,start:e.stamps.start/1e3,end:e.stamps.end/1e3});return l.query(r,function(n){if(angular.forEach(n,function(e){e.recursive||(e.recursive=!1)}),e.layouts.group){var o={id:e.groupId,start:r.start,end:r.end,month:e.month};l.prototype.aggs(o).then(function(o){if(e.layouts.members){var i=angular.fromJson(a.get(e.groupId));g.query({id:e.groupId,start:r.start,end:r.end,type:"both"},function(r){var a=[];angular.forEach(r,function(e,t){angular.forEach(e,function(e){e.text=e.state});var r;angular.forEach(i,function(e){t==e.uuid&&(r=e.resources.lastName)}),a.push({id:t,lastName:r,data:e,stats:s.member(e)})}),t.resolve({user:n,groupId:e.groupId,aggs:o,members:a,synced:(new Date).getTime(),periods:{start:e.stamps.start,end:e.stamps.end}})},function(e){t.resolve({error:e})})}else t.resolve({user:n,groupId:e.groupId,aggs:o,synced:(new Date).getTime(),periods:{start:e.stamps.start,end:e.stamps.end}})})}else t.resolve({user:n,synced:(new Date).getTime(),periods:{start:e.stamps.start,end:e.stamps.end}})},function(e){t.resolve({error:e})}),t.promise},l.prototype.user=function(e){var t=n.defer();return l.query(e,function(r){m.count(),t.resolve({id:e.user,data:r,stats:s.member(r)})},function(e){t.resolve({error:e})}),t.promise},l.prototype.local=function(){return angular.fromJson(a.get("slots"))},l.prototype.add=function(e,t){var r=n.defer();return l.save({user:t},e,function(e){r.resolve(e)},function(e){r.resolve({error:e})}),r.promise},l.prototype.change=function(e,t,r){var a=n.defer();return l.change(angular.extend(u(t),{user:r}),u(e),function(e){a.resolve(e)},function(e){a.resolve({error:e})}),a.promise},l.prototype.remove=function(e,t){var r=n.defer();return l.remove(angular.extend(u(e),{user:t}),function(e){r.resolve(e)},function(e){r.resolve({error:e})}),r.promise},new l}]),angular.module("WebPaige.Modals.Messages",["ngResource"]).factory("Messages",["$rootScope","$config","$resource","$q","Storage","$http",function(e,t,r,n,a,o){var i=r(t.host+"/question/:action",{},{query:{method:"GET",params:{action:"",0:"dm"},isArray:!0},get:{method:"GET",params:{}},send:{method:"POST",params:{action:"sendDirectMessage"}},save:{method:"POST",params:{}},changeState:{method:"POST",params:{action:"changeState"}},remove:{method:"POST",params:{action:"deleteQuestions"}}}),s=r(t.host+"/notification/:uuid",{},{query:{method:"GET",params:{},isArray:!0},get:{method:"GET",params:{uuid:""}},save:{method:"POST",params:{}},edit:{method:"PUT",params:{uuid:""}},remove:{method:"DELETE",params:{uuid:""}}});return i.prototype.query=function(){var t=n.defer();return i.query(function(r){a.add("messages",angular.toJson(r)),i.prototype.unreadCount(),e.config.profile.smartAlarm?t.resolve({messages:i.prototype.filter(r),scheadules:{}}):i.prototype.scheaduled.list().then(function(e){t.resolve({messages:i.prototype.filter(r),scheadules:e})})},function(e){t.resolve({error:e})}),t.promise},i.prototype.scheaduled={list:function(){var e=n.defer();return s.query(function(t){a.add("notifications",angular.toJson(t)),angular.forEach(t,function(e){angular.forEach(e.types,function(t){"sms"==t&&(e.sms=!0),"email"==t&&(e.mail=!0)})}),e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},create:function(e){var t=n.defer();return s.save(null,angular.toJson(e),function(e){var r="";angular.forEach(e,function(e){r+=e}),t.resolve(r)},function(e){t.resolve({error:e})}),t.promise},edit:function(e,t){var r=n.defer();return s.edit({uuid:e},angular.toJson(t),function(e){r.resolve(e)},function(e){r.resolve({error:e})}),r.promise},get:function(e){var t=n.defer();return s.get({uuid:e},function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise},find:function(e){var t;return angular.forEach(this.local(),function(r){r.uuid==e&&(t=r)}),t},local:function(){return angular.fromJson(a.get("notifications"))},remove:function(e){var t=n.defer();return s.remove({uuid:e},function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise}},i.prototype.filter=function(e){var t={inbox:[],outbox:[],trash:[]};angular.forEach(e,function(e){""==e.subject&&(e.subject="-No Subject-"),"inbox"==e.box&&"TRASH"!=e.state?t.inbox.push(e):"outbox"==e.box&&"TRASH"!=e.state?t.outbox.push(e):"inbox"!=e.box&&"outbox"!=e.box||"TRASH"!=e.state||t.trash.push(e)});var r=function(e){for(var t=50,r=e.length,n=0,a=[];r>n*t;)a[n]=e.slice(n*t,(n+1)*t),n++;return a};return t.inbox=r(t.inbox),t.outbox=r(t.outbox),t.trash=r(t.trash),t},i.prototype.local=function(){return angular.fromJson(a.get("messages"))},i.prototype.find=function(e){var t;return angular.forEach(i.prototype.local(),function(r){r.uuid==e&&(t=r)}),t},i.prototype.receviers=function(){var t=angular.fromJson(a.get("members")),r=angular.fromJson(a.get("groups")),n=[];return angular.forEach(t,function(t){n.push({id:t.uuid,name:t.name,lastName:t.resources.lastName,firstName:t.resources.firstName,group:e.ui.message.receiversUsers})}),angular.forEach(r,function(t){n.push({id:t.uuid,name:t.name,lastName:t.name,group:e.ui.message.receiversGroups})}),n},i.prototype.send=function(e,t){var r=n.defer(),a=[],o=[];angular.forEach(e.receivers,function(e){a.push(e.id)}),o.push("paige"),t.sms&&o.push("sms"),t.email&&o.push("email");var e={members:a,content:e.body,subject:e.subject,types:o};return i.send(null,e,function(e){var t="";angular.forEach(e,function(e){t+=e}),r.resolve(t)},function(e){r.resolve({error:e})}),r.promise},i.prototype.email=function(e){var r,a=n.defer();return"regular"==e?r="/mail/mobile_app.html":"experimental"==e&&(r="/mail/mobile_app_experimental.html"),o({method:"GET",url:"../profiles/"+t.profile.meta+r}).success(function(e){var t={content:e,subject:"Mobiele App Instructies",types:["email"],contenttype:"text/html"};i.send(null,t,function(e){var t="";angular.forEach(e,function(e){t+=e}),a.resolve(t)},function(e){a.resolve({error:e})})}).error(function(e,t,r,n){console.log("Something went wrong terribly with emailing the message!",e,t,r,n)}),a.promise},i.prototype.unread=function(){var e=i.prototype.local(),t=[];return angular.forEach(e,function(e){"inbox"==e.box&&"NEW"==e.state&&t.push(e)}),t},i.prototype.unreadCount=function(){var t=i.prototype.local(),r=0;angular.forEach(t,function(e){"inbox"==e.box&&"NEW"==e.state&&r++}),e.app.unreadMessages=r},i.prototype.changeState=function(e,t){var r=n.defer();if(i.changeState(null,{ids:e,state:t},function(e){r.resolve(e)},function(e){r.resolve({error:e})}),"READ"==t){var o=angular.fromJson(a.get("messages")),s=[];angular.forEach(o,function(t){angular.forEach(e,function(e){t.uuid==e&&(t.state="READ")}),s.push(t)}),a.remove("messages"),a.add(angular.toJson("messages",s)),i.prototype.unreadCount()}return r.promise},i.prototype.remove=function(e){var t=n.defer();return i.prototype.changeState(e,"TRASH").then(function(e){t.resolve(e)}),t.promise},i.prototype.restore=function(e){var t=n.defer();return i.prototype.changeState(e,"SEEN").then(function(e){t.resolve(e)}),t.promise},i.prototype.emptyTrash=function(){var e=n.defer(),t=i.prototype.local(),r=[];return angular.forEach(t,function(e){"inbox"!=e.box&&"outbox"!=e.box||"TRASH"!=e.state||r.push(e.uuid)}),i.remove(null,{members:r},function(t){e.resolve(t)},function(t){e.resolve({error:t})}),e.promise},i.prototype.clean=function(e){var t=n.defer(),r=[];return angular.forEach(e,function(e){var t=[];angular.forEach(e,function(e){t.push(e.uuid)}),r.push(i.remove(null,{members:t}))}),n.all(r).then(function(e){t.resolve(e)}),t.promise},new i}]),angular.module("WebPaige.Modals.Groups",["ngResource"]).factory("Groups",["$resource","$config","$q","Storage","$rootScope","Slots","$location",function(e,t,r,n,a,o,i){var s=e(t.host+"/network/:action/:id",{},{query:{method:"GET",params:{},isArray:!0},get:{method:"GET",params:{id:""}},save:{method:"POST",params:{id:""}},edit:{method:"PUT",params:{id:""}},remove:{method:"DELETE",params:{id:""}},search:{method:"POST",params:{id:"",action:"searchPaigeUser"},isArray:!0}}),u=e(t.host+"/node/:id/container",{},{get:{method:"GET",params:{id:""},isArray:!0}}),l=e(t.host+"/parent",{},{get:{method:"GET",params:{},isArray:!0}}),d=e(t.host+"/network/:id/members/:mid",{},{query:{method:"GET",params:{id:"",fields:"[role, settingsWebPaige]"},isArray:!0},get:{method:"GET",params:{id:""}},save:{method:"POST",params:{}},add:{method:"POST",params:{id:"",mid:""}},remove:{method:"DELETE",params:{id:"",mid:""}}}),c=e(t.host+"/network/guard/:id/:team",{},{global:{method:"GET",isArray:!0},position:{method:"GET",params:{id:"",team:""}}});return s.prototype.guardMonitor=function(){var e=r.defer(),t=angular.fromJson(n.get("guard"))||{};return c.global(null,function(r){var o="";angular.forEach(r[0],function(e){o+=e}),t.monitor=o,n.add("guard",angular.toJson(t)),a.app.guard.monitor=o,e.resolve(o)},function(t){e.resolve({error:t})}),e.promise},s.prototype.guardRole=function(){var e=r.defer(),t=this;return t.guard=angular.fromJson(n.get("guard")),c.position({id:t.guard.monitor,team:"status"},function(r){var o=angular.fromJson(n.get("members"));t.guard.synced=(new Date).getTime(),t.guard.users={},angular.forEach(r.station,function(e){("agent"!=e[0]||"state"!=e[1])&&(t.guard.users[e[0]]={name:o&&o[e[0]]&&o[e[0]].name||e[0],state:e[1]})}),t.guard.truck=[],t.guard.selection={},angular.forEach(r.selection,function(e,n){t.guard.selection[n]={user:e.agentID},null!=e.agentID&&t.guard.truck.push(e.agentID),"/tv"!=i.path()&&e.agentID==a.app.resources.uuid&&(t.guard.role=r.map[n].name)}),angular.forEach(r.map,function(e,r){t.guard.selection[r].role=e.name}),t.guard.reserves={available:[],unavailable:[],noplanning:[]},angular.forEach(t.guard.users,function(e,r){if(-1==t.guard.truck.indexOf(r)){var n={};n[r]=e,t.guard.reserves[e.state].push(n)}}),n.add("guard",angular.toJson(t.guard)),e.resolve(t.guard)},function(t){e.resolve({error:t})}),e.promise},s.prototype.parents=function(e){var t=r.defer();return l.get(null,function(r){e?t.resolve(r):0==r.length?t.resolve(null):t.resolve(r[0].uuid)},function(e){t.resolve({error:e})}),t.promise},s.prototype.containers=function(e){var t=r.defer(),n=[];return u.get({id:e},function(e){angular.forEach(e,function(e){var t=[];angular.forEach(e,function(e){t+=e}),n.push(t)}),t.resolve(n)},function(e){t.resolve({error:e})}),t.promise},s.prototype.addMember=function(e){var t=r.defer();return d.add({id:e.group.uuid,mid:e.id},{},function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise},s.prototype.removeMember=function(e,t){var n=r.defer();return d.remove({id:t,mid:e},function(e){n.resolve(e)},function(e){n.resolve({error:e})}),n.promise},s.prototype.removeMembers=function(e,t){var n=r.defer(),a=[];return angular.forEach(e,function(e,r){r&&a.push(s.prototype.removeMember(r,t.uuid))}),r.all(a).then(function(e){n.resolve(e)}),n.promise},s.prototype.wish=function(e){var t=r.defer(),n=0;return o.wishes({id:e,start:255600,end:860400}).then(function(e){angular.forEach(e,function(e){255600==e.start&&860400==e.end&&null!=e.count&&(n=e.count)}),t.resolve({count:n})}),t.promise},s.prototype.query=function(e){var t=r.defer();return s.query(function(a){if(n.add("groups",angular.toJson(a)),e)t.resolve(a);else{var o=[];angular.forEach(a,function(e){o.push(s.prototype.get(e.uuid))}),r.all(o).then(function(e){s.prototype.uniqueMembers();var r={};r.members={},angular.forEach(a,function(t){r.groups=a,r.members[t.uuid]=[],angular.forEach(e,function(e){e.id==t.uuid&&(r.members[t.uuid]=e.data)})}),t.resolve(r)})}},function(e){t.resolve({error:e})}),t.promise},s.prototype.get=function(e){var t=r.defer();return d.query({id:e},function(r){var a;a=4==r.length&&"n"==r[0][0]&&"u"==r[1][0]?[]:r,n.add(e,angular.toJson(a)),t.resolve({id:e,data:a})},function(e){t.resolve({error:e})}),t.promise},s.prototype.uniqueMembers=function(){angular.forEach(angular.fromJson(n.get("groups")),function(e){var t=angular.fromJson(n.get("members"))||{};angular.forEach(angular.fromJson(n.get(e.uuid)),function(e){t[e.uuid]=e}),n.add("members",angular.toJson(t))})},s.prototype.save=function(e){var t=r.defer();return e.id?s.edit({id:e.id},{name:e.name},function(){t.resolve(e.id)}):s.save({id:a.app.resources.uuid},e,function(e){var r="";angular.forEach(e,function(e){r+=e}),t.resolve(r)},function(e){t.resolve({error:e})}),t.promise},s.prototype.remove=function(e){var t=r.defer();return s.remove({id:e},function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise},s.prototype.search=function(e){var t=r.defer();return s.search(null,{key:e},function(e){var r=[];e.sort(function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase();return n>r?-1:r>n?1:0}),angular.forEach(e,function(e){r.push({id:e.id,name:e.name,groups:s.prototype.getMemberGroups(e.id)})}),t.resolve(r)},function(e){t.resolve({error:e})}),t.promise},s.prototype.getMemberGroups=function(e){var t=angular.fromJson(n.get("groups")),r=[];return angular.forEach(t,function(t){var a=angular.fromJson(n.get(t.uuid));angular.forEach(a,function(n){n.uuid===e&&r.push({uuid:t.uuid,name:t.name})})}),r},new s}]),angular.module("WebPaige.Modals.Profile",["ngResource"]).factory("Profile",["$rootScope","$config","$resource","$q","Storage","Groups","Slots","MD5",function(e,t,r,n,a,o,i,s){var u=r(t.host+"/node/:id/:section",{},{get:{method:"GET",params:{id:"",section:"resource"}},save:{method:"PUT",params:{section:"resource"}},role:{method:"PUT",params:{section:"role"},isArray:!0}}),l=r(t.host+"/register",{direct:"true",module:"default"},{profile:{method:"GET",params:{uuid:"",pass:"",name:"",phone:""},isArray:!0}}),d=r(t.host+"/resources",{},{get:{method:"GET",params:{}},save:{method:"POST",params:{}}});return u.prototype.register=function(t){var r=n.defer(),a=t.username.toLowerCase();return console.log("profile ->",t),l.profile({uuid:a,pass:s(t.password),name:t.firstName+" "+t.lastName+"",phone:t.PhoneAddress||""},function(i){console.log("registered ->",i),u.prototype.role(a,e.config.profile.smartAlarm?1:t.role.id).then(function(s){u.prototype.save(a,{firstName:t.firstName,lastName:t.lastName,EmailAddress:t.EmailAddress,PostAddress:t.PostAddress,PostZip:t.PostZip,PostCity:t.PostCity}).then(function(u){var l=[];angular.forEach(t.groups,function(e){l.push(o.addMember({id:a,group:e}))}),n.all(l).then(function(t){r.resolve({registered:e.config.profile.smartAlarm?i[0]:i,roled:s,resourced:u,grouped:t})})})})},function(e){r.resolve({error:e})}),r.promise},u.prototype.role=function(e,t){var r=n.defer();return u.role({id:e},t,function(e){r.resolve(e)},function(e){r.resolve({error:e})}),r.promise},u.prototype.changePassword=function(e){var t=n.defer();return d.save(null,{askPass:s(e.new1)},function(e){t.resolve(e)},function(e){t.resolve({error:e})}),t.promise},u.prototype.get=function(t,r){var o=n.defer();return u.get({id:t},function(n){t==e.app.resources.uuid&&(e.app.resources=n),r&&a.add("resources",angular.toJson(n)),o.resolve({resources:n})}),o.promise},u.prototype.getWithSlots=function(e,t,r){var a=n.defer();return u.prototype.get(e,t).then(function(t){i.user({user:e,start:r.start,end:r.end}).then(function(e){a.resolve(angular.extend(t,{slots:e,synced:(new Date).getTime(),periods:{start:1e3*r.start,end:1e3*r.end}}))})}),a.promise},u.prototype.getSlots=function(e,t){var r=n.defer();return i.user({user:e,start:t.start/1e3,end:t.end/1e3}).then(function(e){r.resolve({slots:e,synced:(new Date).getTime(),periods:{start:t.start,end:t.end}})}),r.promise},u.prototype.local=function(){return angular.fromJson(a.get("resources"))},u.prototype.save=function(e,t){var r=n.defer();return void 0!=t.firstName&&void 0!=t.lastName&&(t.name=t.firstName+" "+t.lastName),u.save({id:e},t,function(e){r.resolve(e)},function(e){r.resolve({error:e})}),r.promise},new u}]),angular.module("WebPaige.Modals.Settings",["ngResource"]).factory("Settings",["$rootScope","$config","$resource","$q","Storage","Profile",function(e,t,r,n,a,o){var i=r();return i.prototype.get=function(){return angular.fromJson(a.get("resources")).settingsWebPaige||{}},i.prototype.save=function(e,t){var r=n.defer();return o.save(e,{settingsWebPaige:angular.toJson(t)}).then(function(){r.resolve({saved:!0})}),r.promise},new i}]),angular.module("WebPaige.Directives",["ngResource"]).directive("chosen",function(){var e=function(e,t){e.$watch("receviersList",function(){t.trigger("liszt:updated")}),e.$watch("message.receviers",function(){$(t[0]).trigger("liszt:updated")}),t.chosen()};return{restrict:"A",link:e}}).directive("notificationItem",function(){return{restrict:"E",rep1ace:!0,templateUrl:"dist/views/messages-scheadule-item.html",link:function(e){e.s=e.scheadule,e.remover=function(t){e.$parent.$parent.remover(t)}},scope:{scheadule:"="}}}).directive("daterangepicker",["$rootScope",function(e){return{restrict:"A",link:function(t,r){var n={ranges:{}};n.ranges[e.ui.planboard.daterangerToday]=["today","tomorrow"],n.ranges[e.ui.planboard.daterangerTomorrow]=["tomorrow",(new Date.today).addDays(2)],n.ranges[e.ui.planboard.daterangerYesterday]=["yesterday","today"],n.ranges[e.ui.planboard.daterangerNext3Days]=["today",(new Date.create).addDays(3)],n.ranges[e.ui.planboard.daterangerNext7Days]=["today",(new Date.create).addDays(7)],r.daterangepicker(n,function(r,n){t.$apply(function(){var a=n.getTime()-r.getTime();864e5>=a?(t.timeline.range={start:r,end:r},t.timeline.scope={day:!0,week:!1,month:!1}):6048e5>a?(t.timeline.range={start:r,end:n},t.timeline.scope={day:!1,week:!0,month:!1}):a>6048e5&&(t.timeline.range={start:r,end:n},t.timeline.scope={day:!1,week:!1,month:!0}),e.$broadcast("timeliner",{start:r,end:n})})}),r.attr("data-toggle","daterangepicker"),r.daterangepicker({autoclose:!0})}}}]),angular.module("$strap.config",[]).value("$strap.config",{}),angular.module("$strap.filters",["$strap.config"]),angular.module("$strap.directives",["$strap.config"]),angular.module("$strap",["$strap.filters","$strap.directives","$strap.config"]),angular.module("$strap.directives").directive("bsAlert",["$parse","$timeout","$compile",function(e,t,r){return{restrict:"A",link:function(t,n,a){var o=e(a.bsAlert),i=(o.assign,o(t));a.bsAlert?t.$watch(a.bsAlert,function(e,o){i=e,n.html((e.title?"<strong>"+e.title+"</strong>&nbsp;":"")+e.content||""),e.closed&&n.hide(),r(n.contents())(t),(e.type||o.type)&&(o.type&&n.removeClass("alert-"+o.type),e.type&&n.addClass("alert-"+e.type)),(angular.isUndefined(a.closeButton)||"0"!==a.closeButton&&"false"!==a.closeButton)&&n.prepend('<button type="button" class="close" data-dismiss="alert">&times;</button>')},!0):(angular.isUndefined(a.closeButton)||"0"!==a.closeButton&&"false"!==a.closeButton)&&n.prepend('<button type="button" class="close" data-dismiss="alert">&times;</button>'),n.addClass("alert").alert(),n.hasClass("fade")&&(n.removeClass("in"),setTimeout(function(){n.addClass("in")}));var s=a.ngRepeat&&a.ngRepeat.split(" in ").pop();n.on("close",function(e){var r;s?(e.preventDefault(),n.removeClass("in"),r=function(){n.trigger("closed"),t.$parent&&t.$parent.$apply(function(){for(var e=s.split("."),r=t.$parent,n=0;e.length>n;++n)r&&(r=r[e[n]]);r&&r.splice(t.$index,1)})},$.support.transition&&n.hasClass("fade")?n.on($.support.transition.end,r):r()):i&&(e.preventDefault(),n.removeClass("in"),r=function(){n.trigger("closed"),t.$apply(function(){i.closed=!0})},$.support.transition&&n.hasClass("fade")?n.on($.support.transition.end,r):r())})}}}]),angular.module("$strap.directives").directive("bsButton",["$parse","$timeout",function(e){return{restrict:"A",require:"?ngModel",link:function(t,r,n,a){if(a){r.parent('[data-toggle="buttons-checkbox"], [data-toggle="buttons-radio"]').length||r.attr("data-toggle","button");
var o=!!t.$eval(n.ngModel);o&&r.addClass("active"),t.$watch(n.ngModel,function(e,t){var n=!!e,a=!!t;n!==a?$.fn.button.Constructor.prototype.toggle.call(i):n&&!o&&r.addClass("active")})}r.hasClass("btn")||r.on("click.button.data-api",function(){r.button("toggle")}),r.button();var i=r.data("button");i.toggle=function(){if(!a)return $.fn.button.Constructor.prototype.toggle.call(this);var n=r.parent('[data-toggle="buttons-radio"]');n.length?(r.siblings("[ng-model]").each(function(r,n){e($(n).attr("ng-model")).assign(t,!1)}),t.$digest(),a.$modelValue||(a.$setViewValue(!a.$modelValue),t.$digest())):t.$apply(function(){a.$setViewValue(!a.$modelValue)})}}}}]).directive("bsButtonsCheckbox",["$parse",function(){return{restrict:"A",require:"?ngModel",compile:function(e){e.attr("data-toggle","buttons-checkbox").find("a, button").each(function(e,t){$(t).attr("bs-button","")})}}}]).directive("bsButtonsRadio",["$parse",function(){return{restrict:"A",require:"?ngModel",compile:function(e,t){return e.attr("data-toggle","buttons-radio"),t.ngModel||e.find("a, button").each(function(e,t){$(t).attr("bs-button","")}),function(e,t,r,n){n&&(t.find("[value]").button().filter('[value="'+e.$eval(r.ngModel)+'"]').addClass("active"),t.on("click.button.data-api",function(t){e.$apply(function(){n.$setViewValue($(t.target).closest("button").attr("value"))})}),e.$watch(r.ngModel,function(n,a){if(n!==a){var o=t.find('[value="'+e.$eval(r.ngModel)+'"]');o.length&&$.fn.button.Constructor.prototype.toggle.call(o.data("button"))}}))}}}}]),angular.module("$strap.directives").directive("bsButtonSelect",["$parse","$timeout",function(e){return{restrict:"A",require:"?ngModel",link:function(t,r,n,a){var o=e(n.bsButtonSelect);o.assign,a&&(r.text(t.$eval(n.ngModel)),t.$watch(n.ngModel,function(e){r.text(e)}));var i,s,u,l;r.bind("click",function(){i=o(t),s=a?t.$eval(n.ngModel):r.text(),u=i.indexOf(s),l=u>i.length-2?i[0]:i[u+1],console.warn(i,l),t.$apply(function(){r.text(l),a&&a.$setViewValue(l)})})}}}]),angular.module("$strap.directives").directive("bsDatepicker",["$timeout",function(){var e="ontouchstart"in window&&!window.navigator.userAgent.match(/PhantomJS/i),t={"/":"[\\/]","-":"[-]",".":"[.]",dd:"(?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1}))",d:"(?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1}))",mm:"(?:[0]?[1-9]|[1][012])",m:"(?:[0]?[1-9]|[1][012])",yyyy:"(?:(?:[1]{1}[0-9]{1}[0-9]{1}[0-9]{1})|(?:[2]{1}[0-9]{3}))(?![[0-9]])",yy:"(?:(?:[0-9]{1}[0-9]{1}))(?![[0-9]])"};return{restrict:"A",require:"?ngModel",link:function(r,n,a,o){var i=function(e,r){r||(r={});var n=e,a=t;return angular.forEach(a,function(e,t){n=n.split(t).join(e)}),RegExp("^"+n+"$",["i"])},s=e?"yyyy/mm/dd":i(a.dateFormat||"mm/dd/yyyy");o&&o.$parsers.unshift(function(e){return!e||s.test(e)?(o.$setValidity("date",!0),e):(o.$setValidity("date",!1),void 0)});var u=n.next('[data-toggle="datepicker"]');if(u.length&&u.on("click",function(){e?n.trigger("focus"):n.datepicker("show")}),e&&"text"===n.prop("type"))n.prop("type","date"),n.on("change",function(){r.$apply(function(){o.$setViewValue(n.val())})});else{o&&n.on("changeDate",function(){r.$apply(function(){o.$setViewValue(n.val())})});var l=n.closest(".popover");l&&l.on("hide",function(){var e=n.data("datepicker");e&&(e.picker.remove(),n.data("datepicker",null))}),n.attr("data-toggle","datepicker"),n.datepicker({autoclose:!0,forceParse:a.forceParse||!1,language:a.language||"en"})}}}}]),angular.module("$strap.directives").directive("bsDropdown",["$parse","$compile",function(e,t){var r=Array.prototype.slice,n='<ul class="dropdown-menu" role="menu" aria-labelledby="drop1"><li ng-repeat="item in items" ng-class="{divider: !!item.divider, \'dropdown-submenu\': !!item.submenu && item.submenu.length}"><a ng-hide="!!item.divider" tabindex="-1" ng-href="{{item.href}}" ng-click="{{item.click}}" target="{{item.target}}" ng-bind-html-unsafe="item.text"></a></li></ul>',a=function(e,r,a){for(var i,s,u,l=0,d=e.length;d>l;l++)(i=e[l].submenu)&&(u=a.$new(),u.items=i,s=t(n)(u),s=s.appendTo(r.children("li:nth-child("+(l+1)+")")),o(i,s,u))},o=function(){var e=r.call(arguments);setTimeout(function(){a.apply(null,e)})};return{restrict:"EA",scope:!0,link:function(r,a,i){var s=e(i.bsDropdown);r.items=s(r);var u=t(n)(r);o(r.items,u,r),u.insertAfter(a),a.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}]),angular.module("$strap.directives").directive("bsModal",["$parse","$compile","$http","$timeout","$q","$templateCache",function(e,t,r,n,a,o){return{restrict:"A",scope:!0,link:function(i,s,u){var l=e(u.bsModal),d=(l.assign,l(i));a.when(o.get(d)||r.get(d,{cache:!0})).then(function(e){angular.isObject(e)&&(e=e.data);var r=l(i).replace(".html","").replace(/[\/|\.|:]/g,"-")+"-"+i.$id,a=$('<div class="modal hide" tabindex="-1"></div>').attr("id",r).attr("data-backdrop",u.backdrop||!0).attr("data-keyboard",u.keyboard||!0).addClass(u.modalClass?"fade "+u.modalClass:"fade").html(e);$("body").append(a),s.attr("href","#"+r).attr("data-toggle","modal"),n(function(){t(a)(i)}),i._modal=function(e){a.modal(e)},i.hide=function(){a.modal("hide")},i.show=function(){a.modal("show")},i.dismiss=i.hide})}}}]),angular.module("$strap.directives").directive("bsNavbar",["$location",function(e){return{restrict:"A",link:function(t,r){t.$watch(function(){return e.path()},function(e){r.find("li[data-match-route]").each(function(t,r){var n=angular.element(r),a=n.attr("data-match-route"),o=RegExp("^"+a+"$",["i"]);o.test(e)?n.addClass("active"):n.removeClass("active")})})}}}]),angular.module("$strap.directives").directive("bsPopover",["$parse","$compile","$http","$timeout","$q","$templateCache",function(e,t,r,n,a,o){return $("body").on("keyup",function(e){27===e.keyCode&&$(".popover.in").each(function(){$(this).popover("hide")})}),{restrict:"A",scope:!0,link:function(n,i,s){var u=e(s.bsPopover),l=(u.assign,u(n)),d={};angular.isObject(l)&&(d=l),a.when(d.content||o.get(l)||r.get(l,{cache:!0})).then(function(e){angular.isObject(e)&&(e=e.data),s.unique&&i.on("show",function(){$(".popover.in").each(function(){var e=$(this),t=e.data("popover");t&&!t.$element.is(i)&&e.popover("hide")})}),s.hide&&n.$watch(s.hide,function(e,t){e?r.hide():e!==t&&r.show()}),i.popover(angular.extend({},d,{content:e,html:!0}));var r=i.data("popover");r.hasContent=function(){return this.getTitle()||e},r.getPosition=function(){var e=$.fn.popover.Constructor.prototype.getPosition.apply(this,arguments);return t(this.$tip)(n),n.$digest(),this.$tip.data("popover",this),e},n._popover=function(e){i.popover(e)},n.hide=function(){i.popover("hide")},n.show=function(){i.popover("show")},n.dismiss=n.hide})}}}]),angular.module("$strap.directives").directive("bsTabs",["$parse","$compile",function(e,t){return{restrict:"A",link:function(e,r){var n=['<ul class="nav nav-tabs">',"</ul>"],a=['<div class="tab-content">',"</div>"];r.find("[data-tab]").each(function(t){var r=angular.element(this),o="tab-"+e.$id+"-"+t,i=r.hasClass("active"),s=r.hasClass("fade"),u=e.$eval(r.data("tab"));n.splice(t+1,0,"<li"+(i?' class="active"':"")+'><a href="#'+o+'" data-toggle="tab">'+u+"</a></li>"),a.splice(t+1,0,'<div class="tab-pane '+r.attr("class")+(s&&i?" in":"")+'" id="'+o+'">'+this.innerHTML+"</div>")}),r.html(n.join("")+a.join("")),t(r.children("div.tab-content"))(e)}}}]),angular.module("$strap.directives").directive("bsTimepicker",["$timeout",function(){var e="((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5][0-9])(?::[0-5][0-9])?(?:\\s?(?:am|AM|pm|PM))?)";return{restrict:"A",require:"?ngModel",link:function(t,r,n,a){a&&r.on("change",function(){t.$apply(function(){a.$setViewValue(r.val())})});var o=RegExp("^"+e+"$",["i"]);a.$parsers.unshift(function(e){return!e||o.test(e)?(a.$setValidity("time",!0),e):(a.$setValidity("time",!1),void 0)});var i=r.closest(".popover");i&&i.on("hide",function(){var e=r.data("timepicker");e&&(e.$widget.remove(),r.data("timepicker",null))}),r.attr("data-toggle","timepicker"),r.timepicker()}}}]),angular.module("$strap.directives").directive("bsTooltip",["$parse","$compile",function(e){return{restrict:"A",scope:!0,link:function(t,r,n){var a=e(n.bsTooltip),o=(a.assign,a(t));t.$watch(n.bsTooltip,function(e,t){e!==t&&(o=e)}),n.unique&&r.on("show",function(){$(".tooltip.in").each(function(){var e=$(this),t=e.data("tooltip");t&&!t.$element.is(r)&&e.tooltip("hide")})}),r.tooltip({title:function(){return angular.isFunction(o)?o.apply(null,arguments):o},html:!0});var i=r.data("tooltip");i.show=function(){var e=$.Event("show");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),t}},i.hide=function(){var e=$.Event("hide");return this.$element.trigger(e),e.isDefaultPrevented()?void 0:$.fn.tooltip.Constructor.prototype.hide.apply(this,arguments)},t._tooltip=function(e){r.tooltip(e)},t.hide=function(){r.tooltip("hide")},t.show=function(){r.tooltip("show")},t.dismiss=t.hide}}}]),angular.module("$strap.directives").directive("bsTypeahead",["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,r,n,a){var o=e(n.bsTypeahead),i=(o.assign,o(t));t.$watch(n.bsTypeahead,function(e,t){e!==t&&(i=e)}),r.attr("data-provide","typeahead"),r.typeahead({source:function(){return angular.isFunction(i)?i.apply(null,arguments):i},minLength:n.minLength||1,items:n.items,updater:function(e){return a&&t.$apply(function(){a.$setViewValue(e)}),e}});var s=r.data("typeahead");s.lookup=function(){var e;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(e=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source,e?this.process(e):this)},"0"===n.minLength&&setTimeout(function(){r.on("focus",function(){0===r.val().length&&setTimeout(r.typeahead.bind(r,"lookup"),200)})})}}}]),angular.module("WebPaige.Services.Timer",["ngResource"]).factory("Timer",["$rootScope","$timeout",function(e,t){var r=[],n=function(e,n,a){r[e]={event:n,delay:a,counter:0};var o=function(){r[e].counter++,console.log("counting ->",r[e].counter),r[e].mytimeout=t(o,1e3*a),r[e].delay==r[e].counter&&(r[e].event.call(),r[e].counter=0)};r[e].mytimeout=t(o,1e3*a)},a=function(e){t.cancel(r[e].mytimeout)};return{start:n,stop:a}}]),angular.module("WebPaige.Services.Session",["ngResource"]).factory("Session",["$rootScope","$http","Storage",function(e,t,r){return{check:function(){var e=angular.fromJson(r.cookie.get("session"));return e?(this.set(e.id),!0):!1},cookie:function(){for(var e,t=document.cookie.split(";"),r=0;t.length>r;r++)if(e=t[r].split("="),"WebPaige.session"==e[0].trim())return angular.fromJson(e[1])},get:function(e){return this.check(e),this.set(e.id),e.id},set:function(n){var a={id:n,time:new Date};return r.cookie.add("session",angular.toJson(a)),e.session=a,t.defaults.headers.common["X-SESSION_ID"]=e.session.id,a},clear:function(){e.session=null,t.defaults.headers.common["X-SESSION_ID"]=null}}}]),angular.module("WebPaige.Services.Dater",["ngResource"]).factory("Dater",["$rootScope","Storage",function(e,t){return{current:{today:function(){return Date.today().getDayOfYear()+1},week:function(){return(new Date).getWeek()?(new Date).getWeek():(console.log("Date getWeek does not exist !"),void 0)},month:function(){return(new Date).getMonth()+1},year:function(){return(new Date).toString("yyyy")}},readable:{date:function(t){return new Date(t).toString(e.config.formats.date)}},convert:{absolute:function(e,t,r){var n=e.split("-"),a=new Date(Date.parse(n[2]+"-"+n[1]+"-"+n[0]+" "+t)).getTime();return r?a/1e3:a}},calculate:{diff:function(e){return new Date(e.end).getTime()-new Date(e.start).getTime()}},getThisMonth:function(){return(new Date).toString("M")},getThisYear:function(){return(new Date).toString("yyyy")},getMonthTimeStamps:function(e){for(var t={},r=0;12>r;r++){var n=new Date(e,r).moveToFirstDayOfMonth(),a=new Date(e,r).moveToLastDayOfMonth().addDays(1);t[r+1]={first:{day:n,timeStamp:n.getTime()},last:{day:a,timeStamp:a.getTime()},totalDays:Date.getDaysInMonth(e,r)}}return t},getWeekTimeStamps:function(e){for(var t,r=[],n={},a=(new Date(e,0).moveToFirstDayOfMonth(),new Date(e,0).moveToFirstDayOfMonth().last().sunday().addWeeks(0)),o=new Date(a),i=0;54>i;i++)t=0==i?a.addWeeks(1):new Date(r[i-1]).addWeeks(1),r.push(new Date(t));r.unshift(o),new Date(r[54].addWeeks(1));for(var s=0;55>s;s++)n[s+1]={first:{day:r[s],timeStamp:new Date(r[s]).getTime()},last:{day:r[s+1],timeStamp:new Date(r[s+1]).getTime()}};return delete n[54],delete n[55],n},getDayTimeStamps:function(e){for(var t,r=[],n={},a=new Date(e,0).moveToFirstDayOfMonth(),o=0;366>o;o++)t=0==o?a:new Date(r[o-1]).addDays(1),r.push(new Date(t));for(var i=0;366>i;i++)n[i+1]={first:{day:r[i],timeStamp:new Date(r[i]).getTime()},last:{day:r[i+1],timeStamp:new Date(r[i+1]).getTime()}};return n[366].timeStamp?n.total=366:(delete n[366],n.total=365),n},registerPeriods:function(){angular.fromJson(t.get("periods")||"{}"),angular.fromJson(t.get("periodsNext")||"{}");var e=this.getThisYear(),r=Number(e)+1;t.add("periods",angular.toJson({months:this.getMonthTimeStamps(e),weeks:this.getWeekTimeStamps(e),days:this.getDayTimeStamps(e)})),t.add("periodsNext",angular.toJson({months:this.getMonthTimeStamps(r),weeks:this.getWeekTimeStamps(r),days:this.getDayTimeStamps(r)}))},getPeriods:function(e){return angular.fromJson(t.get(e?"periodsNext":"periods"))},translateToDutch:function(e){var t={Monday:"maandag",tuesday:"dinsdag",wednesday:"woensdag",thursday:"donderdag",friday:"vrijdag",saturday:"zaterdag",sunday:"zondag",january:"januari",february:"februari",march:"maart",april:"april",may:"mei",june:"juni",july:"juli",august:"augustus",september:"september",october:"oktober",november:"november",december:"december"};return e?(angular.forEach(t,function(t,r){e=e.replace(RegExp(r,"gi"),t)}),e):void 0}}}]),angular.module("WebPaige.Services.EventBus",["ngResource"]).factory("EventBus",["$rootScope",function(e){var t=this,r={};t.emit=function(){var t=Array.prototype.slice.call(arguments,1);angular.forEach(r,function(r,n){angular.forEach(r,function(r){t.length?e.$emit(n,r(t)):e.$emit(n,r())})})},t.on=function(t,n){r[t]instanceof Array||(r[t]=[]),r[t].push(n),e.$on(r[t],n)},t.remove=function(e,t){var n=r[e],a=n instanceof Array?n.indexOf(t):-1;a>-1&&r[e].splice(a,1)},t.removeAll=function(e){e?r[e]=[]:r={}}}]),angular.module("WebPaige.Services.Interceptor",["ngResource"]).factory("Interceptor",["$q","$location",function(e){return function(t){return t.then(function(e){return e},function(t){return e.reject(t)})}}]),angular.module("WebPaige.Services.MD5",["ngResource"]).factory("MD5",function(){return function(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r,n,a,o,i;return a=2147483648&e,o=2147483648&t,r=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),r&n?2147483648^i^a^o:r|n?1073741824&i?3221225472^i^a^o:1073741824^i^a^o:i^a^o}function n(e,t,r){return e&t|~e&r}function a(e,t,r){return e&r|t&~r}function o(e,t,r){return e^t^r}function i(e,t,r){return t^(e|~r)}function s(e,a,o,i,s,u,l){return e=r(e,r(r(n(a,o,i),s),l)),r(t(e,u),a)}function u(e,n,o,i,s,u,l){return e=r(e,r(r(a(n,o,i),s),l)),r(t(e,u),n)}function l(e,n,a,i,s,u,l){return e=r(e,r(r(o(n,a,i),s),l)),r(t(e,u),n)}function d(e,n,a,o,s,u,l){return e=r(e,r(r(i(n,a,o),s),l)),r(t(e,u),n)}function c(e){for(var t,r=e.length,n=r+8,a=(n-n%64)/64,o=16*(a+1),i=Array(o-1),s=0,u=0;r>u;)t=(u-u%4)/4,s=8*(u%4),i[t]=i[t]|e.charCodeAt(u)<<s,u++;return t=(u-u%4)/4,s=8*(u%4),i[t]=i[t]|128<<s,i[o-2]=r<<3,i[o-1]=r>>>29,i}function g(e){var t,r,n="",a="";for(r=0;3>=r;r++)t=255&e>>>8*r,a="0"+t.toString(16),n+=a.substr(a.length-2,2);return n}function m(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;e.length>r;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(192|n>>6),t+=String.fromCharCode(128|63&n)):(t+=String.fromCharCode(224|n>>12),t+=String.fromCharCode(128|63&n>>6),t+=String.fromCharCode(128|63&n))}return t}var p,f,h,v,b,w,y,S,k,$=[],M=7,P=12,T=17,D=22,E=5,x=9,A=14,N=20,C=4,j=11,B=16,W=23,G=6,I=10,R=15,L=21;for(e=m(e),$=c(e),w=1732584193,y=4023233417,S=2562383102,k=271733878,p=0;$.length>p;p+=16)f=w,h=y,v=S,b=k,w=s(w,y,S,k,$[p+0],M,3614090360),k=s(k,w,y,S,$[p+1],P,3905402710),S=s(S,k,w,y,$[p+2],T,606105819),y=s(y,S,k,w,$[p+3],D,3250441966),w=s(w,y,S,k,$[p+4],M,4118548399),k=s(k,w,y,S,$[p+5],P,1200080426),S=s(S,k,w,y,$[p+6],T,2821735955),y=s(y,S,k,w,$[p+7],D,4249261313),w=s(w,y,S,k,$[p+8],M,1770035416),k=s(k,w,y,S,$[p+9],P,2336552879),S=s(S,k,w,y,$[p+10],T,4294925233),y=s(y,S,k,w,$[p+11],D,2304563134),w=s(w,y,S,k,$[p+12],M,1804603682),k=s(k,w,y,S,$[p+13],P,4254626195),S=s(S,k,w,y,$[p+14],T,2792965006),y=s(y,S,k,w,$[p+15],D,1236535329),w=u(w,y,S,k,$[p+1],E,4129170786),k=u(k,w,y,S,$[p+6],x,3225465664),S=u(S,k,w,y,$[p+11],A,643717713),y=u(y,S,k,w,$[p+0],N,3921069994),w=u(w,y,S,k,$[p+5],E,3593408605),k=u(k,w,y,S,$[p+10],x,38016083),S=u(S,k,w,y,$[p+15],A,3634488961),y=u(y,S,k,w,$[p+4],N,3889429448),w=u(w,y,S,k,$[p+9],E,568446438),k=u(k,w,y,S,$[p+14],x,3275163606),S=u(S,k,w,y,$[p+3],A,4107603335),y=u(y,S,k,w,$[p+8],N,1163531501),w=u(w,y,S,k,$[p+13],E,2850285829),k=u(k,w,y,S,$[p+2],x,4243563512),S=u(S,k,w,y,$[p+7],A,1735328473),y=u(y,S,k,w,$[p+12],N,2368359562),w=l(w,y,S,k,$[p+5],C,4294588738),k=l(k,w,y,S,$[p+8],j,2272392833),S=l(S,k,w,y,$[p+11],B,1839030562),y=l(y,S,k,w,$[p+14],W,4259657740),w=l(w,y,S,k,$[p+1],C,2763975236),k=l(k,w,y,S,$[p+4],j,1272893353),S=l(S,k,w,y,$[p+7],B,4139469664),y=l(y,S,k,w,$[p+10],W,3200236656),w=l(w,y,S,k,$[p+13],C,681279174),k=l(k,w,y,S,$[p+0],j,3936430074),S=l(S,k,w,y,$[p+3],B,3572445317),y=l(y,S,k,w,$[p+6],W,76029189),w=l(w,y,S,k,$[p+9],C,3654602809),k=l(k,w,y,S,$[p+12],j,3873151461),S=l(S,k,w,y,$[p+15],B,530742520),y=l(y,S,k,w,$[p+2],W,3299628645),w=d(w,y,S,k,$[p+0],G,4096336452),k=d(k,w,y,S,$[p+7],I,1126891415),S=d(S,k,w,y,$[p+14],R,2878612391),y=d(y,S,k,w,$[p+5],L,4237533241),w=d(w,y,S,k,$[p+12],G,1700485571),k=d(k,w,y,S,$[p+3],I,2399980690),S=d(S,k,w,y,$[p+10],R,4293915773),y=d(y,S,k,w,$[p+1],L,2240044497),w=d(w,y,S,k,$[p+8],G,1873313359),k=d(k,w,y,S,$[p+15],I,4264355552),S=d(S,k,w,y,$[p+6],R,2734768916),y=d(y,S,k,w,$[p+13],L,1309151649),w=d(w,y,S,k,$[p+4],G,4149444226),k=d(k,w,y,S,$[p+11],I,3174756917),S=d(S,k,w,y,$[p+2],R,718787259),y=d(y,S,k,w,$[p+9],L,3951481745),w=r(w,f),y=r(y,h),S=r(S,v),k=r(k,b);var q=g(w)+g(y)+g(S)+g(k);return q.toLowerCase()}}),angular.module("WebPaige.Services.Storage",["ngResource"]).factory("Storage",["$rootScope","$config",function(e,t){"."!==t.title.substr(-1)&&(t.title=t.title?t.title+".":"");var r=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},n=function(e,n){if(!r())return!1;if(!n&&0!==n&&""!==n)return!1;try{localStorage.setItem(t.title+e,n)}catch(a){return!1}return!0},a=function(e){if(!r())return!1;var n=localStorage.getItem(t.title+e);return n?n:null},o=function(e){if(!r())return!1;try{localStorage.removeItem(t.title+e)}catch(n){return!1}return!0},i=function(){if(!r())return!1;var e=t.title.length;for(var n in localStorage)if(n.substr(0,e)===t.title)try{o(n.substr(e))}catch(a){return!1}return!0},s=function(){try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(e){return!1}},u=function(e,r){if(!s())return!1;if(!r&&0!==r&&""!==r)return!1;try{sessionStorage.setItem(t.title+e,r)}catch(n){return!1}return!0},l=function(e){if(!s())return!1;var r=sessionStorage.getItem(t.title+e);return r?r:null},d=function(e){if(!s())return!1;try{sessionStorage.removeItem(t.title+e)}catch(r){return!1}return!0},c=function(){if(!s())return!1;var e=t.title.length;for(var r in sessionStorage)if(r.substr(0,e)===t.title)try{d(r.substr(e))}catch(n){return!1}return!0},g=function(){try{return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}catch(e){return!1}},m=function(e,r){if(r===void 0)return!1;if(!g())return!1;try{var n="",a=new Date;null===r&&(t.cookie.expiry=-1,r=""),0!==t.cookie.expiry&&(a.setTime(a.getTime()+1e3*60*60*t.cookie.expiry),n="; expires="+a.toGMTString()),document.cookie=t.title+e+"="+r+n+"; path="+t.cookie.path}catch(o){return!1}return!0},p=function(r){if(!g())return e.$broadcast("StorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var n=document.cookie.split(";"),a=0;n.length>a;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t.title+r+"="))return decodeURIComponent(o.substring(t.title.length+r.length+1,o.length))}return null},f=function(e){m(e,null)},h=function(){for(var e=null,r=t.title.length,n=document.cookie.split(";"),a=0;n.length>a;a++){for(e=n[a];" "==e.charAt(0);)e=e.substring(1,e.length);key=e.substring(r,e.indexOf("=")),f(key)}},v=function(e){var t=e?localStorage.key:localStorage;return(.0009765625*(3+16*t.length/8192)).toPrecision(2)+" MB"},b=function(){return angular.fromJson(a("periods"))},w=function(){return angular.fromJson(a("groups"))},y=function(){return angular.fromJson(a("members"))},S=function(){var t=angular.fromJson(a("resources"));return t.settingsWebPaige?angular.fromJson(t.settingsWebPaige):e.config.defaults.settingsWebPaige};return{isSupported:r,add:n,get:a,remove:o,clearAll:i,session:{add:u,get:l,remove:d,clearAll:c},cookie:{add:m,get:p,remove:f,clearAll:h},size:v,local:{periods:b,groups:w,members:y,settings:S}}}]),angular.module("WebPaige.Services.Strings",["ngResource"]).factory("Strings",function(){return{truncate:function(e,t,r){var n=e.length>t,a=n?e.substr(0,t-1):e,a=r&&n?a.substr(0,a.lastIndexOf(" ")):a;return n?a+"..":a},toTitleCase:function(e){return e?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):void 0}}}),angular.module("WebPaige.Services.Announcer",["ngResource"]).factory("Announcer",["$rootScope",function(e){return{process:function(t,r){var n={"short":[],"long":[]},a=0;if(r){var o=[];angular.forEach(t.rows,function(t){o.push({msgCode:e.config.profile.p2000.codes,day:new Date(t.value.timestamp).toString("dd-MM-yy"),time:new Date(t.value.timestamp).toString("HH:mm:ss"),body:t.value.message})}),t=o}return angular.forEach(t,function(e){e.body&&((e.body.match(/Prio 1/)||e.body.match(/PRIO 1/))&&(e.body=e.body.replace("Prio 1 ",""),e.prio={1:!0,test:!1}),(e.body.match(/Prio 2/)||e.body.match(/PRIO 2/))&&(e.body=e.body.replace("Prio 2 ",""),e.prio={2:!0,test:!1}),(e.body.match(/Prio 3/)||e.body.match(/PRIO 3/))&&(e.body=e.body.replace("Prio 3 ",""),e.prio={3:!0,test:!1}),e.body.match(/PROEFALARM/)&&(e.prio={test:!0}),4>a&&n.short.push(e),n.long.push(e),a++)}),n}}}]),angular.module("WebPaige.Services.Sloter",["ngResource"]).factory("Sloter",["$rootScope","Storage",function(e,t){return{get:{groups:function(){var e={};return angular.forEach(t.local.groups(),function(t){e[t.uuid]=t.name}),e},members:function(){var e={};return angular.forEach(t.local.members(),function(t){e[t.uuid]=t.name}),e}},wrapper:function(e){return'<span style="display:none;">'+e+"</span>"},secret:function(e){return'<span class="secret">'+e+"</span>"},addLoading:function(e,t,r){return angular.forEach(r,function(r){t.push({start:e.periods.end,end:15778368e5,group:r,content:"loading",className:"state-loading-right",editable:!1}),t.push({start:0,end:e.periods.start,group:r,content:"loading",className:"state-loading-left",editable:!1})}),t},user:function(t,r,n){var a=this;return angular.forEach(t.user,function(t,o){angular.forEach(n.legenda,function(i,s){t.text==s&&i&&r.push({start:Math.round(1e3*t.start),end:Math.round(1e3*t.end),group:t.recursive?a.wrapper("b")+e.ui.planboard.weeklyPlanning+a.wrapper("recursive"):a.wrapper("a")+e.ui.planboard.planning+a.wrapper("planning"),content:a.secret(angular.toJson({type:"slot",id:o,recursive:t.recursive,state:t.text})),className:"slot-"+o+" "+n.states[t.text].className,editable:!0})})}),r=a.addLoading(t,r,[a.wrapper("b")+e.ui.planboard.weeklyPlanning+a.wrapper("recursive"),a.wrapper("a")+e.ui.planboard.planning+a.wrapper("planning")])},profile:function(t,r){var n=this,a=[];return angular.forEach(t,function(t,o){angular.forEach(r.legenda,function(i,s){t.text==s&&i&&a.push({start:Math.round(1e3*t.start),end:Math.round(1e3*t.end),group:t.recursive?n.wrapper("b")+e.ui.planboard.weeklyPlanning+n.wrapper("recursive"):n.wrapper("a")+e.ui.planboard.planning+n.wrapper("planning"),content:n.secret(angular.toJson({type:"slot",id:o,recursive:t.recursive,state:t.text})),className:"slot-"+o+" "+r.states[t.text].className,editable:!0})})}),a.push({start:0,end:1,group:n.wrapper("b")+e.ui.planboard.weeklyPlanning+n.wrapper("recursive"),content:"",className:null,editable:!1}),a.push({start:0,end:1,group:n.wrapper("a")+e.ui.planboard.planning+n.wrapper("planning"),content:"",className:null,editable:!1}),a},namer:function(e,t){var r,n=this.get.groups(),a=n[e.id],o='<a href="#/groups?uuid='+e.id+'#view">'+a+"</a>";return e.division?(r=1==t?o:"<span>"+a+"</span>",r+=' <span class="label">'+e.division.label+"</span>"):r=1==t?o:"<span>"+a+"</span>",r},bars:function(e,t,r,n,a){var o=this,i=0;return angular.forEach(o.filtered(e,a),function(a){var s=o.namer(a,n);angular.forEach(a.data,function(e){e.wish>i&&(i=e.wish)}),angular.forEach(a.data,function(n){var a=i,u=n.wish,l=u,d=Math.round(80*(u/a)+20),c=d,g="height:"+d+"px;",m='<div class="requirement" style="'+g+'" '+'title="'+"Minimum aantal benodigden"+": "+u+' personen"></div>';u=n.wish+n.diff;var p=u;if(d=Math.round(80*(u/a)+20),n.diff>=0&&7>n.diff){var f;switch(n.diff){case 0:f=r.densities.even;break;case 1:f=r.densities.one;break;case 2:f=r.densities.two;break;case 3:f=r.densities.three;break;case 4:f=r.densities.four;break;case 5:f=r.densities.five;break;case 6:f=r.densities.six}}else f=n.diff>=7?r.densities.more:r.densities.less;var h='<span class="badge badge-inverse">'+n.diff+"</span>";p>l&&(d=c),g="height:"+d+"px;"+"background-color: "+f+";";var v='<div class="bar" style="'+g+'" '+' title="Huidig aantal beschikbaar: '+u+' personen">'+h+"</div>";(n.diff>0&&r.legenda.groups.more||0==n.diff&&r.legenda.groups.even||0>n.diff&&r.legenda.groups.less)&&t.push({start:Math.round(1e3*n.start),end:Math.round(1e3*n.end),group:o.wrapper("c")+s,content:m+v+o.secret(angular.toJson({type:"group",diff:n.diff,group:s})),className:"group-aggs",editable:!1}),t=o.addLoading(e,t,[o.wrapper("c")+s])})}),t},aggs:function(e,t,r,n,a){var o=this;return angular.forEach(o.filtered(e,a),function(a){var i=o.namer(a,n);angular.forEach(a.data,function(n){var a;if(n.diff>=0&&7>n.diff)switch(n.diff){case 0:a="even";break;case 1:a=1;break;case 2:a=2;break;case 3:a=3;break;case 4:a=4;break;case 5:a=5;break;case 6:a=6}else a=n.diff>=7?"more":"less";(n.diff>0&&r.legenda.groups.more||0==n.diff&&r.legenda.groups.even||0>n.diff&&r.legenda.groups.less)&&t.push({start:Math.round(1e3*n.start),end:Math.round(1e3*n.end),group:o.wrapper("c")+i,content:a+o.secret(angular.toJson({type:"group",diff:n.diff,group:i})),className:"agg-"+a,editable:!1}),t=o.addLoading(e,t,[o.wrapper("c")+i])})}),t},wishes:function(e,t,r){var n,a=this,o=this.get.groups(),i=o[e.aggs[0].id],s='<a href="#/groups?uuid='+e.aggs[0].id+'#view">'+i+"</a>";return n=1==r?s:"<span>"+i+"</span>",n+=' <span class="label">Behoefte (elke divisie)</span>',angular.forEach(e.aggs.wishes,function(r){var o;o=r.count>=7?"wishes-more":0==r.count?"wishes-even":"wishes-"+r.count,t.push({start:Math.round(1e3*r.start),end:Math.round(1e3*r.end),group:a.wrapper("c")+n,content:'<span class="badge badge-inverse">'+r.count+"</span>"+a.secret(angular.toJson({type:"wish",wish:r.count,group:n,groupId:e.aggs[0].id})),className:o,editable:!1}),t=a.addLoading(e,t,[a.wrapper("c")+n])}),t},members:function(e,t,r,n){var a=this,o=this.get.members();return e.members.sort(function(e,t){var r=e.lastName.toLowerCase(),n=t.lastName.toLowerCase();return n>r?-1:r>n?1:0}),angular.forEach(e.members,function(i){var s=1==n?a.wrapper("d-"+i.lastName[0].toLowerCase())+'<a href="#/profile/'+i.id+'#timeline">'+o[i.id]+"</a>":a.wrapper("d-"+i.lastName[0].toLowerCase())+o[i.id];angular.forEach(i.data,function(e){angular.forEach(r.legenda,function(n,o){e.text==o&&n&&t.push({start:Math.round(1e3*e.start),end:Math.round(1e3*e.end),group:s,content:a.secret(angular.toJson({type:"member",id:e.id,mid:i.id,recursive:e.recursive,state:e.text})),className:r.states[e.text].className,editable:!1})})}),t.push({start:0,end:0,group:s,content:null,className:null,editable:!1}),t=a.addLoading(e,t,[s]),angular.forEach(i.stats,function(e){var t=e.state.split(".");t.reverse(),e.state=e.state.match(/bar-(.*)/)?e.state:"bar-"+t[0]})}),t},pies:function(t,r){var n=this;angular.forEach(n.filtered(t,r),function(t){var r;r=e.config.timeline.config.divisions.length>0?t.division.id:"",$.browser.msie&&"8.0"==$.browser.version?$("#groupPie-"+r).html(""):document.getElementById("groupPie-"+r).innerHTML="";var n=[],a={more:"#415e6b",even:"#ba6a24",less:"#a0a0a0"},o=[],i=[];angular.forEach(t.ratios,function(e,t){0!=e&&n.push({ratio:e,color:a[t]})}),n=n.sort(function(e,t){return t.ratio-e.ratio}),angular.forEach(n,function(e){o.push(e.color),i.push(e.ratio)});var s=Raphael("groupPie-"+r);s.piechart(120,120,100,i,{colors:o})})},filtered:function(e,t){var r=[];return"all"==t.division?r=e.aggs:angular.forEach(e.aggs,function(e){t.division==e.division.id&&r.push(e)}),r},process:function(e,t,r,n,a){var o=this,i=[];return e.user&&(i=o.user(e,i,t)),e.aggs&&(i=t.bar?o.bars(e,i,t,n,a):o.aggs(e,i,t,n,a)),t.wishes&&e.aggs&&(i=o.wishes(e,i,n)),e.members&&(i=o.members(e,i,t,n)),e.aggs&&setTimeout(function(){o.pies(e,a)},100),i}}}]),angular.module("WebPaige.Services.Stats",["ngResource"]).factory("Stats",["$rootScope","Storage",function(){return{aggs:function(e){var t={less:0,even:0,more:0},r={less:0,even:0,more:0,total:0},n=e.length;return angular.forEach(e,function(e){0>e.diff?t.less++:0==e.diff?t.even++:t.more++;var n=e.end-e.start;0>e.diff?r.less=r.less+n:0==e.diff?r.even=r.even+n:r.more=r.more+n,r.total=r.total+n}),{ratios:{less:Math.round(100*(t.less/n)),even:Math.round(100*(t.even/n)),more:Math.round(100*(t.more/n))},durations:r}},pies:function(e){var t={less:0,even:0,more:0},r=e.length;return angular.forEach(e,function(e){0>e.diff?t.less++:0==e.diff?t.even++:t.more++}),{less:Math.round(100*(t.less/r)),even:Math.round(100*(t.even/r)),more:Math.round(100*(t.more/r))}},member:function(e){var t={},r=0;angular.forEach(e,function(e){t[e.text]?t[e.text]++:t[e.text]=1,r++});var n=[];return angular.forEach(t,function(e,t){n.push({state:t,ratio:100*(e/r)})}),n}}}]),angular.module("WebPaige.Services.Offsetter",["ngResource"]).factory("Offsetter",["$rootScope",function(){var e={factory:function(e){var t=86400,r=3600,n=60,a=1*Math.abs(Number(Date.today().getUTCOffset()))/100*r,o=[];angular.forEach(e,function(e){var i,s=0,u=0,l=0;e+=a,u=e%t,s=e-u,l=e%r;var d={days:Math.floor(s/t),hours:Math.floor(u/r),minutes:Math.floor(l/n)};switch(i={value:e,exact:e%t,mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1,hour:d.hours,minute:d.minutes},10>d.hours&&(d.hours="0"+d.hours),10>d.minutes&&(d.minutes="0"+d.minutes),i.time=d.hours+":"+d.minutes,d.days){case 1:i.mon=!0;break;case 2:i.tue=!0;break;case 3:i.wed=!0;break;case 4:i.thu=!0;break;case 5:i.fri=!0;break;case 6:i.sat=!0;break;case 7:i.sun=!0}o.push(i)});var i={};return angular.forEach(o,function(e){i[e.exact]=i[e.exact]||{},i[e.exact].hour=e.hour,i[e.exact].minute=e.minute,i[e.exact].time=e.time,i[e.exact].exact=e.exact,i[e.exact].mon=i[e.exact].mon?i[e.exact].mon:e.mon,i[e.exact].tue=i[e.exact].tue?i[e.exact].tue:e.tue,i[e.exact].wed=i[e.exact].wed?i[e.exact].wed:e.wed,i[e.exact].thu=i[e.exact].thu?i[e.exact].thu:e.thu,i[e.exact].fri=i[e.exact].fri?i[e.exact].fri:e.fri,i[e.exact].sat=i[e.exact].sat?i[e.exact].sat:e.sat,i[e.exact].sun=i[e.exact].sun?i[e.exact].sun:e.sun}),i},arrayed:function(e){var t=86400,r=3600,n=60,a=[];return angular.forEach(e,function(e){var o=-1*Math.abs(Number(Date.today().getUTCOffset()))/100,i=(Number(e.hour)+o)*r,s=Number(e.minute)*n,u=i+s;e.mon&&a.push(u+t),e.tue&&a.push(u+2*t),e.wed&&a.push(u+3*t),e.thu&&a.push(u+4*t),e.fri&&a.push(u+5*t),e.sat&&a.push(u+6*t),e.sun&&a.push(u+7*t)
}),a}};return{factory:e.factory,arrayed:e.arrayed}}]),angular.module("WebPaige.Filters",["ngResource"]).filter("convertToDateObj",[function(){return function(e){return Date(e)}}]).filter("translateRole",["$config",function(e){return function(t){var r;return angular.forEach(e.roles,function(e){e.id==t&&(r=e.label)}),r}}]).filter("translateDivision",["$config",function(e){return function(t){var r;return angular.forEach(e.timeline.config.divisions,function(e){e.id==t&&(r=e.label)}),r}}]).filter("rangeMainFilter",["Dater",function(e){var t=e.getPeriods();return function(r){86401e3==new Date(r.end).getTime()-new Date(r.start).getTime()&&(r.start=new Date(r.end).addDays(-1));var n=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},a={start:{real:n(e.translateToDutch(new Date(r.start).toString("dddd d MMMM"))),month:n(e.translateToDutch(new Date(r.start).toString("MMMM"))),day:n(e.translateToDutch(new Date(r.start).toString("d"))),year:new Date(r.start).toString("yyyy")},end:{real:n(e.translateToDutch(new Date(r.end).toString("dddd d MMMM"))),month:n(e.translateToDutch(new Date(r.end).toString("MMMM"))),day:n(e.translateToDutch(new Date(r.end).toString("d"))),year:new Date(r.end).toString("yyyy")}},r={start:{real:new Date(r.start).toString("dddd d MMMM"),month:new Date(r.start).toString("MMMM"),day:new Date(r.start).toString("d")},end:{real:new Date(r.end).toString("dddd d MMMM"),month:new Date(r.end).toString("MMMM"),day:new Date(r.end).toString("d")}},o=Date.getMonthNumberFromName(r.start.month);return(Math.round(r.start.day)+1==r.end.day&&r.start.hour==r.end.hour||r.start.day==r.end.day)&&r.start.month==r.end.month?a.start.real+", "+a.start.year:1==r.start.day&&r.end.day==t.months[o+1].totalDays?a.start.month+", "+a.start.year:a.start.real+", "+a.start.year+" / "+a.end.real+", "+a.end.year}}]).filter("rangeMainWeekFilter",["Dater",function(e){return function(t){if(t){var r=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},n={start:r(e.translateToDutch(new Date(t.start).toString("dddd d MMMM"))),end:r(e.translateToDutch(new Date(t.end).toString("dddd d MMMM")))};return n.start+" / "+n.end+", "+e.getThisYear()}return!1}}]).filter("rangeInfoFilter",["$rootScope","Dater","Storage",function(e,t){var r=t.getPeriods();return function(t){var n=new Date(t.range.end).getTime()-new Date(t.range.start).getTime();if(n>26784e5)return e.ui.planboard.rangeInfoTotalSelectedDays+Math.round(n/864e5);if(t.scope.day){var a={start:new Date(t.range.start).toString("HH:mm"),end:new Date(t.range.end).toString("HH:mm")};return"00:00"==a.end&&(a.end="24:00"),e.ui.planboard.rangeInfoTime+a.start+" / "+a.end}return t.scope.week?e.ui.planboard.rangeInfoWeekNumber+t.current.week:t.scope.month?e.ui.planboard.rangeInfoMonth+t.current.month+e.ui.planboard.rangeInfoTotalDays+r.months[t.current.month].totalDays:void 0}}]).filter("rangeInfoWeekFilter",["$rootScope","Dater","Storage",function(e,t){return t.getPeriods(),function(t){return t?e.ui.planboard.rangeInfoWeekNumber+t.current.week:void 0}}]).filter("convertRatios",["$config",function(){return function(e){var t="";return angular.forEach(e,function(e){var r=e.state.replace(/^bar-+/,"");"Available"==r&&(r="Beschikbaar"),"Unavailable"==r&&(r="Niet Beschikbaar"),"SchipperVanDienst"==r&&(r="Schipper Van Dienst"),"BeschikbaarNoord"==r&&(r="Beschikbaar Noord"),"BeschikbaarZuid"==r&&(r="Beschikbaar Zuid"),"Unreached"==r&&(r="Niet Bereikt"),t+=e.ratio.toFixed(1)+"% "+r+", "}),t.substring(0,t.length-2)}}]).filter("calculateTimeInDays",function(){return function(e){var t=864e5,r=0,n=0,e=1e3*e,n=e%t,r=e-n;return Math.floor(r/t)}}).filter("calculateTimeInHours",function(){return function(e){var t=864e5,r=36e5,n=0,e=1e3*e,n=e%t;return Math.floor(n/r)}}).filter("calculateTimeInMinutes",function(){return function(e){var t=36e5,r=6e4,n=0,e=1e3*e,n=e%t;return Math.floor(n/r)}}).filter("convertEve",["$config",function(e){return function(t){if(e.profile.smartAlarm)return t;var r=t;return r=t!==void 0?t.split("/"):["",t,""],r[r.length-2]}}]).filter("convertUserIdToName",["Storage",function(e){var t=angular.fromJson(e.get("members"));return function(e){return null==t||t[e]===void 0?e:t[e].name}}]).filter("nicelyDate",["$rootScope",function(e){return function(t){return"string"==typeof t&&(t=Number(t)),new Date(t).toString(e.config.formats.datetimefull)}}]).filter("convertTimeStamp",function(){return function(e){return console.warn(typeof e),new Date(e).toString("dd-MM-yyyy HH:mm")}}).filter("noTitle",function(){return function(e){return""==e?"- No Title -":e}}).filter("stripSpan",function(){return function(e){return e.match(/<span class="label">(.*)<\/span>/)}}).filter("stripHtml",function(){return function(e){return e?e.split(">")[1].split("<")[0]:void 0}}).filter("groupIdToName",["Storage",function(e){return function(t){var r=angular.fromJson(e.get("groups"));for(var n in r)if(r[n].uuid==t)return r[n].name}}]).filter("i18n_spec",["$rootScope",function(e){return function(t,r){var n=r.split("."),a=e.ui[n[0]][n[1]],a=a.replace("$v",t);return a}}]).filter("truncateGroupTitle",["Strings",function(e){return function(t){return e.truncate(t,20,!0)}}]).filter("toTitleCase",["Strings",function(e){return function(t){return e.toTitleCase(t)}}]).filter("countBox",function(){return function(e){var t=0;return angular.forEach(e,function(e){t+=e.length}),t}}).filter("nicelyOffsets",["Dater","Storage","Offsetter",function(e,t,r){return function(e){var t=r.factory(e),n="";return angular.forEach(t,function(e){n+='<div style="display:block; margin-bottom: 5px;">',n+='<span class="badge">'+e.time+"</span>&nbsp;",e.mon&&(n+='<span class="muted"><small><i> maandag,</i></small></span>'),e.tue&&(n+='<span class="muted"><small><i> dinsdag,</i></small></span>'),e.wed&&(n+='<span class="muted"><small><i> woensdag,</i></small></span>'),e.thu&&(n+='<span class="muted"><small><i> donderdag,</i></small></span>'),e.fri&&(n+='<span class="muted"><small><i> vrijdag,</i></small></span>'),e.sat&&(n+='<span class="muted"><small><i> zaterdag,</i></small></span>'),e.sun&&(n+='<span class="muted"><small><i> zondag,</i></small></span>'),n=n.substring(0,n.length-20),n=n+="</i></small></span>",n+="</div>",n=n.substring(0,n.length)}),n}}]).filter("nicelyAudience",["Storage",function(e){return function(t){if(t){var r=angular.fromJson(e.get("members")),n=angular.fromJson(e.get("groups")),a=[];return angular.forEach(t,function(e){var t;r[e]?t=r[e].name:angular.forEach(n,function(r){r.uuid==e&&(t=r.name)}),a+=t+", "}),a.substring(0,a.length-2)}}}]),angular.module("WebPaige.Controllers.Login",[]).controller("login",["$rootScope","$location","$q","$scope","Session","User","Groups","Messages","Storage","$routeParams","Settings","Profile","MD5",function(e,t,r,n,a,o,i,s,u,l,d,c,g){function m(){p.progress(100,e.ui.login.loading_everything),p.redirectToDashboard(),p.getMessages(),p.getMembers()}var p=this;l.uuid&&l.key?(n.views={changePass:!0},n.changepass={uuid:l.uuid,key:l.key}):n.views={login:!0,forgot:!1},e.config.demo_users&&demo_users.length>0&&(n.demo_users=demo_users),n.knrmLogin=function(t){$("#login button[type=submit]").text(e.ui.login.button_loggingIn).attr("disabled","disabled"),p.auth(t.uuid,t.resources.askPass)},n.alert={login:{display:!1,type:"",message:""},forgot:{display:!1,type:"",message:""}},u.session.get("app")||u.session.add("app","{}"),$(".navbar").hide(),$("#footer").hide(),$("#watermark").hide(),$("body").css({background:"url(../"+e.config.profile.background+") no-repeat center center fixed",backgroundSize:"cover"});var f=angular.fromJson(u.get("logindata"));f&&f.remember&&(n.logindata=f),n.login=function(){return $("#alertDiv").hide(),n.logindata&&n.logindata.username&&n.logindata.password?($("#login button[type=submit]").text(e.ui.login.button_loggingIn).attr("disabled","disabled"),u.add("logindata",angular.toJson({username:n.logindata.username,password:n.logindata.password,remember:n.logindata.remember})),e.config.smartAlarm&&u.add("guard",angular.toJson({monitor:"",role:""})),p.auth(n.logindata.username,g(n.logindata.password)),void 0):(n.alert={login:{display:!0,type:"alert-error",message:e.ui.login.alert_fillfiled}},$("#login button[type=submit]").text(e.ui.login.button_login).removeAttr("disabled"),!1)},p.auth=function(t,r){o.login(t.toLowerCase(),r).then(function(t){return 400==t.status||404==t.status?(n.alert={login:{display:!0,type:"alert-error",message:e.ui.login.alert_wrongUserPass}},$("#login button[type=submit]").text(e.ui.login.button_login).removeAttr("disabled"),!1):(a.set(t["X-SESSION_ID"]),p.preloader(),void 0)})},p.preloader=function(){$("#login").hide(),$("#download").hide(),$("#preloader").show(),p.progress(30,e.ui.login.loading_User),o.divisions().then(function(t){e.config.timeline.config.divisions=t,u.add("divisions",angular.toJson(t)),o.resources().then(function(t){t.error?console.warn("error ->",t):(e.app.resources=t,p.progress(70,e.ui.login.loading_Group),i.query(!0).then(function(r){if(r.error)console.warn("error ->",r);else{var n=angular.fromJson(t.settingsWebPaige)||{},a=!1,s=!1,u=e.config.defaults.settingsWebPaige,l=function(e){var t={};return angular.forEach(e,function(e){t[e.uuid]={status:!0,divisions:!1}}),t};if(null!=n||void 0!=n)if(n.user?n.user.language?(e.changeLanguage(angular.fromJson(t.settingsWebPaige).user.language),u.user.language=n.user.language):(e.changeLanguage(e.config.defaults.settingsWebPaige.user.language),a=!0):a=!0,n.app){if(n.app.widgets)if(n.app.widgets.groups){var c=!1;jQuery.isEmptyObject(n.app.widgets.groups)?c=!0:angular.forEach(n.app.widgets.groups,function(e){("object"!=typeof e||e=={})&&(c=!0)}),c?(u.app.widgets.groups=l(r),a=!0):u.app.widgets.groups=n.app.widgets.groups}else console.warn("user has NO app widgets groups!!"),u.app.widgets.groups=l(r),a=!0;else u.app.widgets={groups:l(r)},a=!0;n.app.group&&void 0!=n.app.group?u.app.group=n.app.group:(s=!0,a=!0)}else u.app={widgets:{groups:l(r)}},a=!0;else u={user:e.config.defaults.settingsWebPaige.user,app:{widgets:{groups:l(r)},group:r[0].uuid}},a=!0;a?s?i.parents().then(function(n){u.app.group=null!=n?n:r[0].uuid,d.save(t.uuid,u).then(function(){o.resources().then(function(t){e.app.resources=t,m()})})}):(u.app.group=r[0].uuid,d.save(t.uuid,u).then(function(){o.resources().then(function(t){e.app.resources=t,m()})})):(ga("send","pageview",{dimension1:t.uuid}),ga("send","event","Login",t.uuid),m())}}))})})},p.getMembers=function(){i.query().then(function(e){var t=[];angular.forEach(e,function(e){t.push(i.get(e.uuid))}),r.all(t).then(function(){i.uniqueMembers()})})},p.getMessages=function(){s.query().then(function(t){t.error?console.warn("error ->",t):(e.app.unreadMessages=s.unreadCount(),u.session.unreadMessages=s.unreadCount())})},p.redirectToDashboard=function(){t.path("/dashboard"),setTimeout(function(){$("body").css({background:"none"}),$(".navbar").show(),e.browser.mobile||$("#footer").show(),$("#watermark").show(),$("body").css({background:"url(../img/bg.jpg) repeat"})},100)},p.progress=function(e,t){$("#preloader .progress .bar").css({width:e+"%"}),$("#preloader span").text(t)},n.forgot=function(){$("#forgot button[type=submit]").text(e.ui.login.setting).attr("disabled","disabled"),o.password(n.remember.id).then(function(t){n.alert="ok"==t?{forget:{display:!0,type:"alert-success",message:e.ui.login.checkYourMail}}:{forget:{display:!0,type:"alert-error",message:e.ui.errors.login.forgotCantFind}},$("#forgot button[type=submit]").text(e.ui.login.button_changePassword).removeAttr("disabled")})},p.changePass=function(r,a,i){o.changePass(r,a,i).then(function(r){400==r.status||500==r.status||409==r.status?n.alert={changePass:{display:!0,type:"alert-error",message:e.ui.errors.login.changePass}}:(n.alert={changePass:{display:!0,type:"alert-success",message:e.ui.login.passwordChanged}},t.path("/message")),$("#changePass button[type=submit]").text(e.ui.login.button_changePassword).removeAttr("disabled")})},n.changePass=function(){return $("#alertDiv").hide(),n.changeData&&n.changeData.newPass&&n.changeData.retypePass?n.changeData.newPass!=n.changeData.retypePass?(n.alert={changePass:{display:!0,type:"alert-error",message:e.ui.errors.login.changePassNoMatch}},$("#changePass button[type=submit]").text(e.ui.login.button_changePassword).removeAttr("disabled"),!1):($("#changePass button[type=submit]").text(e.ui.login.button_changingPassword).attr("disabled","disabled"),p.changePass(n.changepass.uuid,g(n.changeData.newPass),n.changepass.key),void 0):(n.alert={changePass:{display:!0,type:"alert-error",message:e.ui.errors.login.changePassAllFields}},$("#changePass button[type=submit]").text(e.ui.login.button_changePassword).removeAttr("disabled"),!1)}}]),angular.module("WebPaige.Controllers.Logout",[]).controller("logout",["$rootScope","$scope","$window","Session","User","Storage",function(e,t,r,n,a,o){$(".navbar").hide(),$("#footer").hide();var i=angular.fromJson(o.get("logindata")),s=angular.fromJson(o.get("registeredNotifications"));a.logout().then(function(e){e.error?console.warn("error ->",e):(o.clearAll(),o.session.clearAll(),o.add("logindata",angular.toJson(i)),o.add("registeredNotifications",angular.toJson(s)),r.location.href="logout.html")})}]),angular.module("WebPaige.Controllers.Dashboard",[]).controller("dashboard",["$scope","$rootScope","$q","$window","$location","Dashboard","Slots","Dater","Storage","Settings","Profile","Groups","Announcer",function(e,t,r,n,a,o,i,s,u,l,d,c,g){function m(){e.loadingPies=!0,e.checkAnyPies()?t.statusBar.off():o.pies().then(function(r){e.loadingPies=!1,r.error?(t.notifier.error(t.ui.errors.dashboard.getOverviews),console.warn("error ->",r.error)):(e.shortageHolders={},e.loading.pies=!1,e.periods={start:r[0].weeks.current.start.date,end:r[0].weeks.next.end.date},angular.forEach(r,function(r){r.weeks.current.state instanceof Array&&(r.weeks.current.state=r.weeks.current.state[0]),null===r.weeks.current.state.diff&&(r.weeks.current.state.diff=0),null===r.weeks.current.state.wish&&(r.weeks.current.state.wish=0),r.weeks.current.state.diff>0?r.weeks.current.state.cls="more":0===r.weeks.current.state.diff?r.weeks.current.state.cls="even":0>r.weeks.current.state.diff&&(r.weeks.current.state.cls="less"),r.weeks.current.state.start=void 0!==r.weeks.current.state.start?new Date(1e3*r.weeks.current.state.start).toString(t.config.formats.datetime):"Geen planning",r.weeks.current.state.end=void 0!==r.weeks.current.state.end?new Date(1e3*r.weeks.current.state.end).toString(t.config.formats.datetime):"Geen planning",r.shortages={current:r.weeks.current.shortages,next:r.weeks.next.shortages,total:r.weeks.current.shortages.length+r.weeks.next.shortages.length},r.state=r.weeks.current.state,delete r.weeks.current.shortages,delete r.weeks.current.state,e.shortageHolders["shortages-"+r.id]=!1}),e.pies=r)}).then(function(){function t(e,t,r){setTimeout(function(){$.browser.msie&&"8.0"==$.browser.version?$("#"+e+t).html(""):document.getElementById(e+t)&&(document.getElementById(e+t).innerHTML="");var n=[],a={more:"#415e6b",even:"#ba6a24",less:"#a0a0a0"},o=[],i=[];angular.forEach(r,function(e,t){0!==e&&n.push({ratio:e,color:a[t]})}),n=n.sort(function(e,t){return t.ratio-e.ratio}),angular.forEach(n,function(e){o.push(e.color),i.push(e.ratio)});var s=new Raphael(e+t);s.piechart(40,40,40,i,{colors:o,stroke:"white"})},100)}angular.forEach(e.pies,function(e){t("weeklyPieCurrent-",e.id+"-"+e.division,e.weeks.current.ratios),t("weeklyPieNext-",e.id+"-"+e.division,e.weeks.next.ratios)})})}function p(r){var n=angular.fromJson(u.get("guard"));e.saMembers={truck:[],reserves:[]},e.saSynced=n.synced,angular.forEach(r.selection,function(n){function a(e){return null!==e?r.users[e].name:"Niet ingedeeld"}switch(n.role){case"bevelvoerder":e.saMembers.truck.push({rank:1,icon:"B",role:"Bevelvoerder","class":"sa-icon-commander",name:a(n.user)});break;case"chauffeur":e.saMembers.truck.push({rank:0,icon:"C",role:"Chauffeur","class":"sa-icon-driver",name:a(n.user)});break;case"manschap.1":e.saMembers.truck.push({rank:2,icon:"M1",role:"Manschap 1",name:a(n.user)});break;case"manschap.2":e.saMembers.truck.push({rank:3,icon:"M2",role:"Manschap 2",name:a(n.user)});break;case"manschap.3":e.saMembers.truck.push({rank:4,icon:"M3",role:"Manschap 3",name:a(n.user)});break;case"manschap.4":e.saMembers.truck.push({rank:5,icon:"M4",role:"Manschap 4",name:a(n.user)})}t.app.guard.role=r.role,r.users[t.app.resources.uuid]?t.app.guard.currentState=r.users[t.app.resources.uuid].state:i.currentState().then(function(e){t.app.guard.currentState=e.label});var o={},s=["available","unavailable","noplanning"];angular.forEach(s,function(e){o[e]=[],angular.forEach(r.reserves[e],function(t){angular.forEach(t,function(t,r){o[e].push({id:r,name:t.name,state:t.state})})})}),e.saMembers.reserves=o,e.loading.smartAlarm=!1})}t.notification.status=!1,t.fixStyles(),e.loading={pies:!0,alerts:!0,smartAlarm:!0},e.more={status:!1,text:t.ui.dashboard.showMore},e.synced={alarms:(new Date).getTime(),pies:(new Date).getTime()};var f=u.local.groups(),h={};angular.forEach(u.local.settings().app.widgets.groups,function(e,t){h[t]=e}),angular.forEach(f,function(e){h[e.uuid]||(h[e.uuid]={divisions:!!(t.config.timeline.config.divisions.length>0),status:!1})}),e.popover={groups:f,selection:h,divisions:!!(t.config.timeline.config.divisions.length>0)},e.checkAnyPies=function(){var t=!0;return e.loading.pies=!1,angular.forEach(u.local.settings().app.widgets.groups,function(e){e.status===!0&&(t=!1)}),t},e.loadingPies=!0,m(),t.config.profile.smartAlarm&&(angular.fromJson(u.get("guard")).selection&&(e.loading.smartAlarm=!1,p(angular.fromJson(u.get("guard")))),c.guardMonitor().then(function(){c.guardRole().then(function(e){p(e)})})),e.saveOverviewWidget=function(e){t.statusBar.display(t.ui.settings.saving),angular.forEach(e,function(e){e.status||(e.divisions=!1)}),l.save(t.app.resources.uuid,{user:u.local.settings().user,app:{group:u.local.settings().app.group,widgets:{groups:e}}}).then(function(){t.statusBar.display(t.ui.dashboard.refreshGroupOverviews),d.get(t.app.resources.uuid,!0).then(function(){m()})})},e.getP2000=function(){o.p2000().then(function(t){e.loading.alerts=!1,e.alarms=t.alarms,e.alarms.list=e.alarms.short,e.synced.alarms=t.synced})},t.alarmSync={start:function(){n.planboardSync=n.setInterval(function(){"/dashboard"==a.path()&&(e.$apply(),e.getP2000(),t.config.profile.smartAlarm&&(angular.fromJson(u.get("guard").selection)&&p(angular.fromJson(u.get("guard"))),c.guardRole().then(function(e){p(e)})))},6e4)},clear:function(){n.clearInterval(n.alarmSync)}},t.alarmSync.start(),e.toggle=function(r){e.alarms.list=r?e.alarms.short:e.alarms.long,e.more.text=r?t.ui.dashboard.showMore:t.ui.dashboard.showLess,e.more.status=!e.more.status},e.fixPopoverPos=function(){setTimeout(function(){var e=$("#dashboard .span9").css("width"),t=$("#dashboard .popover").css("width");$(".popover").css({top:$("#dashboardPopoverBtn").css("top"),left:e.substring(0,e.length-2)-t.substring(0,t.length-2)/2+4+"px"})},100)},t.config.profile.smartAlarm?$.ajax({url:t.config.profile.p2000.url,dataType:"json",success:function(r){t.statusBar.off();var n=g.process(r,!0),a={alarms:n,synced:(new Date).getTime()};e.$apply(function(){e.loading.alerts=!1,e.alarms=a.alarms,e.alarms.list=e.alarms.short,e.synced.alarms=a.synced})},error:function(){console.log("ERROR with getting p2000 for the first time!")}}):o.getCapcodes().then(function(r){var n="";r=r.sort(),angular.forEach(r,function(e){n+=e+", "}),e.capcodes=n.substring(0,n.length-2),$.ajax({url:t.config.profile.p2000.url+"?code="+r,dataType:"jsonp",success:function(r){t.statusBar.off();var n=g.process(r),a={alarms:n,synced:(new Date).getTime()};e.$apply(function(){e.loading.alerts=!1,e.alarms=a.alarms,e.alarms.list=e.alarms.short,e.synced.alarms=a.synced})},error:function(){console.log("ERROR with getting p2000 for the first time!")}})}),e.setPrefixedAvailability=function(e,t){u.session.add("setPrefixedAvailability",angular.toJson({availability:e,period:t})),a.path("/planboard").search({setPrefixedAvailability:!0})}}]),angular.module("WebPaige.Controllers.TV",[]).controller("tv",["$scope","$rootScope","$q","$window","$location","Dashboard","Dater","Storage","Settings","Profile","Groups","Announcer",function(e,t,r,n,a,o,i,s,u,l,d,c){function g(t){var r=angular.fromJson(s.get("guard"));e.saMembers={truck:[],reserves:[]},e.saSynced=r.synced,angular.forEach(t.selection,function(r){function n(e){return null!==e?t.users[e].name:"Niet ingedeeld"}switch(r.role){case"bevelvoerder":e.saMembers.truck.push({rank:1,icon:"B",role:"Bevelvoerder","class":"sa-icon-commander",name:n(r.user)});break;case"chauffeur":e.saMembers.truck.push({rank:0,icon:"C",role:"Chauffeur","class":"sa-icon-driver",name:n(r.user)});break;case"manschap.1":e.saMembers.truck.push({rank:2,icon:"M1",role:"Manschap 1",name:n(r.user)});break;case"manschap.2":e.saMembers.truck.push({rank:3,icon:"M2",role:"Manschap 2",name:n(r.user)});break;case"manschap.3":e.saMembers.truck.push({rank:4,icon:"M3",role:"Manschap 3",name:n(r.user)});break;case"manschap.4":e.saMembers.truck.push({rank:5,icon:"M4",role:"Manschap 4",name:n(r.user)})}var a={},o=["available","unavailable","noplanning"];angular.forEach(o,function(e){a[e]=[],angular.forEach(t.reserves[e],function(t){angular.forEach(t,function(t,r){a[e].push({id:r,name:t.name,state:t.state})})})}),e.saMembers.reserves=a,e.loading.smartAlarm=!1})}t.notifier.destroy(),t.fixStyles(),$(".navbar").hide(),$("#footer").hide(),$("#watermark").css({bottom:"-10px"}),e.loading={alerts:!0,smartAlarm:!0},e.synced={alarms:(new Date).getTime()},d.query().then(function(t){var n=[];angular.forEach(t,function(e){n.push(d.get(e.uuid))}),r.all(n).then(function(){d.uniqueMembers();var t=angular.fromJson(s.get("guard"));t&&t.selection&&(e.loading.smartAlarm=!1,g(angular.fromJson(s.get("guard")))),d.guardMonitor().then(function(){d.guardRole().then(function(e){g(e)})})})}),e.getP2000=function(){o.p2000().then(function(t){e.loading.alerts=!1,e.alarms=t.alarms,e.alarms.list=e.alarms.short,e.synced.alarms=t.synced})},n.setInterval(function(){e.$apply(),e.getP2000();var t=angular.fromJson(s.get("guard"));t&&t.selection&&g(angular.fromJson(s.get("guard"))),d.guardRole().then(function(e){g(e)})},6e4),$.ajax({url:t.config.profile.p2000.url,dataType:"json",success:function(r){t.statusBar.off();var n=c.process(r,!0),a={alarms:n,synced:(new Date).getTime()};e.$apply(function(){e.loading.alerts=!1,e.alarms=a.alarms,e.alarms.list=e.alarms.short,e.synced.alarms=a.synced})},error:function(){console.log("ERROR with getting p2000 for the first time!")}})}]),angular.module("WebPaige.Controllers.Planboard",[]).controller("planboard",["$rootScope","$scope","$q","$window","$location","data","Slots","Dater","Storage",function(e,t,r,n,a,o,i,s,u){e.notification.status=!1,e.fixStyles(),t.self=this,t.data=o;var l=u.local.groups(),d=u.local.settings();t.current={layouts:{user:!0,group:!0,members:!1},day:s.current.today(),week:s.current.week(),month:s.current.month(),year:s.current.year(),group:d.app.group,division:"all"},t.periods=s.getPeriods(),t.periodsNext=s.getPeriods(!0),t.slot={};var c={};c=s.current.today()>360?{start:t.periods.days[358].last.timeStamp,end:t.periods.days[365].last.timeStamp}:{start:t.periods.days[s.current.today()-1].last.timeStamp,end:t.periods.days[s.current.today()+6].last.timeStamp},t.timeline={id:"mainTimeline",main:!0,user:{id:e.app.resources.uuid,role:e.app.resources.role},current:t.current,options:{start:c.start,end:c.end,min:c.start,max:c.end},range:{start:c.start,end:c.end},scope:{day:!1,week:!0,month:!1},config:{bar:e.config.timeline.config.bar,layouts:e.config.timeline.config.layouts,wishes:e.config.timeline.config.wishes,legenda:{},legendarer:e.config.timeline.config.legendarer,states:e.config.timeline.config.states,divisions:e.config.timeline.config.divisions,densities:e.config.timeline.config.densities}},$.browser.msie&&"8.0"==$.browser.version&&(t.timeline.options={start:t.periods.days[s.current.today()].last.timeStamp,end:t.periods.days[s.current.today()+7].last.timeStamp,min:t.periods.days[s.current.today()].last.timeStamp,max:t.periods.days[s.current.today()+7].last.timeStamp}),angular.forEach(e.config.timeline.config.states,function(e,r){t.timeline.config.legenda[r]=!0}),t.timeline.config.legenda.groups={more:!0,even:!0,less:!0},t.daterange=s.readable.date(t.timeline.range.start)+" / "+s.readable.date(t.timeline.range.end);var g={};angular.forEach(t.timeline.config.states,function(e,t){e.display&&(g[t]=e.label)}),t.states=g,t.groups=l,t.divisions=t.timeline.config.divisions,t.timeline.config.divisions.length>0&&("all"!==t.divisions[0].id&&t.divisions.unshift({id:"all",label:"Alle divisies"}),t.groupPieHide={},angular.forEach(t.divisions,function(e){t.groupPieHide[e.id]=!1})),t.resetViews=function(){t.views={slot:{add:!1,edit:!1},group:!1,wish:!1,member:!1}},t.resetViews(),e.$on("resetPlanboardViews",function(){t.resetViews()}),t.toggleSlotForm=function(){t.views.slot.add?(e.planboardSync.start(),t.resetInlineForms()):(e.planboardSync.clear(),e.$broadcast("slotInitials"),t.resetViews(),t.views.slot.add=!0)},t.resetInlineForms=function(){t.slot={},t.original={},t.resetViews()},t.sendShortageMessage=function(t){e.statusBar.display(e.ui.planboard.preCompilingStortageMessage),u.session.add("escalation",angular.toJson({group:t.group,start:{date:t.start.date,time:t.start.time},end:{date:t.end.date,time:t.end.time},diff:t.diff})),a.path("/messages").search({escalate:!0}).hash("compose")}}]),angular.module("WebPaige.Controllers.Timeline",[]).controller("timeline",["$rootScope","$scope","$q","$location","$route","$window","Slots","Dater","Storage","Sloter","Profile",function(e,t,r,n,a,o,i,s,u,l,d){function c(){t.timeline.current.layouts.group&&(e.statusBar.display(e.ui.message.getWishes),i.wishes({id:t.timeline.current.group,start:t.data.periods.start/1e3,end:t.data.periods.end/1e3}).then(function(r){e.statusBar.off(),t.data.aggs.wishes=r,t.timeliner.render({start:t.timeline.range.start,end:t.timeline.range.end},!0)}))}var g;if(t.$watch(function(){if(t.timeline&&t.timeline.main){g=t.self.timeline.getVisibleChartRange();var r={hour:36e5,day:864e5,week:6048e5};o=s.calculate.diff(g)-r.hour,t.timeline.scope=r.day>=o?{day:!0,week:!1,month:!1}:r.week>=o?{day:!1,week:!0,month:!1}:{day:!1,week:!1,month:!0},t.timeline.range={start:""+new Date(g.start),end:""+new Date(g.end)},t.daterange=s.readable.date(t.timeline.range.start)+" / "+s.readable.date(t.timeline.range.end)}else a.current.params.userId!=e.app.resources.uuid&&t.self.timeline&&(g=t.self.timeline.getVisibleChartRange(),t.timeline.range={start:""+new Date(g.start),end:""+new Date(g.end)});if(t.timeline){var n=new Date(Number(s.current.year())+1,11).moveToLastDayOfMonth().addDays(1),o=n-new Date(g.end);if(0>=o)$("#timelineAfterBtn").attr("disabled","disabled");else if(t.timeline.current.year==s.current.year()&&(t.timeline.scope.month&&1===t.timeline.current.month||t.timeline.scope.week&&1===t.timeline.current.week&&12!=t.timeline.current.month||t.timeline.scope.day&&1===t.timeline.current.day))$("#timelineBeforeBtn").attr("disabled","disabled");else{var i=$("#timelineBeforeBtn"),u=$("#timelineAfterBtn"),l=i.attr("disabled"),d=u.attr("disabled");l!==void 0&&l!==!1&&i.removeAttr("disabled"),d!==void 0&&d!==!1&&u.removeAttr("disabled")}}}),e.$on("slotInitials",function(){t.slot={},t.slot={start:{date:(new Date).toString(e.config.formats.date),time:(new Date).toString(e.config.formats.time),datetime:(new Date).toString("yyyy-MM-ddTHH:mm:ss")},end:{date:(new Date).toString(e.config.formats.date),time:(new Date).addHours(1).toString("HH:00"),datetime:(new Date).addHours(1).toString("yyyy-MM-ddTHH:00:00")},state:"com.ask-cs.State.Available",recursive:!1,id:""},console.log("slot initials ->",t.slot)}),t.timeliner={init:function(){t.self.timeline=new links.Timeline(document.getElementById(t.timeline.id)),links.events.addListener(t.self.timeline,"rangechanged",this.getRange),links.events.addListener(t.self.timeline,"add",this.onAdd),links.events.addListener(t.self.timeline,"delete",this.onRemove),links.events.addListener(t.self.timeline,"change",this.onChange),links.events.addListener(t.self.timeline,"select",this.onSelect),this.render(t.timeline.options)},getRange:function(){t.timelineGetRange()},onAdd:function(){t.timelineOnAdd()},onRemove:function(){t.timelineOnRemove()},onChange:function(){t.timelineChanging()},onSelect:function(){t.timelineOnSelect()},render:function(r,a){var o,i;if(t.timeline.range?(typeof t.timeline.range.start!=Date&&(t.timeline.range.start=new Date(t.timeline.range.start)),typeof t.timeline.range.end!=Date&&(t.timeline.range.end=new Date(t.timeline.range.end)),o=t.timeline.range.start,i=t.timeline.range.end):(o=new Date(r.start),i=new Date(r.end)),t.timeline={id:t.timeline.id,main:t.timeline.main,user:t.timeline.user,current:t.timeline.current,scope:t.timeline.scope,config:t.timeline.config,options:{start:a?o:new Date(r.start),end:a?i:new Date(r.end),min:new Date(r.start),max:new Date(r.end)}},$.browser.msie&&"8.0"==$.browser.version&&(t.timeline.options.start=new Date(r.start),t.timeline.options.end=new Date(r.end)),angular.extend(t.timeline.options,e.config.timeline.options),t.timeline.main)t.self.timeline.draw(l.process(t.data,t.timeline.config,t.divisions,t.timeline.user.role,t.timeline.current),t.timeline.options);else{var s="timeline"==n.hash()?100:2e3;e.timelineLoaded=!1,setTimeout(function(){e.timelineLoaded=!0,e.$apply(),t.self.timeline.draw(l.profile(t.data.slots.data,t.timeline.config),t.timeline.options)},s)}t.self.timeline.setVisibleChartRange(t.timeline.options.start,t.timeline.options.end)},load:function(r,n){var a=this;e.statusBar.display(e.ui.planboard.refreshTimeline),t.timeline.main?i.all({groupId:t.timeline.current.group,division:t.timeline.current.division,layouts:t.timeline.current.layouts,month:t.timeline.current.month,stamps:r}).then(function(o){o.error?(e.notifier.error(e.ui.errors.timeline.query),console.warn("error ->",o)):(t.data=o,a.render(r,n)),e.statusBar.off(),t.timeline.config.wishes&&c()}):d.getSlots(t.timeline.user.id,r).then(function(o){o.error?(e.notifier.error(e.ui.errors.timeline.query),console.warn("error ->",o)):(o.user=o.slots.data,t.data=o,a.render(r,n),e.statusBar.off())})},refresh:function(){t.slot={},t.timeline.main?e.$broadcast("resetPlanboardViews"):t.forms={add:!0,edit:!1},this.load({start:t.data.periods.start,end:t.data.periods.end},!0)},redraw:function(){t.self.timeline.redraw()},isAdded:function(){return $(".state-new").length},cancelAdd:function(){t.self.timeline.cancelAdd()}},t.timeline&&t.timeliner.init(),e.$on("timeliner",function(){t.timeliner.load({start:new Date(arguments[1].start).getTime(),end:new Date(arguments[1].end).getTime()})}),t.requestTimeline=function(e){switch(e){case"group":t.timeline.current.layouts.group=!t.timeline.current.layouts.group,t.timeline.current.layouts.members&&!t.timeline.current.layouts.group&&(t.timeline.current.layouts.members=!1);break;case"members":t.timeline.current.layouts.members=!t.timeline.current.layouts.members,t.timeline.current.layouts.members&&!t.timeline.current.layouts.group&&(t.timeline.current.layouts.group=!0)}t.timeliner.load({start:t.data.periods.start,end:t.data.periods.end})},t.timelineGetRange=function(){var e=t.self.timeline.getVisibleChartRange();t.$apply(function(){t.timeline.range={start:""+new Date(e.from),end:""+new Date(e.till)},t.timeline.main&&(t.daterange={start:s.readable.date(new Date(e.start).getTime()),end:s.readable.date(new Date(e.end).getTime())})})},t.selectedSlot=function(){var r;if(t.timeliner.isAdded()>0,r=t.self.timeline.getSelection()[0]){var n=t.self.timeline.getItem(r.row),a=angular.fromJson(n.content.match(/<span class="secret">(.*)<\/span>/)[1])||null;if(t.original={start:n.start,end:n.end,content:{recursive:a.recursive,state:a.state}},t.timeline.main?e.$broadcast("resetPlanboardViews"):t.forms={add:!1,edit:!0},a.type){if(t.timeline.main)switch(a.type){case"slot":t.views.slot.edit=!0;
break;case"group":t.views.group=!0;break;case"wish":t.views.wish=!0;break;case"member":t.views.member=!0}if(t.slot={start:{date:new Date(n.start).toString(e.config.formats.date),time:new Date(n.start).toString(e.config.formats.time),datetime:new Date(n.start).toISOString().replace("Z","")},end:{date:new Date(n.end).toString(e.config.formats.date),time:new Date(n.end).toString(e.config.formats.time),datetime:new Date(n.end).toISOString().replace("Z","")},state:a.state,recursive:a.recursive,id:a.id},t.timeline.main)switch(a.type){case"group":t.slot.diff=a.diff,t.slot.group=a.group;break;case"wish":t.slot.wish=a.wish,t.slot.group=a.group,t.slot.groupId=a.groupId;break;case"member":t.slot.member=a.mid}}return n}},t.timelineOnSelect=function(){e.planboardSync.clear(),t.$apply(function(){t.selectedOriginal=t.selectedSlot()})},t.destroy={timeline:function(){},statistics:function(){setTimeout(function(){t.timeliner.redraw()},10)}},t.changeDivision=function(){angular.forEach(t.divisions,function(e){t.groupPieHide[e.id]=!1}),"all"!==t.timeline.current.division&&(t.groupPieHide[t.timeline.current.division]=!0),t.timeliner.render({start:t.timeline.range.start,end:t.timeline.range.end})},t.barCharts=function(){t.timeline.config.bar=!t.timeline.config.bar,t.timeliner.render({start:t.timeline.range.start,end:t.timeline.range.end})},t.groupWishes=function(){t.timeline.config.wishes?(t.timeline.config.wishes=!1,delete t.data.aggs.wishes,t.timeliner.render({start:t.timeline.range.start,end:t.timeline.range.end},!0)):(t.timeline.config.wishes=!0,c())},t.showLegenda=function(){t.timeline.config.legendarer=!t.timeline.config.legendarer},t.alterLegenda=function(e){t.timeline.config.legenda=e,t.timeliner.render({start:t.timeline.range.start,end:t.timeline.range.end})},t.setAvailability=function(r,n){var a=Math.abs(Math.floor(Date.now().getTime()/1e3)),o=3600,s={start:a,end:Number(a+n*o),state:r?"com.ask-cs.State.Available":"com.ask-cs.State.Unavailable"},l={start:s.start,end:s.end,recursive:!1,text:s.state};e.statusBar.display(e.ui.planboard.addTimeSlot),i.add(l,t.timeline.user.id).then(function(r){u.session.remove("setPrefixedAvailability"),e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.add),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.slotAdded),t.timeliner.refresh(),e.planboardSync.start()})},n.search().setPrefixedAvailability){var m=angular.fromJson(u.session.get("setPrefixedAvailability"));t.setAvailability(m.availability,m.period)}t.timelineOnAdd=function(r,n){if(e.planboardSync.clear(),console.log("slot adding values ->",n),r){var a=Date.now().getTime(),o={start:e.browser.mobile?Math.abs(Math.floor(new Date(n.start.datetime).getTime()/1e3)):s.convert.absolute(n.start.date,n.start.time,!0),end:e.browser.mobile?Math.abs(Math.floor(new Date(n.end.datetime).getTime()/1e3)):s.convert.absolute(n.end.date,n.end.time,!0),recursive:n.recursive?!0:!1,text:n.state};a>1e3*o.start+12e4&&0==o.recursive?(e.notifier.error(e.ui.errors.timeline.pastAdding),t.timeliner.refresh()):(e.statusBar.display(e.ui.planboard.addTimeSlot),i.add(o,t.timeline.user.id).then(function(r){e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.add),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.slotAdded),t.timeliner.refresh(),e.planboardSync.start()}))}else{var o=t.self.timeline.getItem(t.self.timeline.getSelection()[0].row);t.timeliner.isAdded()>1&&t.self.timeline.cancelAdd(),t.$apply(function(){t.timeline.main?(e.$broadcast("resetPlanboardViews"),t.views.slot.add=!0):t.forms={add:!0,edit:!1},t.slot={start:{date:new Date(o.start).toString(e.config.formats.date),time:new Date(o.start).toString(e.config.formats.time),datetime:new Date(o.start).toISOString()},end:{date:new Date(o.end).toString(e.config.formats.date),time:new Date(o.end).toString(e.config.formats.time),datetime:new Date(o.end).toISOString()},recursive:o.group.match(/recursive/)?!0:!1,state:"com.ask-cs.State.Available"}})}},t.timelineChanging=function(){e.planboardSync.clear();var r=t.self.timeline.getItem(t.self.timeline.getSelection()[0].row),n={start:r.start,end:r.end,content:angular.fromJson(r.content.match(/<span class="secret">(.*)<\/span>/)[1])};t.$apply(function(){t.slot={start:{date:new Date(r.start).toString(e.config.formats.date),time:new Date(r.start).toString(e.config.formats.time),datetime:new Date(r.start).toISOString()},end:{date:new Date(r.end).toString(e.config.formats.date),time:new Date(r.end).toString(e.config.formats.time),datetime:new Date(r.end).toISOString()},state:n.content.state,recursive:n.content.recursive,id:n.content.id}})},t.timelineOnChange=function(r,n,a,o){if(e.planboardSync.clear(),r)o={start:e.browser.mobile?new Date(a.start.datetime).getTime():s.convert.absolute(a.start.date,a.start.time,!1),end:e.browser.mobile?new Date(a.end.datetime).getTime():s.convert.absolute(a.end.date,a.end.time,!1),content:{recursive:a.recursive,state:a.state}};else{var u=t.self.timeline.getItem(t.self.timeline.getSelection()[0].row);o={start:u.start,end:u.end,content:angular.fromJson(u.content.match(/<span class="secret">(.*)<\/span>/)[1])}}var l=function(e,t){var r=Date.now().getTime();return e==t?!0:r>e?!1:t>=r};0==o.content.recursive&&new Date(t.original.start).getTime()<o.start&&new Date(t.original.end).getTime()<o.end&&t.original.start<Date.now().getTime()?i.change(t.original,{start:new Date(t.original.start).getTime(),end:Date.now().getTime(),content:{recursive:a.recursive,state:a.state}},t.timeline.user.id).then(function(r){e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.change),console.warn("error ->",r)):i.add({start:o.start/1e3,end:o.end/1e3,recursive:a.recursive?!0:!1,text:a.state},t.timeline.user.id).then(function(r){e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.add),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.slotChanged),t.timeliner.refresh(),e.planboardSync.start()})}):1==o.content.recursive||l(new Date(t.original.start).getTime(),o.start)&&l(new Date(t.original.end).getTime(),o.end)?(e.statusBar.display(e.ui.planboard.changingSlot),i.change(t.original,o,t.timeline.user.id).then(function(r){e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.change),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.slotChanged),t.timeliner.refresh(),e.planboardSync.start()})):(console.log("->",e.ui.errors),e.notifier.error(e.ui.errors.timeline.pastChanging),t.timeliner.refresh())},t.timelineOnRemove=function(){if(e.planboardSync.clear(),t.timeliner.isAdded()>0)t.self.timeline.cancelAdd(),t.$apply(function(){t.resetInlineForms()});else{var r=Date.now().getTime();r>=t.original.end.getTime()&&0==t.original.content.recursive?(e.notifier.error(e.ui.errors.timeline.pastDeleting),t.timeliner.refresh()):(e.statusBar.display(e.ui.planboard.deletingTimeslot),i.remove(t.original,t.timeline.user.id).then(function(r){e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.remove),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.timeslotDeleted),t.timeliner.refresh(),e.planboardSync.start()}))}},t.wisher=function(r){e.statusBar.display(e.ui.planboard.changingWish),i.setWish({id:r.groupId,start:e.browser.mobile?new Date(r.start.datetime).getTime()/1e3:s.convert.absolute(r.start.date,r.start.time,!0),end:e.browser.mobile?new Date(r.end.datetime).getTime()/1e3:s.convert.absolute(r.end.date,r.end.time,!0),recursive:!1,wish:r.wish}).then(function(r){e.$broadcast("resetPlanboardViews"),r.error?(e.notifier.error(e.ui.errors.timeline.wisher),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.wishChanged),t.timeliner.refresh()})},t.timeline&&t.timeline.main&&setTimeout(function(){t.self.timeline.redraw()},100),e.planboardSync={start:function(){o.planboardSync=o.setInterval(function(){"/planboard"==n.path()&&(t.slot={},e.$broadcast("resetPlanboardViews"),t.timeliner.load({start:t.data.periods.start,end:t.data.periods.end},!0))},6e4)},clear:function(){o.clearInterval(o.planboardSync)}},e.planboardSync.start()}]),angular.module("WebPaige.Controllers.Timeline.Navigation",[]).controller("timeline-navigation",["$rootScope","$scope","$window",function(e,t,r){t.timelineScoper=function(e){switch(t.timeline.current.day=t.current.day,t.timeline.current.week=t.current.week,t.timeline.current.month=t.current.month,t.timeline.current.year=Number((new Date).toString("yyyy")),e){case"day":t.timeline.scope={day:!0,week:!1,month:!1},t.timeliner.load({start:t.periods.days[t.timeline.current.day].first.timeStamp,end:t.periods.days[t.timeline.current.day].last.timeStamp});break;case"week":t.timeline.scope={day:!1,week:!0,month:!1},t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp});break;case"month":t.timeline.scope={day:!1,week:!1,month:!0},t.timeliner.load({start:t.periods.months[t.timeline.current.month].first.timeStamp,end:t.periods.months[t.timeline.current.month].last.timeStamp})}},t.timelineBefore=function(){var e=(new Date).toString("yyyy");t.timeline.scope.day?t.timeline.current.year===Number(e)+1?1===t.timeline.current.day?(t.timeline.current.year=e,t.timeline.current.day=t.periods.days.total,t.timeliner.load({start:t.periods.days[t.timeline.current.day].first.timeStamp,end:t.periods.days[t.timeline.current.day].last.timeStamp})):(t.timeline.current.day--,t.timeliner.load({start:t.periodsNext.days[t.timeline.current.day].first.timeStamp,end:t.periodsNext.days[t.timeline.current.day].last.timeStamp})):1!=t.timeline.current.day&&(t.timeline.current.day--,t.timeliner.load({start:t.periods.days[t.timeline.current.day].first.timeStamp,end:t.periods.days[t.timeline.current.day].last.timeStamp})):t.timeline.scope.week?t.timeline.current.year===Number(e)+1?1===t.timeline.current.week?(t.timeline.current.year=e,t.timeline.current.week=52,t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp})):(t.timeline.current.week--,t.timeliner.load({start:t.periodsNext.weeks[t.timeline.current.week].first.timeStamp,end:t.periodsNext.weeks[t.timeline.current.week].last.timeStamp})):1!=t.timeline.current.week?(t.timeline.current.week--,t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp})):12==t.timeline.current.month&&(t.timeline.current.week=53,t.timeline.current.week--,t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp})):t.timeline.scope.month&&(t.timeline.current.year===Number(e)+1?1===t.timeline.current.month?(t.timeline.current.year=e,t.timeline.current.month=12,t.timeliner.load({start:t.periods.months[t.timeline.current.month].first.timeStamp,end:t.periods.months[t.timeline.current.month].last.timeStamp})):(t.timeline.current.month--,t.timeliner.load({start:t.periodsNext.months[t.timeline.current.month].first.timeStamp,end:t.periodsNext.months[t.timeline.current.month].last.timeStamp})):1!=t.timeline.current.month&&(t.timeline.current.month--,t.timeliner.load({start:t.periods.months[t.timeline.current.month].first.timeStamp,end:t.periods.months[t.timeline.current.month].last.timeStamp})))},t.timelineAfter=function(){var e=(new Date).toString("yyyy");t.timeline.scope.day?t.timeline.current.year===Number(e)?t.timeline.current.day!=t.periods.days.total?(t.timeline.current.day++,t.timeliner.load({start:t.periods.days[t.timeline.current.day].first.timeStamp,end:t.periods.days[t.timeline.current.day].last.timeStamp})):(t.timeline.current.year=Number(e)+1,t.timeline.current.day=1,t.timeliner.load({start:t.periodsNext.days[t.timeline.current.day].first.timeStamp,end:t.periodsNext.days[t.timeline.current.day].last.timeStamp})):(t.timeline.current.year=Number(e)+1,t.timeline.current.day++,t.timeliner.load({start:t.periodsNext.days[t.timeline.current.day].first.timeStamp,end:t.periodsNext.days[t.timeline.current.day].last.timeStamp})):t.timeline.scope.week?t.timeline.current.year==e?(1==t.timeline.current.week&&12==t.timeline.current.month&&(t.timeline.current.week=53),53!=t.timeline.current.week?(t.timeline.current.week++,t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp})):(t.timeline.current.year=Number(e)+1,t.timeline.current.week=1,t.timeliner.load({start:t.periodsNext.weeks[t.timeline.current.week].first.timeStamp,end:t.periodsNext.weeks[t.timeline.current.week].last.timeStamp}))):53!=t.timeline.current.week&&(t.timeline.current.week++,t.timeliner.load({start:t.periodsNext.weeks[t.timeline.current.week].first.timeStamp,end:t.periodsNext.weeks[t.timeline.current.week].last.timeStamp})):t.timeline.scope.month&&(t.timeline.current.year==e?12!=t.timeline.current.month?(t.timeline.current.month++,t.timeliner.load({start:t.periods.months[t.timeline.current.month].first.timeStamp,end:t.periods.months[t.timeline.current.month].last.timeStamp})):(t.timeline.current.year=Number(e)+1,t.timeline.current.month=1,t.timeliner.load({start:t.periodsNext.months[t.timeline.current.month].first.timeStamp,end:t.periodsNext.months[t.timeline.current.month].last.timeStamp})):12!=t.timeline.current.month&&(t.timeline.current.month++,t.timeliner.load({start:t.periodsNext.months[t.timeline.current.month].first.timeStamp,end:t.periodsNext.months[t.timeline.current.month].last.timeStamp})))},t.timelineThisWeek=function(){t.timeline.current.week!=(new Date).getWeek()&&(t.timeliner.load({start:t.periods.weeks[(new Date).getWeek()].first.timeStamp,end:t.periods.weeks[(new Date).getWeek()].last.timeStamp}),t.timeline.range={start:t.periods.weeks[(new Date).getWeek()].first.day,end:t.periods.weeks[(new Date).getWeek()].last.day})},t.timelineWeekBefore=function(){1!=t.timeline.current.week&&(t.timeline.current.week--,t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp})),t.timeline.range={start:t.periods.weeks[t.timeline.current.week].first.day,end:t.periods.weeks[t.timeline.current.week].last.day}},t.timelineWeekAfter=function(){53!=t.timeline.current.week&&(t.timeline.current.week++,t.timeliner.load({start:t.periods.weeks[t.timeline.current.week].first.timeStamp,end:t.periods.weeks[t.timeline.current.week].last.timeStamp})),t.timeline.range={start:t.periods.weeks[t.timeline.current.week].first.day,end:t.periods.weeks[t.timeline.current.week].last.day}},t.timelineZoomIn=function(){t.self.timeline.zoom(e.config.timeline.config.zoom,Date.now())},t.timelineZoomOut=function(){t.self.timeline.zoom(-e.config.timeline.config.zoom,Date.now())},r.onresize=function(){t.self.timeline.redraw()},t.fullWidth=function(){t.self.timeline.redraw()}}]),angular.module("WebPaige.Controllers.Messages",[]).controller("messages",["$scope","$rootScope","$q","$location","$route","data","Messages","Storage","Timer","Offsetter",function(e,t,r,n,a,o,i,s,u,l){function d(t){e.views={compose:!1,message:!1,inbox:!1,outbox:!1,trash:!1,notifications:!1,scheaduler:!1},e.views[t]=!0}function c(r){if(t.statusBar.display(t.ui.message.loadingMessage),d("message"),e.setViewTo("message"),e.message=i.find(r),"NEW"==e.message.state&&"inbox"==e.message.box){i.changeState([r],"READ").then(function(e){e.error&&(t.notifier.error(t.ui.errors.messages.changeState),console.warn("error ->",e))});var n=[];angular.forEach(e.messages.inbox,function(t){t.uuid==e.message.uuid&&(t.state="READ"),n.push(t)}),e.messages.inbox=n,i.unreadCount()}t.statusBar.off()}function g(r){e.origin="notifications",e.scheadulerPane=!0;var n=i.scheaduled.find(r);angular.forEach(n.types,function(t){"sms"==t&&(e.broadcast.sms=!0),"email"==t&&(e.broadcast.email=!0)});var a=angular.fromJson(s.get("members")),o=angular.fromJson(s.get("groups")),u=[];angular.forEach(n.recipients,function(e){var r;a[e]?(r=a[e].name,u.push({group:t.ui.message.receiversUsers,id:e,name:r})):angular.forEach(o,function(n){n.uuid==e&&(r=n.name,u.push({group:t.ui.message.receiversGroups,id:e,name:r}))})}),e.message={subject:n.subject,body:n.message,receivers:u},angular.forEach($("div#composeTab select.chzn-select option"),function(e){angular.forEach(n.recipients,function(t){a[t]?e.innerHTML==a[t].name&&(e.selected=!0):angular.forEach(o,function(r){r.uuid==t&&e.innerHTML==r.name&&(e.selected=!0)})})}),$("div#composeTab select.chzn-select").trigger("liszt:updated"),e.scheaduled={uuid:n.uuid,sender:n.sender,title:n.label,status:n.active,offsets:l.factory(n.offsets)};var d=0;angular.forEach(e.scheaduled.offsets,function(){d++}),e.scheaduleCount=d}function m(){angular.forEach(e.message.receivers,function(e){angular.forEach($("div#composeTab select.chzn-select option"),function(t){t.innerHTML==e.name&&(t.selected=!0)})}),$("div#composeTab select.chzn-select").trigger("liszt:updated")}if(t.notification.status=!1,t.fixStyles(),e.receviersList=i.receviers(),e.messages=o.messages,e.scheadules=o.scheadules,e.page={inbox:0,outbox:0,trash:0},e.paginate={set:function(t,r){e.page[r]=t},next:function(t){e.page[t]+1!=e.messages[t].length&&e.page[t]++},before:function(t){0!=e.page[t]&&e.page[t]--}},e.selection={inbox:{},outbox:{},trash:{}},e.selectionMaster={inbox:"",outbox:"",trash:""},e.broadcast={sms:!1,email:!1},e.scheaduled={title:"",offsets:{},status:!1},e.origin="inbox",e.setViewTo=function(t){e.$watch(t,function(){n.hash(t),d(t)})},n.hash())var p=n.hash();else{var p="inbox";n.hash("inbox")}if(d(p),e.scheadulerPane=!1,n.search().uuid&&("scheaduler"==n.hash()?g(n.search().uuid):c(n.search().uuid)),e.requestMessage=function(t,r){e.origin=r,c(t),e.$watch(n.search(),function(){n.search({uuid:t})})},e.scheaduleCounter=function(){var t=0;angular.forEach(e.scheaduled.offsets,function(){t++}),e.scheaduleCount=t},e.requestNotification=function(r){t.statusBar.display(t.ui.message.loadingNotifications),d("scheaduler"),e.setViewTo("scheaduler"),g(r),e.$watch(n.search(),function(){n.search({uuid:r})}),t.statusBar.off()},e.composeMessage=function(){e.views.compose?e.closeTabs():(n.search({}),e.message={},e.broadcast.sms=!1,e.broadcast.email=!1,e.scheadulerPane=!1,angular.forEach($("div#composeTab select.chzn-select option"),function(e){e.selected=!1}),$("div#composeTab select.chzn-select").trigger("liszt:updated"),e.scheaduled={title:"",offsets:{},status:!1},e.scheaduleCounter(),e.setViewTo("inbox"))},e.closeTabs=function(){e.message={},n.search({}),d(e.origin),e.setViewTo(e.origin),s.session.remove("escalation")},e.toggleSelection=function(t,r,n){var a=n?!0:!1;angular.forEach(t,function(t){e.selection[r][t.uuid]=a})},e.removeMessage=function(r){t.statusBar.display(t.ui.message.removing);var n=[];n.push(r),i.remove(n).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.removeMessage),console.warn("error ->",r)):(t.notifier.success(t.ui.message.removed),t.statusBar.display(t.ui.message.refreshing),i.query().then(function(r){e.messages=r.messages,t.loading=!1,e.closeTabs(),t.statusBar.off()}))})},e.removeMessages=function(r){t.statusBar.display(t.ui.message.removingSelected);var n=[];angular.forEach(r,function(e,t){e&&n.push(t)}),i.remove(n).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.removeMessages),console.warn("error ->",r)):(t.notifier.success(t.ui.message.removed),t.statusBar.display(t.ui.message.refreshing),i.query().then(function(r){e.messages=r.messages,t.statusBar.off()}))})},e.restoreMessage=function(r){t.statusBar.display(t.ui.message.restoring);var n=[];n.push(r),i.restore(n).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.restoreMessage),console.warn("error ->",r)):(t.notifier.success(t.ui.message.restored),t.statusBar.display(t.ui.message.refreshing),i.query().then(function(r){e.messages=r.messages,t.statusBar.off()}))})},e.restoreMessages=function(r){t.statusBar.display(t.ui.message.restoringSelected);var n=[];angular.forEach(r,function(e,t){e&&n.push(t)}),i.restore(n).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.restoreMessages),console.warn("error ->",r)):(t.notifier.success(t.ui.message.removed),t.statusBar.display(t.ui.message.refreshing),i.query().then(function(r){e.messages=r.messages,t.statusBar.off()}))})},e.emptyTrash=function(){t.statusBar.display(t.ui.message.emptying),i.emptyTrash().then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.emptyTrash),console.warn("error ->",r)):(t.notifier.success(t.ui.message.emptied),t.statusBar.display(t.ui.message.refreshing),i.query().then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.query),console.warn("error ->",r)):(e.messages=r.messages,t.statusBar.off())}))})},e.reply=function(r){d("compose"),e.setViewTo("compose");var n=angular.fromJson(s.get("members")),a=t.config.profile.smartAlarm?r.requester:r.requester.split("personalagent/")[1].split("/")[0],o=n[a]===void 0?a:n[a].name;e.message={subject:"RE: "+r.subject,receivers:[{group:"Users",id:a,name:o}]},m()},e.send=function(r,n){t.statusBar.display(t.ui.message.sending),r.receivers?i.send(r,n).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.send),console.warn("error ->",r)):(t.notifier.success(t.ui.message.sent),t.statusBar.display(t.ui.message.refreshing),i.query().then(function(n){n.error?(t.notifier.error(t.ui.errors.messages.query),console.warn("error ->",n)):(e.messages=n.messages,e.closeTabs(),e.requestMessage(r,e.origin),t.statusBar.off())}))}):(t.notifier.error(t.ui.message.noReceivers),t.statusBar.off())},$("div#composeTab select.chzn-select").chosen().change(function(){$.each($(this).next().find("ul li.result-selected"),function(e,t){var r=$(t).html();$.each($("div#composeTab select.chzn-select option"),function(e,t){t.innerHTML==r&&(t.selected=!0)})})}),n.search().escalate){var f=angular.fromJson(s.session.get("escalation")),h=f.group.split(">")[1].split("<")[0],v=f.group.split("uuid=")[1].split("#view")[0];setTimeout(function(){angular.forEach($("div#composeTab select.chzn-select option"),function(e){e.innerHTML==h&&(e.selected=!0)}),$("div#composeTab select.chzn-select").trigger("liszt:updated")},100),e.message={subject:t.ui.message.escalation,receivers:[{group:t.ui.message.receiversGroups,id:v,name:h}],body:t.ui.message.escalationBody(f.diff,f.start.date,f.start.time,f.end.date,f.end.time)},e.broadcast={sms:!0}}e.clean={inbox:function(){i.clean(e.messages.inbox)},outbox:function(){i.clean(e.messages.outbox)},trash:function(){i.clean(e.messages.trash)}},e.scheaduler={job:function(e,r,n){var a=[],o=[];return angular.forEach(e.receivers,function(e){a.push(e.id)}),o.push("paige"),r.sms&&o.push("sms"),r.email&&o.push("email"),{sender:t.app.resources.uuid,recipients:a,label:n.title,subject:e.subject,message:e.body,offsets:l.arrayed(n.offsets),repeat:"week",types:o,active:n.status}},list:function(r){t.statusBar.display(t.ui.message.notificationsRefresh),i.scheaduled.list().then(function(n){n.error?(t.notifier.error(t.ui.errors.messages.notificationsList),console.warn("error ->",n)):(e.scheadules=n,t.statusBar.off(),r())})},get:function(r){i.scheaduled.get(r).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.notificationsGet),console.warn("error ->",r)):e.scheaduled=r})},save:function(e,t,r){r.uuid?this.edit(e,t,r):this.add(e,t,r)},add:function(r,n,a){var o=this;t.statusBar.display(t.ui.message.notificationsAdd),i.scheaduled.create(this.job(r,n,a)).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.notificationsAdd),console.warn("error ->",r)):(t.notifier.success(t.ui.message.notificationSaved),o.list(function(){e.setViewTo("notifications")}))})},edit:function(r,n,a){var o=this;t.statusBar.display(t.ui.message.notificationsEditing),i.scheaduled.edit(a.uuid,this.job(r,n,a)).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.notificationsEdit),console.warn("error ->",r)):(t.notifier.success(t.ui.message.notificationsEdited),o.list(function(){e.setViewTo("notifications")}))})},remove:function(r){var n=this;t.statusBar.display(t.ui.message.notificationsDeleting),i.scheaduled.remove(r).then(function(r){r.error?(t.notifier.error(t.ui.errors.messages.notificationsDelete),console.warn("error ->",r)):(t.notifier.success(t.ui.message.notificationsDeleted),n.list(function(){e.setViewTo("notifications")}))})}}}]),angular.module("WebPaige.Controllers.Scheaduler",[]).controller("scheaduler",["$scope","$rootScope",function(e){e.$watch(function(){e.scheaduled&&angular.forEach(e.scheaduled.offsets,function(e){0==e.mon&&0==e.tue&&0==e.wed&&0==e.thu&&0==e.fri&&0==e.sat&&0==e.sun&&(e.mon=!0);var t=3600,r=60,n=e.time.split(":"),a=n[0]*t+n[1]*r;n[0]!=e.hour&&(e.hour=n[0]),n[1]!=e.minute&&(e.minute=n[1]),e.exact!=a&&(e.exact=a)})}),e.addNewOffset=function(){if(e.scheaduled.offsets[0]){var t=3600,r=60,n=e.scheaduled.offsets[0].time.split(":"),a=n[0]*t+n[1]*r;e.scheaduled.offsets[a]=e.scheaduled.offsets[0],e.scheaduled.offsets[a].exact=a}e.scheaduled.offsets[0]={mon:!0,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1,hour:0,minute:0,time:"00:00",exact:0},e.scheaduleCounter()},e.remover=function(t){delete e.scheaduled.offsets[t],e.scheaduleCounter()}}]),angular.module("WebPaige.Controllers.Groups",[]).controller("groups",["$rootScope","$scope","$location","data","Groups","Profile","$route","$routeParams","Storage","Slots",function(e,t,r,n,a,o,i,s,u,l){function d(e){angular.forEach(n.groups,function(r){r.uuid==e&&(t.group=r)}),t.members=n.members[e],t.members.sort(function(e,t){var r=e.resources.lastName.toLowerCase(),n=t.resources.lastName.toLowerCase();return n>r?-1:r>n?1:0}),t.current=e,c(e)}function c(e){t.wished=!1,a.wish(e).then(function(r){t.wished=!0,t.wish=r.count,t.popover={id:e,wish:r.count}})}function g(e){t.views={view:!1,add:!1,edit:!1,search:!1,member:!1},t.views[e]=!0}e.fixStyles();var m=r.search();t.search={query:""},t.selection={},t.data=n,t.roles=e.config.roles,t.groups=n.groups;var p,f;m.uuid||r.hash()?(p=m.uuid,f=r.hash()):(p=n.groups[0].uuid,f="view",r.search({uuid:n.groups[0].uuid}).hash("view")),d(p),g(f),t.saveWish=function(t,r){e.statusBar.display(e.ui.planboard.changingWish),l.setWish({id:t,start:255600,end:860400,recursive:!0,wish:r}).then(function(r){e.statusBar.off(),r.error?(e.notifier.error(e.ui.errors.groups.saveWish),console.warn("error ->",r)):e.notifier.success(e.ui.planboard.wishChanged),c(t)})},t.requestGroup=function(e,n){d(e),t.$watch(r.search(),function(){r.search({uuid:e})}),n&&("view"!=r.hash()&&r.hash("view"),g("view"))},t.setViewTo=function(e){t.$watch(e,function(){r.hash(e),g(e)})},t.addGroupForm=function(){t.views.add?t.closeTabs():(t.groupForm={},t.setViewTo("add"))},t.newMemberForm=function(){t.views.member?t.closeTabs():(t.memberForm={},t.setViewTo("member"))},t.editGroup=function(e){t.setViewTo("edit"),t.groupForm={id:e.uuid,name:e.name}},t.closeTabs=function(){t.groupForm={},t.memberForm={},t.setViewTo("view")},t.searchMembers=function(r){e.statusBar.display(e.ui.groups.searchingMembers),a.search(r).then(function(n){n.error?(e.notifier.error(e.ui.errors.groups.searchMembers),console.warn("error ->",n)):(t.search={query:"",queried:r},t.candidates=n,t.setViewTo("search"),e.statusBar.off())})},t.addMember=function(n){e.statusBar.display(e.ui.groups.addingNewMember),a.addMember(n).then(function(n){n.error?(e.notifier.error(e.ui.errors.groups.addMember),console.warn("error ->",n)):(e.notifier.success(e.ui.groups.memberAdded),e.statusBar.display(e.ui.groups.refreshingGroupMember),a.query().then(function(n){n.error?(e.notifier.error(e.ui.errors.groups.query),console.warn("error ->",n)):(t.data=n,e.statusBar.off(),"search"==r.hash()&&t.searchMembers(t.search.query))}))})},t.removeMember=function(r,n){e.statusBar.display(e.ui.groups.removingMember),a.removeMember(r,n).then(function(r){r.error?(e.notifier.error(e.ui.errors.groups.removeMember),console.warn("error ->",r)):(e.notifier.success(e.ui.groups.memberRemoved),e.statusBar.display(e.ui.groups.refreshingGroupMember),a.query().then(function(r){r.error?(e.notifier.error(e.ui.errors.groups.query),console.warn("error ->",r)):(t.data=r,e.statusBar.off())}))})},t.removeMembers=function(r,n){e.statusBar.display(e.ui.groups.removingSelected),a.removeMembers(r,n).then(function(r){r.error?(e.notifier.error(e.ui.errors.groups.removeMembers),console.warn("error ->",r)):(e.notifier.success(e.ui.groups.memberRemoved),e.statusBar.display(e.ui.groups.refreshingGroupMember),t.selection={},a.query().then(function(r){r.error?(e.notifier.error(e.ui.errors.groups.query),console.warn("error ->",r)):(t.data=r,e.statusBar.off())}))})},t.groupSubmit=function(n){e.statusBar.display(e.ui.groups.saving),a.save(n).then(function(n){n.error?(e.notifier.error(e.ui.errors.groups.groupSubmit),console.warn("error ->",n)):(e.notifier.success(e.ui.groups.groupSaved),e.statusBar.display(e.ui.groups.refreshingGroupMember),a.query().then(function(a){a.error?(e.notifier.error(e.ui.errors.groups.query),console.warn("error ->",a)):(t.closeTabs(),t.data=a,angular.forEach(a.groups,function(e){e.uuid==n&&(t.groups=a.groups,angular.forEach(a.groups,function(r){r.uuid==e.uuid&&(t.group=r)}),t.members=a.members[e.uuid],t.current=e.uuid,t.$watch(r.search(),function(){r.search({uuid:e.uuid})}))}),e.statusBar.off())}))})},t.memberSubmit=function(n){e.config.profile.smartAlarm&&(n.role=1),e.statusBar.display(e.ui.groups.registerNew),o.register(n).then(function(o){o.error?(409===o.error.status?(e.notifier.error(e.ui.errors.groups.memberSubmitRegistered),e.statusBar.off()):403===o.error.status?(e.notifier.error("Registering a new user is failed. Please try again."),e.statusBar.off(),$("body").scrollTop(0)):e.notifier.error(e.ui.errors.groups.memberSubmitRegister),console.warn("error ->",o)):(e.notifier.success(e.ui.groups.memberRegstered),e.statusBar.display(e.ui.groups.refreshingGroupMember),a.query().then(function(a){a.error?(e.notifier.error(e.ui.errors.groups.query),console.warn("error ->",a)):(t.data=a,r.path("/profile/"+n.username).hash("profile"),e.statusBar.off())}))})},t.confirmGroupDelete=function(t){e.notifier.alert("",!1,!0,{section:"groups",id:t})},e.$on("fireGroupDelete",function(e,r){t.deleteGroup(r.id)}),t.deleteGroup=function(n){e.statusBar.display(e.ui.groups.deleting),a.remove(n).then(function(n){n.error?(e.notifier.error(e.ui.errors.groups.deleteGroup),console.warn("error ->",n)):(e.notifier.success(e.ui.groups.deleted),e.statusBar.display(e.ui.groups.refreshingGroupMember),a.query().then(function(n){n.error?(e.notifier.error(e.ui.errors.groups.query),console.warn("error ->",n)):(t.data=n,angular.forEach(n.groups,function(){t.groups=n.groups,t.group=n.groups[0],t.members=n.members[n.groups[0].uuid],t.current=n.groups[0].uuid,t.$watch(r.search(),function(){r.search({uuid:n.groups[0].uuid})})}),e.statusBar.off())}))})},t.toggleSelection=function(e,r){var n=r?!0:!1,a=angular.fromJson(u.get(e.uuid));angular.forEach(a,function(e){t.selection[e.uuid]=n})},t.fetchParent=function(){a.parents().then(function(e){console.warn("parent -> ",e)})},t.fetchContainers=function(e){a.containers(e).then(function(e){console.warn("containers -> ",e)})},t.reverse=!1,t.sorter="resources.lastName",t.toggleSorter=function(e){t.reverse=t.sorter==e?!t.reverse:!1,t.sorter=e}}]),angular.module("WebPaige.Controllers.Profile",[]).controller("profile",["$rootScope","$scope","$q","$location","$window","$route","data","Profile","Storage","Groups","Dater","MD5",function(e,t,r,n,a,o,i,s,u,l,d,c){function g(r){t.views={profile:!1,edit:!1,password:!1,timeline:!1},t.views[r]=!0,t.views.user=e.app.resources.uuid.toLowerCase()==o.current.params.userId?!0:!1}function m(){t.timeline={id:"userTimeline",main:!1,user:{id:o.current.params.userId},current:t.current,options:{start:new Date(t.periods.weeks[t.current.week].first.day),end:new Date(t.periods.weeks[t.current.week].last.day),min:new Date(t.periods.weeks[t.current.week].first.day),max:new Date(t.periods.weeks[t.current.week].last.day)},range:{start:t.periods.weeks[t.current.week].first.day,end:t.periods.weeks[t.current.week].last.day},config:{legenda:{},legendarer:e.config.timeline.config.legendarer,states:e.config.timeline.config.states}};
var r={};angular.forEach(t.timeline.config.states,function(e,t){r[t]=e.label}),t.states=r,angular.forEach(e.config.timeline.config.states,function(e,r){t.timeline.config.legenda[r]=!0}),t.daterange=d.readable.date(t.timeline.range.start)+" / "+d.readable.date(t.timeline.range.end),$("#timeline").html(""),$("#timeline").append('<div id="userTimeline"></div>')}e.notification.status=!1,e.fixStyles(),t.self=this,t.periods=d.getPeriods(),t.current={day:Date.today().getDayOfYear()+1,week:(new Date).getWeek(),month:(new Date).getMonth()+1},e.app.resources.uuid.toLowerCase()!=o.current.params.userId&&i&&i.slots&&(i.user=i.slots.data),t.data=i,t.profilemeta=i&&i.resources,t.groups=o.current.params.userId&&l.getMemberGroups(o.current.params.userId.toLowerCase()),t.passwords={current:"",new1:"",new2:""},t.forms={add:!1,edit:!1},t.toggleSlotForm=function(){t.forms.add?t.resetInlineForms():(t.slot={},t.slot={start:{date:(new Date).toString(e.config.formats.date),time:(new Date).toString(e.config.formats.time),datetime:(new Date).toISOString()},end:{date:(new Date).toString(e.config.formats.date),time:(new Date).addHours(1).toString(e.config.formats.time),datetime:(new Date).toISOString()},state:"",recursive:!1,id:""},t.forms={add:!0,edit:!1})},t.resetInlineForms=function(){t.slot={},t.original={},t.forms={add:!1,edit:!1}},g(n.hash()),t.setViewTo=function(e){t.$watch(n.hash(),function(){n.hash(e),g(e)})},t.save=function(r){e.statusBar.display(e.ui.profile.saveProfile),r.Password&&(r.askPass=c(r.Password)),s.save(o.current.params.userId,r).then(function(r){if(r.error)e.notifier.error(e.ui.errors.profile.save),console.warn("error ->",r);else{e.statusBar.display(e.ui.profile.refreshing);var n=o.current.params.userId.toLowerCase()==e.app.resources.uuid?!0:!1;s.get(o.current.params.userId.toLowerCase(),n).then(function(r){r.error?(e.notifier.error(e.ui.errors.profile.get),console.warn("error ->",r)):(e.notifier.success(e.ui.profile.dataChanged),t.data=r,e.statusBar.off())})}})},t.change=function(r){return""==r.new1||""==r.new2?(e.notifier.error(e.ui.profile.pleaseFill,!0),!1):r.new1!=r.new2?(e.notifier.error(e.ui.profile.passNotMatch,!0),!1):(e.app.resources.askPass==c(r.current)?(e.statusBar.display(e.ui.profile.changingPass),s.changePassword(r).then(function(r){r.error?(e.notifier.error(e.ui.errors.profile.changePassword),console.warn("error ->",r)):(e.statusBar.display(e.ui.profile.refreshing),s.get(e.app.resources.uuid,!0).then(function(r){r.error?(e.notifier.error(e.ui.errors.profile.get),console.warn("error ->",r)):(e.notifier.success(e.ui.profile.passChanged),t.data=r,e.statusBar.off())}))})):e.notifier.error(e.ui.profile.passwrong,!0),void 0)},o.current.params.userId&&e.app.resources.uuid!=o.current.params.userId.toLowerCase()&&m(),t.redraw=function(){setTimeout(function(){t.self.timeline&&t.self.timeline.redraw()},100)}}]),angular.module("WebPaige.Controllers.Settings",[]).controller("settings",["$rootScope","$scope","$window","data","Settings","Profile","Storage",function(e,t,r,n,a,o,i){e.notification.status=!1,e.fixStyles(),t.settings=angular.fromJson(n);var s={};angular.forEach(ui,function(e){s[e.meta.name]=e.meta.label}),t.languages=s;var u={};angular.forEach(i.local.groups(),function(e){u[e.uuid]=e.name}),t.groups=u,t.save=function(r){e.statusBar.display(e.ui.settings.saving),a.save(e.app.resources.uuid,r).then(function(){e.notifier.success(e.ui.settings.saved),e.statusBar.display(e.ui.settings.refreshing),o.get(e.app.resources.uuid,!0).then(function(r){r.error?(e.notifier.error(e.ui.errors.settings.save),console.warn("error ->",r)):(t.settings=angular.fromJson(r.resources.settingsWebPaige),e.changeLanguage(angular.fromJson(r.resources.settingsWebPaige).user.language),e.statusBar.off())})})},t.authGoogle=function(){window.location="http://3rc2.ask-services.appspot.com/auth/google?agentUrl=http://3rc2.ask-services.appspot.com/eveagents/personalagent/"+e.app.resources.uuid+"/"+"&agentMethod=createGoogleAgents"+"&applicationCallback="+location.protocol+"//"+location.hostname+(location.port&&":"+location.port)+"/index.html"+"?account="+e.app.resources.uuid+encodeURIComponent("#")+"/settings"}}]),angular.module("WebPaige.Controllers.Help",[]).controller("help",["$rootScope","$scope","$location",function(e,t,r){function n(e){t.views={dashboard:!1,planboard:!1,messages:!1,groups:!1,profile:!1,settings:!1,support:!1},t.views[e]=!0}if(e.notification.status=!1,e.fixStyles(),t.setViewTo=function(e){t.$watch(e,function(){r.hash(e),n(e)})},r.hash())var a=r.hash();else{var a="dashboard";r.hash("dashboard")}n(a)}]);